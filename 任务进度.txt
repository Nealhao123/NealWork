-->Old days
需求理解：
做一个简单的winform ，实现登录和一个简单的主界面。
登录所需的数据就是远端查询下来的。

1.实现登录的过程中，不要引用任何项目，WebService及外部控件除外
2.一切从简。

1.登录过程验证已经实现，调整对话框
2.理解清楚登录所需的数据有哪些，为什么是从远端查询下来的。
3.本地的锁读出的数据 可能是一段标识符，然后去远端查询下来，查询下来又会获取哪些数据。
4.用户名、密码通过webservice服务验证。这好像跟读锁好像没有什么关系？
5.找到用户名、密码验证的webservice是哪一个。然后调用就可以了
comm.Connection ConnectionSting = "Data Source=f:\\建设数字\\刘浩\\相关代码\\epdmdb测试-zhh.db;Pooling=true;FailIfMissing=true;Password=ccir"
  tbUserInfo  clear:
 <-->简单的工作做好
  "select FTPNUM from tbFtp where SYSPW='1B2M2Y8AsgTpgAmY7PhCfg=='"
  "http://kcsj.ccir.com.cn/CcirP2pService/"
  http://210.75.211.218/KCSJServices/EIReceiveService.asmx
  验证的函数找到了，但是找不到接入WebService的点，地址及函数都找不到。
  根据提供的信息，是将数据库克隆到本地，然后在本地进行验证？验证的时候检查连接
  查询语句  查询的Table如果能从这个table找到这个字段，那么又怎么样，ErrorMessage
  查询结果是用的errorMessage，根据这个找一下结果反馈的代码。
	CcirCommand -> CcirDataBase
          private string          StrConn        = "server=UID=lishaojun;Password=ccir;DataBase=EPDMDB;Server=localhost\\sqlexpress";		  clear:
		-->  // 执行的语句能不能找到？
		
		  // 执行时的数据库能不能找到
		  // 如果执行的数据库是本地的 如何调用远端的 
		  // 远端的需要提供接口 
		  // 可以直接用SQL语句查询远端的数据库吗  不可以，没有提供保存用户名及密码的接口
		  clear
		  		  clear

				  		  clear

						  		  clear
								  		  clear
		  clear
		  // 如果可以的话那么也就可以调用
		  		  		  clear:		  		  -->如何查询远端的数据库
		  远端没有存储用户名和密码
		  用webservice服务验证，那么就要在webservice上写一个可以提供验证的系统。 
		  记住只需要大概框架
		  首先在WebService写一个验证的接口
		  然后在这边 进行两种验证
		  1.验证锁，通过（远端验证？） 明天看看代码就知道通常的验证方式，应该是通过远端验证。
		  2.通过WebService验证用户名与密码 
		  145	006	006	0000000000000001	SysAdmin	xMpCOKC5I4INzFCab3WEmw==	NULL	0000000000000001	NULL	1
		  42F81BC14BC44C2B
	验证锁的方式仍待确认 是CcirManamageService还是QMIService
	验证用户密码是在QMIService 并且在本地可以确认
	查看一下需求文档 进行深化及细节补充
	验证锁绑定的用户名和密码 与输入的用户名和密码 对不对应 
	1.锁里面是否存了 用户信息 还是在远端存了用户信息用锁去查询
		（猜想是在远端数据库存了，不可能在本地存数据信息，
		所以验证锁的方式就是根据锁来查询WebService提供的数据库然后来知道用户名密码等）
		所以验证登录的话，是提供锁号，然后返回用户名及密码等  猜想错误！ 
		
		那么用户密码是可以更改的，如果存在锁内部更改无法更改。
		找到可以查询用户名和密码的WebService
		锁绑定了用户名和密码
		所以这个接口在哪呢 
		所以服务器的数据库上面有一栏是 锁的编号及锁绑定的用户名和密码  那么查询的接口又在哪呢
		
		
		先做一个登陆界面，能够输入用户名，密码
		能够读取锁
		验证锁绑定的用户名和密码对不对
		然后，再弹出来一个主界面，
		你先做登陆
		后续，我让需求这边发给你

2.需求基本达到 看看字段涵义
	吉林省、联审系统（猜想是指主体单位、勘察设计单位、联合单位，那么涉及到的字段为身份字段）
	上报 客户端 （上报到服务器、模仿EI上报、首先检验相关字段、然后截取字段上报服务器）
	项目基本信息、单体信息（查看一下字段？）IU
		这两个信息在根据锁知道它的身份是属于谁（是主体单位、勘察设计单位、联合单位）
		然后在远端数据库查询得到所有属于该身份的项目基本信息、包括单体信息
	现在需要做的是 
		1.根据锁来判断身份
		2.了解下载数据库的过程，是怎么验证的
		3.下载到本地的数据库难道是全部？ 应该不会 首先有地市的区别
	ReadCensorProjectInfo()
	根据各个地市的不同 来构造不同的IP(EiClientService.asmx)
	ReadCensorProjectInfo()
	一个单位有包涵
主体单位、勘察单位、联合设计项目	
	项目基本信息、单体信息（查看一下字段？）IU
	首先可以
	UserLoginClass
	字段已经找到，Selet  连接的数据库是远端的？ 测试数据库
	server=UID=lishaojun;Password=ccir;DataBase=EPDMDB;Server=localhost\\sqlexpress
	已经找到了接口出 异步调用WebService来读取项目有关信息。
	这个项目信息是在远端的。所以包括上报下载等，都会与WebService交互。
	那么现在尝试着读取一下数据库中的 项目基本信息与单体信息。
	因为调用接口时使用的用户全国唯一编码 这个编码同样可以通过WebService查询
	产品序列号 组织机构代码
	FullCorpCode
	我现在要实现什么？  实现一个类 在第一个对话框设置数据以后 第二个对话框可以接着使用
	现在遇到的问题是 在第一个对话框使用结束以后，数据没有了。 
	解决方案： 模仿一下Epdm里面是如何实现的(√)
	223062
全国唯一码已经获取
然后调用一下WebService的查询接口就可以了
就能获取到相应的信息 
1.尝试着利用全国唯一码来获取属于该单位的 扮演主体设计单位、勘察单位和联合设计单位的项目信息
	只需要找到接口名称
	
2.FullCorpCode 为什么会被补充到那么多位数，找到。
（FullCorpCode为什么都是同一个）

	DesignCorpFullCorpCode、EconCorpFullCorpCode、CensorDepartFullcorpCode
	二进制的数据读取后用 SqlDataReader来进行读取
测试一下web系统
	1.所以首先 找到测试的例子 测试的用户名用户密码（包括建设单位、勘察部门、主管部门都需要在数据库里面找到一个相应的测试登录名）
	2.通过验证，来走一下流程（）
	3.了解他们分别管的是哪部分代码（）
	4.模仿一下做下实验，这个最好不用理解实现（How it work），只知道接口学会使用（What can it do）
clear:
	-->1.先熟悉一下各个字段的意思 并记录 done
1.2 看一下代码  想想各功能地方是怎么实现的
clear
	--> 菜单式的选择窗口
	 aaa
2.然后尝试了解一下项目目前的状况
	可以根据任务来了解，任务加测试
3.尝试完成一些任务试试
  写一个helloworld 
  将tbHelloWorld的值传过去，然后在处理程序里面将获取的值加一段字符串再回传过来
  在哪个页面： HelloWorld.ashx  还是default.ashx
  在default.ashx先学会传值
  将default.ashx的值传到和数据库交互的地点 中间通过js
  
4.只使用default.ashx来调用一下HelloWorld.ashx 然后通过HelloWorld 来通过.js与Ajax来与数据库进行交互
	1.default.ashx调用HelloWorld界面
	2.通过调用.js函数
	3.clear:
-->主要任务：
	1.测试，钉钉群里的消息，所有人测试一下
	2.比较重要的任务，衢州市的短信功能。
		衢州短信功能
		馨予给了我一个账户和密码
		mstsc
		在服务器系统写脚本，然后根据衢州短信接口(已经提供了的)，然后发送短信
			
	1.根据提供的接口
	今天先完成代码的撰写，实现
	阳哥说给个服务器，测试能不能发短信。这边写完代码后用自己的手机测试一下能不能发短信。
	如果可以那么没有什么问题（不可以实际发送短信，回来的信息是3302，问一下3302）
	已经调用了 dll的SendMessage函数返回值应该也是 
我现在要做什么：
	1.发短信到自己的手机测试
		方法：
		1.调用的是阳哥给的dll
			调用的是阳哥给的dll，那么搞清楚回复3302这个代码是什么意思。
			3302表示当前IP被限制
				如果不想问阳哥的话，破解reflactor然后查看源码(X)
				
		不需要考虑url等，只需调用就可以了
		
			如果没有什么问题，要一个SVN号。（V）
			
		2.如果调用的是丽水、温州市的WebService的话，就需要知道为什么会报错。
		但是不是调用的WebService，所以暂时不用管（所以这个短信网关地址有机会再研究）
		3.搞清楚数据库是怎么回事。目前用的是本地库，输入名称等都没有问题
		看看网关那里怎么回事，有什么用(暂时不用管)
	接下来想着如何在服务器上运行，只要阳哥提供的dll可以使用，那么这边测试的时候做一下限制
	保证不会发错短信
	然后就可以按正常的流程来进行测试。
	那么我现在要做的是在本地测试
	现在需要几个系统，根据需求文档来要几个软件
	测试：
		
		分为两部分：1.正确地通过操作界面触发，数据库字段添加
					2.（运行服务器）数据库字段添加以后马上发送短信。
			操作界面依赖新系统
			我可以越过操作界面，直接在数据库里面进行添加字段。	
			那我现在测试的话，我直接在数据库添加字段，等新系统可以测试了以后再根据需求文档进行修改。
			
	测试应该没有问题。
	理解短信服务的逻辑，找到解决BUG的方法。
		这个BUG有点困难，如果孟坚持自己的代码没错
			那么找一下是不是新写的代码的原因。
			然后理解一下这个逻辑，为什么会设置这么一个等待。
			我觉得这个系统确实有问题，没有测出问题是因为没有在SmsMsg的时候停止服务
			暂时保留自己的想法。
	
	建设单位上报 根据选择的区县就会知道 住建部门，住建登录是在主管部门
 
	接下来: 
		根据需求文档找到相应的界面，然后对界面进行修改。
			也可以对这些短信进行集成，都放在一个dll里面。避免下次修改的时候，在各个系统找来找去的，这个是架构的问题，只是一个ideal而已
		新系统还有很多未完成，所以先试着理解一下新系统的设计。并且找到已经做好了的需要发送短信的界面。
		一个一个地解决
	
	新系统没有表tbHphoneMessage 创建 查看一下添加字段在老系统是怎么实现的
	老系统在发送短信的时候，使用的sqlCommand采用了数据库的存储过程。
	这个设计对于我来说有点难，但应该是一个非常棒的设计。
	（猜测：有可能发送短信的存储过程SendHPhoneMessage，传入参数只是一个key，然后根据这个key来获取一些相应的值）
	厉害了，在数据库的存储过程里面来进行编辑发送的内容等。
	所以接下来需要
		1.在新系统需要触发的时候添加同老系统近似的触发代码
			直接Copy整张表到新系统，然后做一下简单的修改就可以了
			看一下老系统的1对多的发送短信是如何触发的，（推断应该是在数据库的存储过程）
				看一下如何处理，并且修改
				传入的时候，只传入一个key 还有一个传入了username
				在哪里可以找到需要的字段(信息内容)
				这个是在存储过程里面编写
				
			尝试着新建一个存储过程，只根据type来判断发送的短信内容
			在存储过程中来根据type来获取相应的 发送短信所需的信息，应该在tbProj。
			那要不要key总是需要key（必须要获取到当前操作项目的ServerPrjNum）
			SendHphoneMessage有两个参数。(type,ServerPrjNum)
			
			现在开始写相应数据库函数及其信息
			
			
			
			//多对1，这个应该是在分析的时候做的，所以应该是在新系统触发
			
		老系统在调用的时候， 传了项目的名称strServerPrjNum   服务项目数
		2.在数据库创建表的时候，仿照老系统的存储过程来对其进行相应的撰写。
		    新系统就是衢州市的
		
		比如说，上报的
		
	代码都是一套
		两件事：
			1.修改存储过程，
			2.根据需求修改代码
		设计：程序代码尽量保持各地市一致，然后把节点放在数据库，每个地市的数据库的操作不一样
		
		对这个触发过程还不是很理解。程序里面触发的地方只有一个，然后为什么会有这么多的节点。
		S端在上报报审项目的时候会发送短信
			所以B端在哪些情况下会调用报审项目，哪些情况就会发送短信
			对比一下现在的需求，查看一下比如回复短信这种地方是否也调用了上报项目接口
			那么这个还得根据B端的操作来看看，哪些是调用了上报项目接口的
			
		关键设计的需求是只改各地市的数据库   触发过程
			SaveCensorPrjInfo3
			SaveCensorPrjInfo
		所以目前的设计是 发送短信还是跑在各个操作节点（也就是代码里面QciWeb）（QMIService里面）
			目前这个节点能保证都是在服务器上运行的程序才会享受这个节点
		然后根据各个节点的不同来对数据库的SendMsg函数 传不同的Type来对短信进行发送
		如果要改设计的话：
			目前已经是做得不错的了
			 各个地市发送的节点不一样，发送的内容一样。
			不在各个节点来传递参数
		为了解决什么问题？
			就是各个地市要求发送的短信节点不一样，能不能不在代码中来找这个节点
			或者将节点归个类
			一套代码，同时使用，但是根据各地市来区分节点。
			type就是对节点的区分。
			现在的问题是这些节点在代码中难以寻找，如何让它更好寻找
			用一个类
		主要不同节点这个操作就会在服务器上面运行不同的代码
		那么他又是怎么来区分  丽水和衢州的呢？
		1.没有产生数据库数据  在存储过程里面限制了
		2.发送的时候，目前都是用的同一种  
		发送的时候，让不同的市来走不同的发送 对每个节点进行判断 流程还是一样的
			解决方案：在每一个发送的节点，来对用户的地市进行判断。然后来发送短信
		有了两个地方有发送短信的节点：
			1.在QciWeb
			2.在QMIService
	问题是什么？
		他是怎么区别地市发送短信的
		
		流程：
		用户进入各地市，然后操作，然后出发发送短信，（发送短信的存储过程SendMsg）
		每个地市的数据库上面的存储过程不一样
		他现在是怎么来区分不同的地市的
		温州 丽水
		
		现在有第二种做法
		不修改本地的代码
		比照需求，有的就直接用，然后在数据库端写存储过程来进行判断
		，要添加的？（然后用一个值来看是否是衢州的）
		有地方要删除的？
			
		已经确定温州和丽水的一样
			那么现在就根据，需求进行修改，没有的再进行添加
		
	有哪些节点：可以试着找一下
	老的和新的  新系统应该是没有发送短信的节点 
		数据库交互的节点应该还是蛮好找的 数据库交互 触发位置
		
	新系统的 与数据库的交互在哪？基本都在mainlogic里面
	q1:地址都是存在数据库的是什么意思
	
	页面aspx    脚本js    一般处理程序ashx          后台cs
	  |   前端   |        前端与后台的链接   后台处理 访问数据库
	试着找一下 然后考虑一下怎么设计这个发送短信的节点。
	以衢州市的为例
	
短信系统设计：把所有节点整理一个（这个就能让一套代码在各个服务器使用）
	然后在BS端对所有地市都进行发送短信，只用在数据库的存储过程通过@CityNum来区分哪些地势触发需要注销掉哪些节点。
	
	短信内容怎么办？
各地市都能进去 ，然后代号不一样。
	比如:
	if(@CityNum=330800)//衢州
	{	
		SendMessge(1,2,5,6,7,9,10)//可用type
	}
		如何具体实现：
		通过传入参数（项目代号），可以查询到@CityNum
		int[] usableMsgs ;
		然后通过if (@CityNum == "330800")
		{
		     usableMsgs = new {1,2,5,6,7,9,10};
		}
		
		if(!usableMsgs.content(@Type))
		{
			return;
		}
		SendMessgae(Type);
		....
		
		SendMessage
			这个过程最好在存储过程实现。
			这样便于对照
			而BS端只需要调用一下存储过程就行了
			
		如果在BS端实现：
		方便撰写代码
		可能需要更多的访问
		不太合理，因为老系统的代码都是在存储过程访问的
		
		那么就在存储过程实现得了
		
		
		
	2.比较紧急且重要的是，衢州的。
		换一下联系人。那么就是新的需求。 那么就设计到内容节点这些更改。
		我依旧这样设计  只是1.老系统的BS端需要改一下
		然后修改一下存储过程
		系统更新，数据库肯定也是跟着跟新的
		那么 数据库改变 
			 系统也跟着改变
			 
		
		
		
		
发送的短信内容不一样呢？
	设计目的：让一套代码在所有数据库使用
	所以短信内容不一样 ，所有的都得写进来
	两个不一样：一个是节点不一样
				一个是短信内容不一样
				用一个类似与类的东西来封装短信内容，需要添加什么内容，直接用MsgContent 1.2.3.4.5.6.7.9
		如何具体实现：
	用的是同一套代码。
	
	图审机构看是怎么获取这个号码的  把电话号码 替换一下
	  // 看一下 
	联系方式
	发送内容模板
	短信平台接口
		我做两份 一份给衢州的，一份给新系统

那么明天就做一份新系统通用的
	新系统短信设计：
	 首先是定义一个新类，MessageSender
	 然后这个类把所有的节点都列出来
	 按节点来调用数据库触发过程（传入参数Type给SendHphoneMessage）
	 
	 然后在数据库的触发过程
	 根据项目查询地市，根据地市来决定 触发哪些节点
		比如：
		if(@CityNum=330800)//衢州
	{	
	    衢州使用{1,2,3,5,8,9,13}
	}
	然后如果传入的Type被衢州{1,2,3,5,8,9,13}包含
	就可以使用
	1.建设部门立项发给勘察设计：内容：xxxx
	2.勘察设计上次图纸后，发给住建：内容：xxxx
	3......
	5......
	
	
	这么设计的话 ，那么BS端传入的Type怎么改呢？
	不用改，因为节点都一样。
	
	假设有8个节点；
	20个内容
	怎么用n地市来区别8个节点发送不同特定的20个内容
	内容
	如果是衢州{
	Type:1 ->内容1
	Type:2 ->内容2
	Type:3 ->内容4
	Type:4 ->18
	...
	Type:8 ->20
	}
	
	所以这里还是用的地市来区分，
	同样的是一个地市一套代码
	但是需求就是这样 有什么办法呢
	
	节点不会多出来
		总的节点
		少要点节点倒是有可能的
		这个节点以后还可以用来做图形界面
	所以包涵所有节点，都发，然后在数据库 用地市
	每个地市一套？
	内容能不能重用？
	如果内容可以独立出来 
	那么就可以重用
	
	
	
	第四个参数：用来区分发送短信的是哪个单位
	只是为了少传一点Type
	如果细化的话，所有节点都给个区分，如果不细化的话，直接传参来判断
	以目的为设计的话面向过程
	以类来设计的话 面向对象
	所以细化！
	
	所以不需要传递参数4（反正老系统也没有传递该参数）
	数据库里面用到参数4 是用来判断是勘察单位还是设计单位的 
	首先这个整个发送短信的流程都是用一个项目来走的 
	按照常理来说应该只用一个项目编号就可以了
	然后根据这个编号，来找到其他需要的东西 

TODO:台州短信
	
	
	MsgInformContactorName
	MsgInformContactorPhone
	
	整理v
	重用
	维护
	
	发送给谁
	发送的内容
	
有两个问题：
	1.报错是否影响其他地市的使用
	2.Goto语句是否可以用于执行函数的使用
		（函数执行完会接着使用吗）
接下来仍需要做的
	
	//2.为每一个地市，撰写一套发送过程代码，经过整理已经比较好写而且各地市通用
	//3.首先测试是最好的（但是总是能找到解决方案的，大不了多一点逻辑判断）
	//
	找到衢州的消防人防气象，并发送短信
	如果没有：
		1.更新一份最新数据库
		2.添加人防气象等信息在tb里面
	 我给你说说我遇到的问题吧 你如果感兴趣的话 
	 发送短信的有12个地市
	 节点是12个地市的整合（比如都有第一个节点 建筑部门上报）
	 每个地市的逻辑不一样（比如建筑部门上报，衢州市的发给住建、勘察设计 而 温州市的只发给勘察设计）
	 每个地市发送的内容最好可以重用
	 那我就用goto back
	
	接下来：
	先测试 后找短信节点
		1.imp：找到所有发送短信的节点（BS端）

	测试：
		衢州
		 Type 1 883  null null
	
	Type 2	883 null null
	@@EconCorpFullCorpCode 	183073
	@DesignCorpFullCorpCode	153212
	@DesignCorpFullCorpCode1	093566			
	@DesignCorpFullCorpCode2
	Type3  883  null null
	Type3  108   118
	Type3 	68	null	null
	R：内容有可能为空
	修改mark的空间到vchar(1000)
	Type4 883 null null
	有NotShouAdvice 时应该可执行
	Type5 883 null null
	Type7 883 null null
	
	8 ..	
	
	10
	
	现在有几个问题：
		1.找到短信发送节点
		2.内容为空需不需判断
		3.消防、人防、气象 	IsCensorXf/IsCensorRf/IsCensorFl
	为消防、人防、气象建字段（涉及到修改数据库）
	
还是先找到短信发送的节点吧
现在试着找一下节点
	Type1	Type2
	建设单位保存
	上报都是同一个地方。可能查询的时候 接收到
	是选了市内室外的那个才来决定是否 给审查机构发送消息（并不是）
	猜测是因为功能模块还没有完成，q:上报项目，住建可以接收到吗
	
	改了，勘察设计上报以后
	
	Type3 v
	Type4 V
	Type5 v
	Type6 v
	Type7 x系统未完善 添加审查意见
	Type8 v
	Type9 x	
	Type 10 EI x
	
	下周会把建设部门立项升级上去，那我把短信同步升级上去
	这个升级是，升级上去的话，数据库呢，应该也跟着升上去了才对
	这个分步式的升级是怎么做到的 不是数据库都不一样的吗
	还是说这个 数据库没有变
	新旧数据库是怎么实现互通的
	新旧数据库到底哪些一样哪些不一样
	新的数据库应该也是分地市的
	
	已经把节点添加完了
	老系统
	再集成一下就行了
	熟悉一下老系统，模块化地更新 看看他是怎么实现的。
	新系统兼容老系统
	首先要看是哪个地市的（上短信的话）
	
	只修改数据库的存储过程能不能实现，不能，需要在客户端节点
	
	新增节点和老的节点，老的节点修改内容，新的节点要在代码端修改，但是都比较容易。
	按照自己的设计来一套，考虑到在不同的系统使用，所以可能做成dll形式	但是你的dll只有一段话，还不如使用原来的。只需要把原来的节点，发送的Type编号修改一下就行了。
本周任务：
	1.熟悉新系统，整个新系统的流程一定要把所有的基本操作最好都走一遍，最好要到所有代码
		一些细节的东西，每一个字段
		CensorTypeNum 2是市政工程 3是房屋建筑设计
		IsCensorXF IsCensorRF IsCensorFl
		FullCorpCode看一下这个神秘的代码是怎么来的
		tbCensorPrjInfo.ReportDepFullCorpCode  //记录的唯一标示符
		= tbCenSorShipBasicInfo.FullCorpCode
			tbManageDepartInfo.  tbCensorPrjInfo . 
		有消防人防气象单位信息，各地市是怎么来关联的？
		那么这个可能就要勘察设计单位补报的时候代码。
		有了
		那么继续找一下设计单位补报过程
			主要是想弄清楚这个补报过程会发生哪些操作，是否会修改一些唯一标识码，这些码是怎么关联到消防、人防、气象的
		上报的时候是调用了QMIService的函数，按照逻辑，在QMIService上与数据库直接交互，那么是否应该在上面直接发送短信呢？答案是肯定的
		
		那么接下来：
		1.找到消防、人防、气象的连接
		2.直接把能加的节点加上去？  加上去也不一定能调通啊 
		3.
			
			
		
		勘察设计的系统用的哪一个？EI5.0 ELC TUShenClient......
			Data Source=f:\\建设数字\\刘浩\\相关代码\\epdmdb测试-zhh.db;Pooling=true;FailIfMissing=true;Password=ccir
		报审项目的时候，审查编号还是空，因为还没有受理
		
		读取建设单位唯一码 这个是建设单位来的，很奇怪，为什么住建的会使用建设单位的唯一码
		
		网签系统
		
	2.然后加上发送短信
		结果为导向的，先实现，怎么实现，别人不管的。
		需求是：1.所有的地市，跟着需求修改。1.内容修改2.节点修改
		如果是内容先给他改，如果是节点，不添加，有就有，没有就算了。
		在新系统里面添加
		
	新系统的流程
	
	建设行业管理信息系统
	出图系统
	电子审图
	
	如果现在想完成以下短信的话，还有一些节点，可能在网签系统（具体因为没有源代码，不知道哪些系统有节点，没有仔细看）里面
	
	所以现在需要做的是熟悉整个新系统的流程
	
	“新系统”、流程“”。
	找到封文龙发的操作流程？
	大哥的PDF
	
	短信这边，大哥要求根据提供的文档来 写一下短信的内容。
	文档：v
		通知住建 用region=countynum   
	知道方法就可以了 ，具体的暂时先不改
	消防人防气象 
		ReportDepFullCorpCode到底是干嘛的
		tbCenSorShipBasicInfo.FullCorpCode = tbCensorPrjInfo.ReportDepFullCorpCode
	
	流程：
		首先 建筑部门网上申报（QCIWeb） -> 勘察设计补充信息（EI）勘察设计回复信息 -> 住建受理（QMIWeb）-> 审查机构受理（EI）-> 审图（电子审图） -> 回复意见 or 通过 -> 备案 ->打印图纸
	新版与老版的对照一下
	QCIWEB 
	
	任务：
	1.小程序
		先留着 抄一下前代码
		done!
	2.更新老系统 svn 更新数据库
		v，更新数据库？
	
	--0勘察，1设计，2联合设计1,3联合设计2
	测试一下插入数据的节点是否正确，包括内容
	今天把几个点改一下
	ccir_adddesigncorpprogress 
	上报在哪？
	在EI
	现在不知道 SaveCensorPrjInfo 3 4 分别是在哪里触发的，然后对应修改正确在EI里面找一下
	
	这两天，嘉兴摇号规则
		先看看这个
		
	
	测试设计单位 联合1、2
	
	市政和房建。  
	找到原因了
	添加一个字段
	将市政和房建的计数分开
	那么这个字段的初始值，如果设为空的话，（最好别）
		不初始化值，
		从此刻开始，
	分开后的话，
	将市政现在的值送给新建字段
	其他的不变
	然后房建摇号就会摇得均衡一些
		现在：修改代码
		1.QCIWeb端：
		修改 
	v
	测试节点：
	prjcensorstagename 步骤名
	nodebzinfo	节点 bz(步骤)信息
	
	
	
	100，报审项目的节点 
	-210/220/230/240、勘察、设计、联合设计1、联合设计2 （0/1/2/3） 3 联合设计 但是2没有用到因为都用了SaveCensorPrjInfo3
	0勘察 正确
	主体设计1 正确
	
	300，
	310，C
	400，
	410，
	
	420,审查机构安排审查人员（没有插入节点）
	430,C一审
	
	-431 审查人员出具专业结论	电子图审系统
	-432 主审人出具项目结论		电子图审系统
	440,
	-211 勘察单位已反馈修改成果		v	EI
	-221 设计单位已反馈修改成果	v		EI未找到
	-231 联合设计单位1已反馈修改成果	v
	-241 联合设计单位2已反馈修改成果	v
	450,
	-460 完成施工图审查，已出具复审报告   生成是在BS里面未找到
	470x审查机构上报备案，需实际测试 UploadCensorPrjInfo 
	320	 1 DepCensorResult
	330  0 DepCensorResult
	490，
	480，是再审的，没问题。
	
	明天测试一下其他系统，能走流程添加的走流程添加一下。
	内容有问题吗？
	
	昨天的全部没了 
	现在重新开始整理测试并提交
	先从昨天的来v
	
	SaveCensorPrjInfo 主体设计
	SaveCensorPrjInfo3
	SaveCensorPrjInfo4 勘察
	反馈时已经添加 
	Q:联合设计单位上报 回复等只用到了参数3 没有用到2
	
	首选我先找到字段
	chengnuodae
	改错了 
	现在修改回来
	002是市政
	330481 是海宁
	330411 是秀洲
	
	施工图联审
	QciWeb
	Mainlogic
	line:5289
	
	 if ( strCountyNum == "330481" && strCensorTypeNum != "002" && striskangzhen != "" )
	SumInfoCountHN
	已经改回去了。
	现在看看还有没有问题
	能不能摇到海宁的
	照理来说应该可以了。
	
	测试；
	房建、市政
	宏诚
	春秋
	其他
	
	摇号逻辑： 海宁，市政全给宏诚
	房建平分
	报3个房建，
	报1个市政
	测试结果，确实是没有找到
	
	有没有感觉自己在写BUG
	等功能稳定下来再清理SumCount字段
	那你应该怎么做？
	
	测试丽水短信（如果是网签的，那么需要等待他那边把存储过程写好，如果是流程的马上就可以上了）
	
	
	红灯 1.2.3
	
	多少页的这个问题处理掉
	
	先处理多少页的问题
	现在返回的是一整个表DataTable
	使用一下查询语句
	先别跟着
	
	-----------------------------
	|
	|
	|
	|
	|
	|
	|
	|

	第几页
	共几页
	共几条记录
	每页多少条
	在其他的做法是在 这个里面筛选
	我现在已经获取了总的行数
	每页显示条数已经OK？
	string strFilter, OK
	string strSort, OK
	int nPageSize, OK
	ref int nPageIndex, 
	ref int nRecordSetCount, OK
	ref int nPageCount OK
	
	记录正确，接下来组首页、上一页、下一页、尾页
	应该可以了
	更新两部分
	左边菜单栏
	申报页面更改
	添加报审项目
	
	小调整只是属于内部的，只需要修改一下，但是和我更过去没有关系
	所以我现在先更
	文件位置不变
	先替换能调通
	
	有点不太对
	找到哪里有问题
	
	找一下相应的表
	*选择重大设计变更 必须选择原项目名称 然后根据原项目名称来确定工程类别是
市政房建  	
	下一步  选择项目名称 单独弹出一个页面，只能查询自己的项目
	 
	 首先，我肯定是需要一个这样的页面的
	 1.新建一个全新的

	 2.从老的copy过来
	 
	 项目名称、勘察单位、设计单位、审查机构、审查类别、项目编号、
		首先找到一个有很多项目的用户名及密码
		把数据库也更新一下
		仿照写一下 check功能
		使用项目编号进行查找v
		HiddenOriginServerPrjNum
		将。。。拉过来，过来了其实是没有
		
		审查机构不要变
	 >>
	 专项 选择原审查机构： 原项目代码，原审查编号，验证，如果对的选择原 审查机构，如果不对的话 重新随机选择审查机构
	 房屋建筑工程设计，专项设计
	 
	 现在我要知道审查机构的全国唯一码是哪一个字段vReport...
	 
	 修改：
	X有图审机构	将不是变更审的项目变成变更审x  没有图审机构
	没有图审机构	将是变更审的项目变成不是变更审 
	没有图审机构 将不是变更审的项目变成变更审 没有图审机构即使选择了变更审
	是重大变更审  却居然没有审查机构
	
	点击重大变更后，所有的信息全部拉过来
	
	多一个点击事件
	
	可以不选择
	手动去选（所有的拉出来自己选）
	全部显示，都让改
	BUG 原项目名没有存进去//存进去的
	现在要实现的是  点击重大变更审，将所有数据还原到页面
	先参见一下修改项目是怎么做到的
	
	现在卡在了哪，卡在了选择原项目后把所有信息还原
	
	首先，如果比较懒的方式，就是使用修改按钮触发的事件来初始化页面
	那么久需要了解修改按钮发生了哪些情况，重新打开了Prj..aspx页面，传入一些初始的参数
	
	如果可以使用，那么我将使用里面的InitData函数
	只要将修改按钮传入的初始参数做一些小的修改就可以了
	然后手动刷新一下页面
		我觉得可以试试
		那么现在的情况是
			我能从上个页面获取到一个SerialNumber
			传到后台，
			然后试试是否能根据这个SerialNumber来初始化一些值
			我要在OriginForm直接取到项目编号的话 ，就是不能使用原来的方法，
		页面的一些参数只能是页面即时
		后台的只能是后台即时
		先加载后台再加载页面
		那么我调用这个函数还不如直接调用MainForm的相关
		搞半天我都不知道点击修改后到底发生了写什么鬼
		直接是通过项目编号来打开的 Response.Redirect("ProjectEditForm.aspx?ID=" + strID);
		我能不能让它调用跳转本身 这个是在后台，
		越走越远
		
		我绕一下，我将序列号传给MainForm，然后重新启动一个PrjEditForm,然后传入进行初始化，然后就想着怎么来修改一下相应的参数就可以了。
		然后怎么修改相应的参数呢
			修改参数，首先我大部分信息都是还原的原来的项目信息，但是在prjnum、重大设计变更等，就换成新的prj
			..........如果
			是属于修改了，但是，在保存的时候，将项目编号弄成空就行了初始化完了以后，
			查看一下传值，有第三个值可以传吗
			
		
		
	PlanB:
	在AjaxAPI里面使用，序列号查询到该项目的PrjNum
	然后根据获取的dt来对其进行渲染
	damn
	我在渲染的时候，不得不注意一下Init的所有相关的值
	
	那么这个是在后台进行的所以必须刷新一下页面
	如果是在前端，那么就不可以使用InitData函数
	
	++如果想在OriginForm获取...我可以使用BtnClick 然后使用后台调用前端的函数
	
	现在使用B计划，在JS里面还原所有数据
	还原的时候参见一下保存的时候需要哪些数据库，然后对其进行还原
	damn，没办法 我就是想要的这种效果
		那么现在我需要先通过prjNum得到这个dt
		只还原我需要修改的就ok了，至于项目编号这些不用管
		
		先看要保存哪些数据
		然后再看怎么获取数据并赋值到相应的控件
	先全部给它弄上去不要的再看
	
	12点之前调试
		因为有了一个赋码校验功能，我这个暂时先放着
		2.不测试了，直到把功能做完直接提交
	饭后完成需求再测试后提交
	
	今天一定要完成
	这是个异步的
	
	我现在到哪了？
		我现在利用这个项目编号刷新了这个页面
		就相当于进入修改这个项目编号对应的项目的页面
		那么现在我让他变成重大设计变更的
		传一些参数，
		然后将其作为重大设计变更的页面调整
	为什么有参的ID  不显示tr21?
	
	
动态监管BUG V 
短信BUG 

loadtype都是对的
刷新的跳页的时候
type为多少

审查结束

一些特征值没有给他换过来
审查编号，状态等

重置一下审查状态
审查编号也重置一下

一连发了三条 短信BUG



1.走一套流程来测试一下对不对V

2.查看一下存储过程

	根据项目大小亮红绿灯（存储过程）


返回参数给SqlDataAdapter
然后da.Fill(dt)
	q1查询的内容跟所选的页面还不太一样
	q2是如何得到红绿灯的
	只有 勘察设计和图审机构两种情况
1.先把工作日算出来
	首先我需要休息日的时间
	需要查找tbHolidayManage
	在Bdate之间与Edate之间的count
	查找Bdate from tbCensorInfo
	查找Edate from tbCensorInfo
	
	大型中型小型
	如果是大型项目 那么时间为10
	中型，7
	小型5
	这个比值，需要先判断项目类型
	两种方法：
	1.尝试查询的时候就没有限制，它是怎么对每个项目进行操作的？
	它是对所有项目进行操作的
	怎么对它们进行区分操作
		ideal:如果满足条件给它加几天怎么样？
	2.分开查询，分开限制，得到三个表合成一个
	将所有项目进行分类
	
		找到项目类型的值PrjLevelNum 321大
		322中
		323小
		201
		202
		203
		
		
		筛选根据类型值项目
		datediff(day,目前时间，接收时间)		clear:
		---------------------------->
		    接收时间             目前时间
			
		过期时间最长的  排序
		分组 排序
	接下来：按过期最长排序
	过期最长
	需要获取过期时间
	过期时间就等于 现在时间-项目的 
	我直接按时间排序行不行 
	反正已经分了大中下型了 
	我直接按项目受理的时间排序
	先受理的 ，肯定就应该在前面
	"2017-330603-47--070482-000"
	124290
	点击修改读取项目的图审机构有没有值
	HiddenOriginReportDepFullCorpCode
	Hidden1004
	Hidden900 Old
	首先将OldReportDepFullCorpCode(null)
	初始化时给了Hidden900
	ReportDepFullCorpCode 给了
	Hidden1004
	
	有两种逻辑，一种是阳哥说修改的时候，初始化时不走摇号、
	第二种是实际它走了摇号，但是得出的图审机构是空的。
	眼见为实，猜想它是在排号规则里面来对控件进行控制，然后来得出对于的审查机构，及能不能选择审查机构
	证实一下自己的猜想
	如果这里是正确的，那么就应该找到dt为空的原因
	答案是错误的
	所以还是：
		1.点击修改的时候，
			显示下一步，然后弹出来的选择审查机构把check框显示出来
			               
			不显示下一步直接显示保存
	先看一下阳哥改的排号是否有这个
	tr1711
	结果是1没有list
	有tr选择图审机构
	两种做法：
		1.让list选中原图审机构
		2.屏蔽掉tr选择图审机构，保存时不改变原图审机构
		第二种比较靠谱
		
		找到tr是哪里放出来的
		checkBox 点击后
动态监管红绿灯的问题
	1.6种类型只被分成了2种（勘察设计、审查机构）
	2.对项目时间的排序v
	0000000000000001 0
clear:
	-->现在卡哪了？  
	现在卡在了得到了一个表 但是这个表的nIndex 项是错的
	也不知道排序是不是正确的 看一下
	
	得到的这个表是按nIndex排的
	但是又是错的
	现在表是正确的，只是没有nIndex 这个列
		尝试着如何为查询结果创建这么一个按column排列的列
	
	1.
	2.
	查询的项目是根据区县(@managelevenum='004') tbUserLoginInfo,tbManageDepartInfo
		过滤：项目规模、图审机构、区县、
		
		筛选在哪
		在存储过程，可能需要传入更多的参数，这样处理比较麻烦
		在程序里面
接下来：完成筛选
	筛选都是在程序里面实现
	1.按大中小型筛选、图审机构、区县
		按大中小型筛选
			那么得更新nIndex才可以
			那么可能就要修改一下存储过程
	有两种方法：
		1.在存储过程里面赋上nIndex 那么就需要多传入一点参数到存储过程
		2.在程序里面给他赋上nIndex
			先看看其他页面是怎么做到的，这个nIndex还有没有其他用处
		在代码里面增加nIndex，
		
		先得到一个datetable
		然后根据大型中型小型过滤
		这个时候得到的 nIndex 已经赋好了
		然后对这个nIndex  取多少到多少条
		这个时候，怎么知道取哪 Row_Number() Over(order by ID)
		查询出来Index
		
		全部，
		过滤
		再过滤
		
		始终都要重新将Index赋值
		所以还不如直接在代码里面赋值
	    
		如果这里赋的话，那么筛选的时候也会有点问题
		如果这样，那么筛选的时候就不能用nIndex来进行筛选了		clear:
-->		// nIndex
		
	那么确定了就是不在存储过程放nIndex
	在程序里面放nIndex
	
	假设我是用的：
		减去nIndex列方式，我先进行筛选，然后对nIndex进行减去
		
	V
	区县
	把这个DropDownList
	首先找到该User所在的市，然后找到该市所有区县，然后填充进把这个DropDownList			
		CityNum
	
	//1.首先在点击搜索的时候，获取到DropDownList2的选择值
	
	------
	1.首先在页面初始化的时候就执行一个  function 让选项值加载上去
	2.点击搜索的时候保存这个值到HiddenValue （在哪执行，后台试试 
	在前端将这个值给了HiddenValue 吧
） 在点击搜索以后检测一下这个值（因为前段和后台不同步执行）
	3.点击搜索后还执行查找，会重刷新页面 根据HiddenValue去刷新
	
		现在只剩hidden.Value的事了
	测试：
	测试什么？
		1：测试筛选的项目时间是否排除了假期
		也就是,图审机构受理时间ReceiveDate,与今天的时间差，排除了什么？只针对受理但是状态。。的项目
		
		
	怎么测试? 
		测试时间差，修改一下项目时间即可
		首先
		大型： 
			红：今天是05 15周二   改为11天前的除去假期就是04号 然后有多少假期？ 2+2+ 
			绿：
			黄：
		中型：
			
		小型：
	datatable    excel   其实的行列值  第一行第一列   开始转
	dateset 
	通过选择多少行   
		
	测试一下
	
	传一个值R18
	然后修改注册表值
	将dwg文件的默认打开方式改为相应的Acad启动项
	
	我肯定要尝试着修改一下这个
	修改哪里的注册表值
	1.路径、怎么去获取这个路径 
	
	路径通过C:\Program Files\AutoCAD 2010\acad.exe
	2.修改注册表值 修改哪一个注册表值
	HKEY_CLASSES_ROOT\AutoCAD.Drawing.18\shell\open\command
	找错值了 修改这个起不到关键作用
	
	低版本的图纸 只是为
	
	我们
	试一下修改为18
		
	修改两个地方
	1.  .dwg
	2. 	xxxx.dawing.相应的改为2010；
	
		
	1.获取.dwg Classe_Root  的值（AutoCad.Drawing.19 ）
	2.找到cad安装路径
	3.找到对应的（AutoCad.Drawing.19 ）路径修改值为cad安装路径
	4.修改curuser / aca curver = 18.0
	如果打开的时候是18 .dwg下面就是18，如果是19就会变成19
	第一次打开后为18的路径
	第二次打开后就变会了19
	//379902038
	//338393754
	curuser / aca curver

	手动改：
	1.修改.dwg 的值（=>AutoCad.Drawing.18 ）
	2.获取路径
	3.修改

NewWorkPlan自动推送字段的
	1.建立住建信息表
	2.建立住建的WebService 
		用这个WebService来对改表插入字段（模仿一下UploadCensorPrj...）
		这个webService是一个单独的项目，可能要copy一下
----------------	
FirstAtAll:I have't much spirit now
	I have mission and it well take me at least two days
	Do U think it's important and hurry? It's not hurry but work always important
	But if I have some other goals on work,it could turn to be hurry.
	goals: quick or Can do 
	In fact, I believe I Can do it,one question is Maybe It's something unknown. So if should I do my best, my goal will be quick
	Ok,solution1: be a fish today(not really fish, just schedule some easy work) ,but tomorrow do it hard and complete it！ Can I?of course I can
	
	Plan 1:
--------------------------	
	先试着建一个
	先不要管验证的问题
	能推送信息先
	先能让服务可以往数据库里面插入数据
-----------------
take ur time, and think about it
	first at all, Do u want her back?
	I don't know, I think I'm not too care
	why?
	first back or not back ?
	if back :Will we just like past ,It's no help,so we should solve the problem,figure it out ,and commit a solution.
		the problems:
		1.long-distance(share less time)
		2.future/we won't get marry in resently of years
		3.future/we didn't not have coincide the day in the future
		4.
	else if not back: find a new one, and inestimable hard or easy.
	but after all I will not get marry in recently of years.And just will test several times for new relationship and when arrive a age then get marry
	otherwise, maybe it will meet the same problems.
	
	It's tend to be right
	but we should defence before it's coming 
	what should we do to defence this 
	passion we should
	romance we should
------------------
	先把对应字段查找到
	合格数标识GUID
	项目赋码
	
	资质等级 tbCensorShipTitleLevelDic.CensorShipTitleLevelName、
	tbCenSorShipBasicInfo.CensorShipTitleLevelNum = tbCensorShipTitleLevelDic.CensorShipTitleLevelNum
	
	设计单位资质证书编号
	审查阶段 censorstate
	审查阶段-审查报告：tbCensorInfo  iscensorreport=1
	
	项目赋码：reviewNum
	
	找到消防合格书表
	tbCertInfo
	
	再写一个函数
	这个函数是提供ServerPrjNum 
	然后根据这个ServerPrjNum 把这个文件通过字节流传出去
	看一下他在在哪下载或者上次这个文件的
	
	首先是pdf -> byte[] -> xml(string)
	
	上传合格书的流程
	pdf -> 服务器pdf
	数据库只存入了路径
	需求里面是数据库LongBlob/
	GUID 这个是可以通过
	
	一个Prj有多个合格书，然后目前的合格书是哪个合格书？
	怎么得到这个合格书的类型
	
	我输出的是一个PrjInfo
	我需要在哪里去区分合格书？
	
	

接下来：
		1.继续完成新的任务 I&H
			你知道怎么做吗？
			大部分知道
			如果想休息就休息一下吧
			那么从下班起，就不要再去想这个问题了
			好好休息一下。
			那么什么时候完成这个呢？
			先想想最晚的完成时间
			周二？周二有点危险最迟不过周二
			那如果我想提前完成呢，如果我状态好，我周一早上就给它做完。9点到12点半
			高效的工作效率。周末玩得开心。
		  
		2.研究一下cad的设置.dwg文件默认打开方式 I&Not H
	公司才不会给你慢慢研究的机会
	公司只看你办事的效率
	快速地完成任务是最重要的
	所以，首先快速完成
	Hampton5
	
reviewNum
2017-330683-13-03-053585-000
ServerPrjNum


	合格书，有一个标识
	
	调用第一个函数的身份是  住建、消防、气象部门？
	分析一下：
	调用的时候，不区分  反正我传入一个，然后就返回一个xml
	
	所以这个时候，就没有GUID的区分
	
	如果要区分，那么我得返回3个类型的XML
	
	如果是我设计‘那么传入的时候不需要区分，然后返回的时候，返回3个xml,
	每个XML有不同的 GUID，但是我BOOK标签下的是相同的
	所有暂时不用GUID
	
	那目前的目标是，传入赋码，返回一个XML，V
	如果是以文档为大
	那么就是 不需要传入
	
	如果需要区分的话，
	那么就是通过 消防、人防、防雷 来区分并生成三个不同GUID的XML文档	
	
	先不要管了-
	做第二个函数
		传入项目赋码，合格书类型，返回一个字节流
		
		首先通过项目赋码查找到项目名称，然后根据Type查找到项目对应的合格书路径，然后将该路径下的.pdf 转为字节流输出
		
		看一下他在其他地方是怎么上传下载的
		
		设计单位上传材料的时候是PDF的
	E:\\GenPdf-生成合格书pdfpdf\\20180309\\f15eba64-fc90-4eae-8457-e39d62b6de8c.pdf
	
>两个函数基本实现了
	现在开始完善：
	函数1：获取xml文件这个
	：
	项目标识
	项目子码
	项目概况
	ENTITYTYPE 暂时都为1
	CENSORSTAGE 暂时都为“审查报告”
	法人身份证号
	SYNC_TYPE 生成类型 暂时都为“0”（0审核，1备案）
	
	计算机\HKEY_CLASSES_ROOT\.dwg
	计算机\HKEY_CLASSES_ROOT\AutoCAD.Drawing.18\shell\open\command
	计算机\HKEY_CLASSES_ROOT\AutoCAD.Drawing.19\shell\open\command
	计算机\HKEY_CURRENT_USER\Software\Autodesk\AutoCAD
	D:\ACAD2010\acad.exe
	研究一下：
	修改了3个值：
	1..dwg
	2.AutoCad.Drawing.18
	3.
	为什么我修改了
	手动修改了，三个值，但还是错误的
	那么我不改.dwg  只修改AutoCad.Drawing.19和AutoCAD试试
	不行
...
>	那我那天是怎么搞的
	根本不记得还没用了嘛
	
	还是不行
	
	设置以后有刷新桌面图标
	而且设置 后open-command的值，无效果。
	修改后仍旧为Launcher  但是却使用了默认 注册表有自动修改为18
	所以我猜测这个是Launcher 
	看看这个Launcher 
	Launcher是一个启动器
>	V

	熟悉一下远端服务器  堡垒机
	然后想想该怎么去部署
	现在远端被 别人用着在
	
	搞清楚字段的含义
	这个和我想要的表不太一样
	
	以终为始： 那么我想要做什么?
	我想在堡垒机上插入一些数据
	就像他提供给我的数据
	这个数据从哪来？ 
	我写了一个InterfaceServer 
	在堡垒机上获取该服务并调用获取相应的数据
	然后插入堡垒机的数据库
	那么堡垒机上面讲运行我的测试代码
	
	现在的问题，他想要什么数据，一个表
	这个堡垒机和住建、消防、人防又是什么关系
	谁来使用这个堡垒机?
	里面有什么？ 有协议有表有数据
	我们提供数据，他们获取数据
	-·如果是这样的话，那么我就不但需要写一个提供xml文件，字节流的服务器函数，我还需要提供一个可以将我所写的xml文件，字节流 储存到堡垒机上的功能。该功能是在堡垒机上实现，然后调用服务器函数获取xml文件、字节流，然后将这个xml文件翻译，并保存到堡垒机上的Oracle数据库的Share表里面。那么我的任务就完成了？  
	目前有一个问题就是这个xml需要保持哪些信息。
	
	>Fun
	已经有了这个系统，我需要做的只是要多加一个功能，在没有源码的情况下，怎么去完成这个自动标旗的功能？
	先看看是否可以在别人的网站写一个插件
	
	使用网络爬虫，爬到这些数据后，使用这些数据来调用自己的函数
	
	http://39.108.219.2/am4_go_ahead/customer_service/getCustomerServiceInfo.html
	
	kf小大大
	
	xdd123
	
	要做的是	
	系统登录的这个商家，是什么商家，好像是有很多淘宝店的商家，然后，他发一个其中一个店铺的链接给你，你登录了自己（正真的淘宝店主？）的，是把你的权授给了，这个店铺管理助手，然后，助手就可以来修改你的订单，标旗
	看一下调用tb的API 需要哪些参数
	现在需要一个商家的账号，才可以申请创建项目
	
	F>
	现在看一下嘉兴短信的
	他提供了一些API，根据这个API传入参数并发送短信
		参数需要网关地址、账号密码等东西(这些东西固定的就给他封装到dll里面)
		然后调用后即可实现发送短信
	那么现在我要做的是：
	1.知道网关等固定的参数
	2.将对API的调用模仿阳哥，对其进行操作并进行封装成dll
	然后在自己的服务器进行调用
	我要是今天就把这个dll做好，我就可以成神了虽然有点夸张
	
	我得先走得通并试着发一条短信
	>ex:需要知道COM还是dll
	dll是动态链接库、而com是一种协议
	
	这个自己有库，
	1.这个是需要先创建一个数据库吗 假设这个数据库是已经创建好了的
2.数据库在哪？ 端口在哪
现在就是一个数据库的问题了
那么说，这个公网的ip，

如果全是我们的
	那先查看一下有些什么东西吧
	如果我知道这个数据库，知道端口号，那么我就只需要把端口号用到，然后使用dll来获取就可以了，
	我觉得这个端口，是他们提供的
	只要有这个端口，我就可以调用dll发送短信
	我管你那么多数据库什么的
	那么说，我不但要封装你的API，我还要自己设置发送短信的，damn

	我现在已经获取到了
	那么接下来我要做两件事：
	1.上服务器测试一下，用什么测试?  demo测试
		现在测试一下，怎么才能发出第一条短信
		用demo和程序试试
		现在还是同样的问题，
		卡在了还不能发送短信这
		不是在数据服务器，
		而是在接口服务器
		对的，我是在接口服务器上的
		但是运行demo行不通，等他回复吧
		
	2.在本地开始撰写代码，封装发送短信的API
		我先把逻辑写全，然后
		我的逻辑需要参考一下demo吗?
		假设不参考，那么我就得直接上服务器上进行测试了
		反正最终的测试都是在服务器
		我现在还不如先把逻辑什么的写好好了
	那么现在先把逻辑写好
	封装一下
	
	-->ip通了，现在只需要把我的程序布上去测试一下应该就可以了
	
>丽水市短息：
	问题4. 短信提醒功能不完善，许多关键节点的工作完成后，不能及时提醒后续岗位相关人员，影响审查流程运行效率。
	解决办法：此条为图审机构的范工提出的问题，需与其他图审协调好，再行通知我们。
各地市的短信归总：
	<NealIdeal>
		现在我们系统以及能够发送短信
		接下来是完善短信内容
		既然设计到短信内容
		1.我们已经有了流程监管的这个东西，那么我们就可以使用这个
		然后在数据库里面插入数据就可以了
			code端：现在需要清除原来的短信发送，
			把他放在流程里面，所有的地市都将进行更新
			所有的地市
			然后存储过程端
			如果对短信内容也要更新
			那么每个地市必定得写一份触发过程
			这个工作很烦琐，但是问题不大
	<EndIdeal>
	
要什么架构，能按需求完成就是最好的。
	架构只是其次
	
丽水短信的：
	在提交评论的时候，向主审人发送短信
	首先要搞情况这个存储过程
	在这个存储过程里向另一个数据库的tbhphoneMessage插入一行数据
	直接插入就好了
	
	现在需要的是 模板，实际的参数
	主审人的电话，项目名称好说
	在哪找? tbcensor
	
	我有些什么?  我要找什么
	反正我都要找他的，先看看能不能通过啥来获取一下
	
	有些什么表？
	S库的 tbcensorinfo 
		tbcensorprjinfo 项目名、等信息
		
	Q库
		//tbcensorprjinfo
		tbCensorShipUserInfo   主审人电话
		
		tbHphoneMessage
	
	是怎么链接的
	我现在有参数
	S库： 
	@prjid int,--项目主键
	@stagename varchar(20), --阶段
	@specname varchar(20),--专业
	@rolename varchar(20),--角色
	@userid varchar(20),--人员id
	@username varchar(20),--人员姓名
	@CensorResultName varchar(50),--审查结论
	@CensorIdea varchar(max)--审查意见
	
	S库userid怎么找到Q库tbCensorShipUserInfo？
	
	userid?
	主审人怎么找，那我只根据id来查找好了
	
	我现在要做什么？
	要发短信
	节点知道吗，知道
	谁发的知道吗？知道
	*身份知道吗？不知道
	*电话知道吗？知道
	*项目名称？知道
	*审查阶段?知道
	谁是主审人、谁是额外的？
	在哪找？
	是图审机构受理之后再添加的
	添加了审查人员
	那么有可能在项目主表就有
	还有就是在审查表有
	不可能放在人员表
	很大可能是在审查表
	区没有区分主审人
	肯定是区分了的 userName?
	
	看一下字段
	根据项目编号
	ServerCensorBigNum tbCensorInfo 的ServerPrjNum
	 ServerSpecCensorInfoNum,ServerCensorBigNum,SpecName,ExamUserNum,ExamUserName,UserNum,UserName from tbSpecCensorInfo where ServerCensorBigNum in(select ServerCensorBigNum from tbCensorInfo where ServerPrjNum={0}
	
	今天下午一定要完成
	***报审的设审号为********的***工程，***专业的审查结论已提交，审查人：***
	
	建设单位名称
	设审号
	工程名
	专业名
	审查人
	
	现在开始怎么做?
	首先我已经有了插入短信的节点
	那么下面要完成的就是插入短信的内容了
	短信的内容包括：该项目的名称、建设单位名称、设审号、专业名、审查人、主审人
	
	那么现在就依次地查找到这些字段就可以了
		（@prjid到底是不是serverprjnum）
		tbCensorInfo a  where a.PrjID=@prjid
		是
	尝试着把他们串联起来
	
	首先，我有 审查项目号 
	可以查到 项目名、建设单位名、设审号  
	
	专业名、v
	审查人、v@username
	主审人、
	审查结论@CensorResultName
	
	都可以查到，现在是怎么查的问题。一个一个的来
	
	再做一个判端，就是主审人本身对其添加
	
clear:
	3200 130
	000  320 +96  416000
-->任务进度：
	1.嘉兴短信的，卡在了我们出口的Ip地址在变化，实际是否是这样我不知道，但是如果是那么得联系服务器管理让出口Ip固定。
	
	2.嘉兴对接。对于消防、人防....等    目前卡在了下一步应该做什么
	如果是按照阳哥给的口述需求，那么下一步就应该在堡垒机端放一个从服务获取文档的信息然后加入到oracle数据库里面。
	
	relax
-->
	接口服务器
	留着两个函数，填充一下
	然后再完善一下字段
	
	这样，先自己设计，如果使用的时候有问题我再修改
	先填充上去吧
	
	现在，好像发送出去了。
	但是有问题: 
	1.主审人自己的审查、发送给了自己
	现在做一个判定，来排除自己短信发送给自己 
	
	2.只发送一条怎么连续发送了两条
	
	然后问一下这些值是不是都是对的
	
	可以自己上库查一下
	
	我需要复制这个数据库吗
	如果我只是需要查询一下结果，应该不用
	
	那么现在我来校正一下短信内容
	
	先校正的是，主审人自己的提交不用发送短信
	
	2.现在找到为什么会连续发两条信息
	在哪执行了两次？
	1.在他代码段
		
	2.在我的存储过程
		：如果是查询的时候查询出两个号码，现在只需要查询top 1应该就可以解决了
	万能解决方案，判断短信发送是否有重复
但是这个重复.... 有可能有判断风险比较困难
	
	查看一下发送内容对不对
	
	设审号 tbcensorprjinfo PrjCode 

	
>发送短信的功能仍需完善，现在发送内容应该没有问题
>	userId 为空
	执行了两次
	有可能的原因是 审查人、审定人
>V

>>Ideal:关于一个字段存多个联系人
	一条内容发多个联系人的解决方案
	
	首先，发送短信的存储过程
	联系人里面用 逗号 隔断多个联系人电话
	我查询的时候查询出来用多个逗号隔断的联系人电话列表  直接插入到表，然后在取出来处理的时候再对号码进行处理
	一一发送短信
<< Good Ideal!
	下面的任务：
	1.关于嘉兴短信的，已经实现了。等待固定ip地址
	2.关于嘉兴堡垒机的。
--
	我现在有出现Bug了
	solved

	
<嘉兴短信>
-->嘉兴短信，给我联系人列表就给他更掉
	
	最麻烦的话，会被要求修改
	
	如果我修改的话，那么我怎么修改？
</>
clear:<-->	温州市住建委审升级改造>	部门受理时限 1 工作日		图审机构受理时限 1 工作日	一审时限7工作日（或者受理+一审合计8工作日） 受理当天算不算	复审 3 工作日。		不分大中小		1.是属于动态监管的	然后亮灯的问题		时限：	1.部门受理时限1个工作日，如果超出工作日，显示红灯	2.如果	</>
<-->温州亮灯问题，有点麻烦。>

	首先不分大中小
	所以我要把大中小取消掉，
	这样的话我还要修改动态监管页面
	
	目前我只考虑修改储存过程的
	
	所以大中小我留着无所谓
	 但是实现我都改成7天，并且
	 对审查阶段进行筛选
	 
	 理解一下需求
	 不区分大中小（可以解决）
	 受理时限（涉及到筛选，能实现）
	 受理+审图 （实现）
	 我现在要做的是 理解客户的需求，站在客户的角度去看，他想要什么效果
		1.首先，他们是通过我们的动态监管模块
		这个模块能不变的尽量不变
		2.我怎么知道窗口受理时间 来得到时限			
		我怎么知道受理时间  来得到时限
		看一下系统先		
		-->
		勘察设计成果初次上报情况
		图审机构初审受理情况
		
		图审机构初审审查情况
		
		这个是问题是一个大的模块 更新的问题。
		最好的更新是在代码端进行筛选
		
		如果想做温州的修改，
		那么只能在存储过程做一些修改
		
		现在修改实现全部是.. 
		查看一下存储过程，查看一下有些什么限制，应该是查询了所有的项目
		如果我要筛选，在存储过程也是可以进行筛选的
		实际上本来就进行过一次筛选
		了解需求
		
		主要筛选条件：
		一个是受理
		
		住建窗口的受理
		图审机构的受理
		
		假设我已经进行了筛选，那么在动态监管页面怎么去展示给用户看
		所以我肯定还是需要修改一下页面的东西？
		如果涉及到页面的东西
		我可以先把思路整理出来
		那么在做的时候思路清晰就可以很快完成
		
		clear:
		我觉得应该多了解一下其他项目的相关信息
		M&Z 看一看他们做了些什么
		然后试着理解一下？
		或者看一下他们写的代码
		摸清楚他们能力，向他们学习
		
		Y他们小组，查看并理解一下他们的工作内容，模块
		查看一下CAD二次开发的。电子审图
		
		现在我只需要在发送短信的小工具上进行一下修改就可以了
		判断
		图审机构
		很好，现在可以发送短信并且不会影响以前短信
		但是仍旧一些需要处理的问题：
		1.查看一下日志，有很多手机号错误的、或者有可能非手机号错误发送的短信 会出现问题。
		影响：
			1.log，程序会一直重复发送
			2.短信接收人收不到短信、这是他们自己在填写的时候就这样，they deserved it。
		所以接下来：
			在相对较闲的时候，上绍兴的服务器查看一下未发送的短信都是怎么回事。
			999的返回值，不知道是什么鬼，但是好像没有太多的影响。
			
		2.
	forget about that！
	-->现在返回的字符串显示是 移动全网通网络短信机:发送成功！
		但是实际上并没有接收到
1.嘉兴短信想多添加一个联系人
2.查找一下字段，看看杭州的节点哪些需要添加上去
</>

<湖州短信>

	查看一下编码
	
	然后转成gb2312试试
	

	首先成功的实例：
		1.我使用了IE浏览器，然后输入的是 UTF-8 URL 
		这个编码到底自己转换了没有？
		 我去掉了%%号
		 在url栏
		 （要不我将内容加上%%试试）
		
		我有成功的案例
		就是使用了IE浏览器，然后输入了中文字符，没有加上%%
		IE浏览器默认传送的url 是 UTF-8
		所以我这边测试的时候
		使用 UTF-8 参数完全仿照成功的案例
		
		
		解析一下
		然后用HttpWebRequest翻译
		
		一步一步来，返回什么不重要，重要的是
		1.发出去短信
		2.短信内容正确
		3.返回值正确
		
		1.能发出去短信V
		2.内容错误
		怎么让发送的内容正确？
		我先加一个百分号试一下（没有任何变化，所以对内容并没有什么影响）
		我设置了charset = UTF-8 和
		结果是UTF-8的没有错
		
		如果我发送的 没有修改的 gb2312的
		格式错误
		如果是UTF8，我也不能接受到短信
		
		和成功案例比对
		
		现在有一个查验方法，就是查验一下他那边接受到的 内容是什么，编码是什么？  如果是他们的编码有问题？（不太可能，因为我这边成功的案例）
		所以我现在的是  代码端和EI的内容并不相同
		
		我现在已经尝试着了让EI
		
		那么证明尝试不成功，那么我就让项目生成的时候，改成UTF-8编码
		
		如果他们查验后得到的短信内容是正确的
		那么就可能是他们发送短信端内容有点问题
		如果传入的短信内容是错误的，那么就是我们这边的 使用的httpRepost有点问题。
		
		现在试一下，传入的参数尾数改为2试试
</>
<杭州节点问题>
---->

		1.把表从sqlserver导入mySql
		2.还有存储过程
		杭州服务是一个单独的服务
		qmi
		提供给蒋脚本，执行语句
		
		单独webServer MySql 
		EI记录的点 杭州的有些没有记录下来
		所以现在 需要的是把这几个点添加上去
		存储过程改上去
	    字典表，步骤的记录表
		存储过程
		
	首先找到这些表V
	然后导入到mySql
	并对存储过程做一点小的修改
	
	要不要先下个mySQL试试
	
	和标准版的对一下，看差哪些节点，给他补上去
	我现在已经有了mysql的表极其信息
	然后下面对照一下字典表
	对照一下节点，然后对照一下CODE
	easy 
	函数没有这几个表
	那么
	1.我首先要导入这几个表
	2.
	mysql里面，确实没有这个函数，那么就加上这个函数
	
	
	ccir_adddesigncorpprogress
	tbcensorinfo
	tbcensorprjinfo
	eca_tbcensornoderecordinfo
	
	两个表已经过来了 ，就差存储过程了
	存储过程已经搞好
	
	The user specified as a definer ('root'@'%') does not exist
	走通了
	clear:
	2018-330783-70-03-025601-000
	</>
<金华库  重大设计变更>->	
...	AjaxAPI.GetProjectInfoBySerialNumber
->clear:
</>
<m嘉兴短信联系人修改问题> 
---->
	他那边发不出去短信
	应该是他那边的问题
	目前只能发送浙江移动的电话号码
->clear:
</m>
	clear:
	clear:
	clear:
	clear:
	clear:
	clear:
-->山琳哥说过一个是关于 给住建部门发送短信的
	可不可以做？
	of course 可以
	1.看看这个给住建发送短信的需求
		主要是看看这些需求，是否是已经在了节点里面
		如果有我只需要改一下存储过程就可以了，不然我得改代码，改代码是做的一些无用功，因为后面会进行改革，短信依赖节点而不是自己的代码
	2.看了需求后再给阳哥决定要不要做
	
	2153737122 集团云mas 接口 跟对
	建管 
clear:
clear:
-->丽水市摇号规则
	
	改为住建受理后摇号
	查看一下控制的在哪
	找到控制后修改就可以了
	
	现在是受理之后摇号，
	主要的问题是，勘察设计有没有进行上报后
	现在是勘察设计没有进行上报后
	主管部门受理之后就自动摇号了
	
	现在是什么问题？
		果然是山琳哥描述的那样
	要修改成什么?
		窗口在受理的时候就进行一下判断
	do：
	1.那么要不要展现出来？
		目前在图审机构未受理页面，可以查询到，但是在受理的列表里面没有
	那么我在窗口受理的时候就进行一下判断
	找到两个地方
	where图审受理V和V住建受理
	
	这个不予受理的判断放在哪比较好?
	1.不显示 
	2.直接点受理的时候提示
	3.保存的时候进行提示
	
	提示内容是什么
	
	最合理的是在点击受理的时候进行提示
	
	那么我只需要修改一下 加一个中继
	
	然后进行判断后提示就可以了
	
	应该是在绑定数据的时候就查询了的
	没有补报信息的直接不显示在受理页面表里面
	
	现在我要怎么做？
		在点击受理的时候进行判断，如果直接判断得出该项目勘察设计没有上报，直接受理失败。
		
		在开会之前完成！
clear:
-->丽水开会纪要
	只完成了第一个，阳哥安排的
	修改了一下住建受理
    然后接下来看一下其他的，我能做些什么？
	>首先里面有提到短信的，说短信的发送节点不全
	这个可以解决
	两种解决方法：
		1.只给丽水做一个，这个因为只能修改储存过程，所以说只能实现住建，接收短信，现在住建受理已经改成了，勘察设计全部上报才可以受理，所以说上报就开始发送短信可能不是最好的节点触发时间。  最好的触发节点应该是最后个勘察设计都上报的时候，所以要进行判断是不是最后一个
		2.给所有都做一个，这个就不单是修改存储过程了。包括代码端
	目前是将滞后到了所有地市统一，避免做无所谓的工作。短信后面统一有一个大改，可能更加依赖于动态监管的节点。当然这样也是最好的了。
	所以buket
	>然后 看一起丽水的其他情况
	自己觉得能做的有哪些
	
	clear:
	
-->短信工具	1.现在布置任务了，网签短信的	尽快完成	然后在丽水上面测试一下。		1.磨刀不误砍柴功，先优化		2.先看一下网签有没有短信相关的信息插入的？		我记得上次是，卡在了插入短信到数据库里面。				2.优化短信工具。		短信log文件怎么清理？		1.在页面收集到足够多的字段后再生成一个log文件		2.定期或者定条清除，肯定最好的是在短信工具里面就给他清除掉			定期还是定条好？			定期吧。			首先获取现在的时间，然后检查一下文件的创建时间？ 			然后超过时间的就把它给清除掉	如果我只是把它停掉，这确实解决了问题，但是就足以证明你开始变懒了。		如果你还热爱你的工作你应该是想着优化。		但是另一个方面，奥卡姆剃刀理论，感觉log日志好像不太重要。		况且每0.5秒生成一次有点过于冗余				那么这样，我先停掉。		然后将精力花在其他的环节上面怎么样? 这样既符合阿卡姆剃刀理论，而且能让我继续热爱我的工作。				居然做，就想着把它做好吧，虽然没人关心这玩意。			所以我现在到底要怎么做？	无愧于心		想一想最理想的短信日志是怎么保存的？	1.我要有日志	2.我要求满了多少条信息再保存一次，然后清空继续积累。		这里没有	3.我要定期清理日志	4.
	一天一个Log。	试试能不能用一下我的这个类？	试着用一下的话，那么保存的时候还要不要 1000？可以要啊 不冲突		clear: 也没有关系，用起来很简单的		-->温州的整理一下发阳哥看看。			...	clear:	-->金华短信	三个地市都测试不通，无法发送短信		..	clear:	-->温州市，上报后就有这个BeginDate	update tbCensorPrjInfo set BeginDate=(getdate()) where CensorStateNum='012' and ServerPrjNum in({0}) and BeginDate is null", strPrjLists);//当项目状态为：项目报审、已委托的时候 才将项目状态更新为已接收的状态		就是给他置了一个BeginDate的原因，		看一下除了这个BeginDate还有没有其他状态值可以参考的	感觉没有，唯一有的就只有一个BeginDate			那么我要修改吗？	如果要修改，那么怎么改？		先看看其他地市是怎么搞的，其他地市有没有 这个删除按钮？	那关键是，别人是业主自选（自己委托）的 图审机构吗？	其他地市是自选的，看有没有这个删除按钮。		都给放出，然后选择		摇号摇出来进行选择：舟山、绍兴、义乌、金华。	测试绍兴的话，要copy一下绍兴的最新库可能		想想，他如果只是想要修改一下这个有没有删除按钮的问题。	关键是这里面可能牵扯到，主管部门没有受理，图审机构就可以受理的这个情况。	请问这个情况解决了没有？	如果没有，那么就去解决一下	如果已经解决了，看看他是怎么解决的，按照相同的方式去解决。	测试一下，就是图审新报一个项目，住建没有受理，试试图审是否可以受理		是否集中受理 0 	如果不是1 	就执行.... update		地方是真正地找到了，那么现在理清一下逻辑是哪里错误的。然后进行修改。		其他的visible 是依赖这个图审机构的。	有了这个，所以就不会显示受理...什么的按钮，只有一个删除。。	这里逻辑有点问题。		我如果是自选的、那么就在项目立项的时候就有了图审机构的	(ReportDepFullCorpCode)	上报调用EiClientService的时候	 if (strReportDepFullCorpCode != "" && (strCensorStateNum == "001" || strCensorStateNum == "002"))	{	CensorStateNum 010（住建受理）		BeginDate DateNow（时间）}	然后在网页端	1.住建显示受理	2.删除按钮显示不出来（受理了不显示删除按钮）		我要怎么去修改？	先整理一下逻辑吧		我已经选择了图审机构，我到底还要不要住建的受理	要	那我这种项目还能不能删除？  	删除、受理、不予受理		调用的时候，多一个判断，		这里，已经找到了问题所在。		下面就是实际进行修改。还有点麻烦。	也还好，可能只是让判断做得更准确一些就好了。	wait to do...	开始解决吧		自主选号的特征、有没有可以区分自主选择的字段？	怎么找到这个特征值，可能有的话也是在ProjectEditForm	所以没有	自主选号还有些什么特征		自主选号和其他地市一样，都是事先记录了选择的图审机构		1.地市、只是温州	2.我应该没有受理日期	3.我应该没有受理状态	4.有记录图审机构	.如果是温州、有记录的图审机构，但是没有受理日期、没有受理状态	就是这个特征		这是个修复，那就不要管其他的，大胆地做		现在流程基本通了，还有一点小问题就是一个显示的问题。		显示成功。	clear:	-->杭州节点表	杭州有一些字段没有信息 ,目前的5个已经有了信息。	看看其他信息是怎么搞的。	还有一个字段信息是在图审系统里面完成的。所以先不管。	clear:		-->绍兴短信已经有一段时间没有服务了。	报错3302	看一下日志，是怎么情况找一下。	冗余数据造成的，所以我这边进行一下冗余数据的判断处理。	clear:	-->关于短信优化	把短信优化一下吧。（丽水v、温州V）衢州V、台州(V)、绍兴(V)、嘉兴V、湖州(V)  ..	clear:-->丽水需求	问题20	要不要加筛选？	加，肯定是要加的			假设我是主管部门，我需要在哪些页面添加一个图审机构的筛选	1.首先，哪些地方的表格有图审机构？		项目受理：主管部门受理之后才会产生图审机构					所以项目在来的时候没有图审机构，					有问题，你是哪个图审机构的？					然后筛选一下					这个东西肯定不是必要的					算了给他加上了				项目审查备案:		项目查询：那么就是在主管部门查询的时候需要		项目信息变更：								就丽水的还是其他地市的也需要修改？		页布局怎么布		筛选的时候是填充筛选还是搜索关键字来筛选？		填充筛选:		关键字搜索筛选:					用什么来区分全部和图审机构为空的情况？							所以我要搞清楚，为什么图审机构会需要这个功能	全给他填上？	还是	而且审查机构还有空的，这个怎么处理？	最好还是给一个填充列表	然后根据列表的值来确定									2.我为什么要添加这个筛选		首先我要受理过后才会有这个图审机构		所以我受理窗口可能不是需要这个筛选		我是在项目查询里面或者其他的可能需要		我受理了这个项目，但是我需要知道一些这个项目的信息，然后根据图审机构来			我先就在项目查询里面搞一个试试	反正只是一个筛选，所有地市都是可以使用的	，那就无所谓了，其他地市还是先不要这样搞好了。		模块化的问题。		我不能将这么一个小的东西模块化。	找一下地市的限制我怎么实现的？		tbCenSorShipBasicInfo.CenSorShipName 		我可以在加载的时候让他显现出来。	然后在后台进行判断，		可以使用textBox 		可以直接在cs里面进行区别地市		要不先仿照其他的在这个		也可以使用下拉列表		这个估计得写一个ajax了			false 在加载的时候判断地市，后取true	做一下限制	这个是 331100 丽水市的					clear:	-->温州的qmi sys	webservice	拷一下温州的service	clear:	-->现在我先把验证锁的集成进新版上报工具	验证锁，	首先加载的时候调用函数获取锁号，然后在点击登录的时候进行查询数据库 用户表来验证		那么现在我需要：	1.先把验证锁的copy过来	2.复制数据库，然后查询并验证锁。	看一下他的login是怎么实现的，查询相应的表就可以了		查看一下他的类是怎么使用比较好		现在已经把登录的验证简单实现了，下面看看到底为什么读不出来这个锁号	有可能是驱动的问题吗？  		首先我驱动，在使用其他软件的时候是可以的		那么我尝试一下编译出来 在其他地方使用一下试试			还是vs的问题？ 	是验证锁的dll不全导致的	easy	提交代码，把原来的小写名字改一下。	clear:	-->添加单体信息人防信息	  @subprjguid        varchar(50),  @rfguid          varchar(50),   				    @designcorpcode      varchar(30),    @FHNumber        varchar(100),    @WarAction        varchar(100),    @FHLevelName      varchar(100),    @OutNumber        int,    @BuildArea        float,    @SYAra          float,    @YBPerson        int,    @RFType          varchar(100),    @GenralRole        varchar(100),    @RFArea          float,    @RFWarRole        varchar(100)		点击添加的时候	指向单体的guid		ColumnRFGuid 	ColumnRFNUM 	Columnsubprjnum   X	ColumnFHNumber	ColumnWarAction	ColumnFHlevel	Columncrknumber	ColumnBuildArea	ColumnSYarea	ColumnRFType	ColumnYBPerson	ColumnGenralRole	ColumnJgRFArea	ColumnJGWarRole
	rowguid	RFNum	PrjNum	SubPrjNum	FHNumber	WarAction	FHLevelName	OutNumber	BuildArea	SYAra	RFType	YBPerson	GenralRole	RFArea	RFWarRole		txtboxupbuildarea	txtboxdownbuildarea	txtboxbuildheight	txtboxupfloorsnum	txtboxdownfloorsnum	txtboxwmjiegou	cmbbuildgrade	cmbboxhangye	cmbboxspec	cmbboxlvjianstargrade	txtboxbuildguimo	txtboxguimochanshu	cmbboxupnaihuograde	cmbboxdownnaihuograde	txtboxXFzhandiarea	txtboxXFheight	chkyiranyibaocangsuo	chkboxyouku	chkboxqiku	chkboxdanyaoku	chkboxminbaocangku	chkboxhuaxuepinchangku	chkboxjingdiansheshi	chkboxkuangshansheshi	chkboxqitasheshi	chkboxshiyongbuild	chkboxleidianbzgfprj	chkboxlunzhengprj		 m_strSubPrjName = txtboxsubprjname.Text;            m_dUpArea = Convert.ToDouble(txtboxupbuildarea.Text);            m_dDownArea = Convert.ToDouble(txtboxdownbuildarea.Text);            m_dBuildHeight = Convert.ToDouble(txtboxbuildheight.Text);            m_nUpFloors = Convert.ToInt16(txtboxupfloorsnum.Text);           		   m_nDownFloors = Convert.ToInt16(txtboxdownfloorsnum.Text);            m_strWmStuct = txtboxwmjiegou.Text;            m_strBuildGrade = cmbbuildgrade.Text;            m_strLvBuildStarLevel = cmbboxlvjianstargrade.Text;            m_strPrjGuiMo = txtboxbuildguimo.Text;            			m_strPrjTecParam = txtboxguimochanshu.Text;            m_strUpFireGrade = cmbboxupnaihuograde.Text;            m_strDownFireGrade = cmbboxdownnaihuograde.Text;            m_dXFZanArea = Convert.ToDouble(txtboxXFzhandiarea.Text);            m_dXFHeight = Convert.ToDouble(txtboxXFheight.Text);								m_strFhNum = txtboxfhnum.Text;              //防护单元编号            m_strRfType = cmbboxrftype.Text;            //防护类型            m_dBuildArea = Convert.ToDouble(txtboxbuildarea.Text);      //建筑面积            m_dSYArea = Convert.ToDouble(txtboxshiyongarea.Text);       //使用面积            m_nYBRenNum = Convert.ToInt16(txtboxybrenshu.Text);         //掩蔽人数            m_nCRKouNum = Convert.ToInt16(txtboxchurukoucount.Text);    //出入口数量            m_strPSYongtu = txtboxpingshiyongtu.Text;                   //平时用途            if (!string.IsNullOrEmpty(txtboxjiangurenfang.Text))            {                m_dJgRFArea = Convert.ToDouble(txtboxjiangurenfang.Text);//兼顾人防面积            }            m_strJgRFWarYongTu = cmbboxjiangurenfang.Text;              //兼顾战时用途            //m_strHwGrade = cmbboxhewugrade.Text;                        //核武等级            //m_strHwGrade = cmbboxchangguigrade.Text;                   //常规武器等级            m_strFhGrade = cmbboxfanghugrade.Text;                     //防护等级            if (chkboxonedeng.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "一等人员掩蔽部";                }                else                {                    m_strWarFunction = string.Format("{0}、一等人员掩蔽部", m_strWarFunction);                }            }            if (chkboxerdeng.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "二等人员掩蔽部";                }                else                {                    m_strWarFunction = string.Format("{0}、二等人员掩蔽部", m_strWarFunction);                }            }            if (chkboxyidong.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "移动柴油电站";                }                else                {                    m_strWarFunction = string.Format("{0}、移动柴油电站", m_strWarFunction);                }            }            if (chkboxyiliaojiuhu.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "医疗救护工程";                }                else                {                    m_strWarFunction = string.Format("{0}、医疗救护工程", m_strWarFunction);                }            }            if (chkboxgudingcaiyou.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "固定柴油电站";                }                else                {                    m_strWarFunction = string.Format("{0}、固定柴油电站", m_strWarFunction);                }            }            if (chkboxzhuanye.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "专业工程队";                }                else                {                    m_strWarFunction = string.Format("{0}、专业工程队", m_strWarFunction);                }            }            if (chkboxwuzhiku.Checked)            {                if (string.IsNullOrEmpty(m_strWarFunction))                {                    m_strWarFunction = "物资库";                }                else                {                    m_strWarFunction = string.Format("{0}、物资库", m_strWarFunction);                }            }							
--> 直接改成datetable 看看怎么实现要的时候再转换一下就行了然后一直使用datetable来操作	很多字段不完善	两个窗口：	1.单体窗口		单体信息还原上去		V		很多字段			cmbbuildgrade			cmbboxlvjianstargrade      PrjSizeName						txtboxguimochanshu			cmbboxupnaihuograde			txtboxXFzhandiarea			txtboxXFheight						chkyiranyibaocangsuo			chkboxyouku			chkboxqiku			chkboxdanyaoku			chkboxminbaocangku			chkboxhuaxuepinchangku			chkboxjingdiansheshi			chkboxkuangshansheshi			chkboxqitasheshi			chkboxshiyongbuild			chkboxleidianbzgfprj			chkboxlunzhengprj		有些字段需要在储存过程get的时候还原，	所以等阳哥get的储存过程写好了再检查哪些是错的			不是修改而是添加了一个新的(V)											2.人防窗口		很多字段										先还原这个试试...						我现在要什么？	我现在需要通过储存过程获取的datatable 然后使用这个datatable的值来还原 	如果这个datatable 是我保存时储存的值，那么我可以根据保存的时候  组织来还原		现在修改一下储存过程		传入什么，获取什么		绿建星级 怎么来的 V	消防占地面积  好像没有字段(V)		没有字段添加字段	易燃易爆做个ui判断	现在我封装一下	我先完成人防的修改吧		核武等级()			看一下人防字段有没有			没有估计需要添加字段然后储存		常规武器等级()				点击修改新加？（V）							未还原字段：	所属行业()		OpTypeNum	所属专业()		TradeBoundNum					地上耐火等级（V）	消防占地面积(V)	防雷信息(V)			添加、修改完以后刷新一下(V)	修改完以后给提示成功。(V)				"易燃易爆场所（油库（加油站）、弹药库、民爆仓库）、景点设施（雷电易发区除房屋和市政工程外专用设备）、矿山设施（雷电易发区除房屋和市政工程外专用设备）、其他设施（雷电风险高且没有防雷标准规范的项目、需要特殊论证的大项目）"	chkyiranyibaocangsuo	chkboxyouku	chkboxqiku	chkboxdanyaoku	chkboxminbaocangku	chkboxhuaxuepinchangku		chkboxjingdiansheshi	chkboxkuangshansheshi	chkboxqitasheshi		chkboxshiyongbuild		chkboxleidianbzgfprj		chkboxlunzhengprj			王鑫越 	更新一下	测的看一下什么问题	clear:	clear:	clear:	-->选择人员、选择项目....	修改一下EcaUpSdk	使用同一个dll兼容两个新系统		选择人员的时候直接从远端(webservice)获取    	我现在先修改一下这个EcaUpSdk		修改为从远端获取，现在可能是在本地获取的	、	ex：My body want to take a rest, just take 	waiting for the lunch, have lunch and have a long time rest	maybe I can get my ideas into shape first	take it easy,it's doesn't matter, it's Sunday today	no coding, just thinking.		在获取ei本地的单体数据表，里面使用的是静态属性的get函数	在这里修改，我觉得可能有点问题。	因为我调用		他调用本地获取了些什么东西？	这里本地dt和远端dt不太一样，那么我就先不期待查出所有的东西，看一下需要用到哪些东西	http://localhost:19986/ReportService.asmx	clear	{System.Net.WebException: 基础连接已经关闭: 接收时发生错误。 ---> System.IO.IOException: 无法从传输连接中读取数据: 远程主机强迫关闭了一个现有的连接。。 ---> System.Net.Sockets.SocketException: 远程主机强迫关闭了一个现有的连接。   在 System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)   在 System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)   --- 内部异常堆栈跟踪的结尾 ---   在 System.Net.ConnectStream.Read(Byte[] buffer, Int32 offset, Int32 size)   在 System.Net.HttpWebRequest.MakeMemoryStream(Stream stream)   --- 内部异常堆栈跟踪的结尾 ---   在 System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request)   在 System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request)   在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)   在 EcaUpSdk.ReportService.ReportService.GetSpecDic(String& strErrorMsg) 位置 F:\建设数字\公司代码\test新版上报工具\EPDMSGT\EcaUpSdk\Web References\ReportService\Reference.cs:行号 232   在 EcaUpSdk.SysDic.get_dstDic() 位置 F:\建设数字\公司代码\test新版上报工具\EPDMSGT\EcaUpSdk\EcaClass\ProjectInfo.cs:行号 42}
   clear
   clear	-->我现在是要把整个目录编制的弄完吗？	如果是的话，反正先把添加人员的弄完。	那么需要调通	等阳哥把数据库连接的发给我。我调通了就可以连接了	反正我已经推到远端了。	直接调用远程服务试试？
				是读取到userinfo后没有将这个值给Default。。。c346b7f2-5dec-435e-90da-1e0737a5a7dc
126499
最直接的这个siglekey不行
然后这个DesignCorpcode也不行

点击单体的时候，会报连接字符串为空。

在初始化单体的时候，这个连接字符串又到了这里来
 那意思这个连接字符串还是不能置空，那么我就不能用是否为空来做判断了。
 那么我怎么搞呢？
 
要保存本地的，又要从远端获取，那么我改一下逻辑，先从本地获取，如果获取的dt为空，再从远端获取，获取两次，只需要对函数进行小小的修改不就ok了
噢~,他是一个静态的，所以说不是在外面判断dt是不是空，而是从本地判断
如果为空，那么再从远端获取一次试试
这无所谓的。
 no
 是否是在EI下面来判断
 
 现在找找为什么没有选择单体的这个图标
  clear	--> //每次EcaUpForm的 147行  获取项目状态都需要联网而且好慢。	保存并退出？
	和上报
	点击上报的时候把状态置为上报   在webservice
	看一下修改了哪些字段
	可以在原来的EIService上面看
	
	怎么知道现在的单位是勘察的还是设计的
	怎么报告状态返回-1就对了
	
	42F81BC14BC44C2B
	
	序号没有递增
	因为他查询是按照生成的人防num排序的 ，所以会排到上面去
	那么我现在就只能依照，记录一下新增的某个值，俩进行
	clear
	-->看一下怎么修改一下这个url
	把它改成正式的
	这里都是写死的
	然后看一下地市？
	
            //dicUrls.Add("DATAURL", "http://localhost:19986/ReportService.asmx");
               dicUrls.Add("EIURL", "http://localhost:27266/EiClientService.asmx");
#if DEBUGa
                 dicUrls.Add("DesignCode", "126499");// DesignCorpCode写死用于远端查询人员
#endif
			ReportUrl    ReportFileUrl    EiClientUrl
                //dicUrls.Add("EIURL", "http://118.178.119.15/testWebNewUpload/EiClientService.asmx");
	clear
-->新版上报工具
	-->目前任务0719：V
	0.给他们的测试版本
		已经给他们了，然后测试能不能通不知道
		这个我可以不自己去测试，因为我测试的时候，主要就是测试配置有没有对。不是测试Bug
		所以等待他们看试一下，然后如果不对再看看配置哪里错了。
		don't mess them!
		
	2.登录的注册，
		tbCorpBasicInfo
		CorpCode 社会组织机构代码
		这个代码判断是注册新的还是修改旧的
		加两个字段(V)
		clear
	-->1.登录验证V
		
			要不我还是先做登录验证的吧
			no
			我如果只用用户名密码来调取验证
			用户名密码不能从
			clear	
	-->2.注册V
			注册的时候，填写一个CorpCode
			然后这个用户名密码还不能重
			使用用户名来
			新建注册窗体
			，获取相应字段  
			字段有哪些？ 
			
			组织机构代码
			企业名称
			
			登录用户名，
			登录密码
			
			Province 省 25
			CityNum  市 370181
			
			地址
			法人姓名
			
			法人身份号码
			联系人姓名
			联系人手机号码
			（CertTypeNum = '001'）
			就这几个
			该用户已注册过了，
			
		我目前只需要一个全国唯一码
		然后

		申请注册

		，然后调取储存过程

		clear
	-->h1:他们测试的流程卡住可能需要处理V
	h2:包括卡流程
	h3:卡流程
			3.周六讨论需求文档。
	4.关于对没有配置地市的判断
	没有url，暂时不予处理
	还有一些模块待完善
	但是他们没有找我，那就先不急
	clear
	(V)-->阳哥	给的周六讨论 还有五个待解决 - 
		(X)1.第一页的项目负责人和负责人手机号不需要在第一个界面展示 人员那个界面需要按照EI里的展现形式来展现，额外增加一个项目负责人手机号字段 
		(X)2.增加 本单体是否包含以下联审内容
		□消防审查、□人防审查、□防雷审查
		
		先不做
		clear
	V-->现在他们在群里发的部分修改：
	clear
		V1.去掉红字	
		V-->2.有可能存在点击上报但是主管部门那查询却显示未补报V
			有可能现在把注册模块写了可以解决
			等待山琳哥测试
			急需解决
			1.首先看一下是不是检测的字段搞错了
			153654
			fd265721-8de6-4218-9c51-551ad70d3f96
			clear
		V-->4.单体里面还有其他东西没有？ 
			有在文档里面提到，不能还原单体。
			找到文档
		clear
		V5.业务办理的字体颜色改红?  
		V6.项目页面 在将varchar转换为int时，失败。  
		V-->8.对于已经上报的项目还能上报的问题。  
			上报的时候，给他加一个判断
			在储存过程实现
			在储存过程就可以了吧
			但是这样就没有返回的提示
			看一下调储存过程是怎么返回true 和false的
			他可能使用的dt但是没有关系，也可以使用dt来进行判断
			所以还是在储存过程进行控制
			然后怎么进行判断？
			dt为空显然是不可能的，先看看他是怎么玩的
			不是从数据库控制的...
		我上报的之前，肯定得判断一下项目的上报状态，
		我点击的时候，只是修改了一下上报状态，
		
		但是我的数据还是在时刻储存。
		所以 我在保存之前，调用一下？ 进行判断？
		那么我不在这里进行修改，
		反正我也会获取到这个状态，我大不了多在点击上报的时候 才写一个提示，
		其他时候不给予修改。
		
		所以我要写一个存储过程来判断它是否可以上报？
		是否可以存储数据？
			Msg
			可能流程不太清楚
			我什么时候可以保存，什么时候不可以保存？
			我现在的疑问是，还有没有勘察设计补报的情况？
			
			这个权限还挺麻烦的
			 不能再用普通的是否上报来区分了
			 
			 需要一个权限问题。
			 
			是上报后不能修改还是 受理后不能修改？
		clear
		V-->有些不是我的模块：
		clear
		X-->1.查询出来两个表首页 	
		clear
		V-->2.添加变成修改标题头	
		clear
		V-->3.目录编制删除报错（新添加的显示删除失败）
			找一下在哪里判断的
			这个问题可能跟图审机构受理之后还能打开有点相关。
			需要测试用例再来分析
			.ok ，现在来分析一下吧
			
			先分析哪一个？ 
			肯定是上报之后还能传图纸补充信息这个。
				153654  "7b4b14a7-8a08-4dff-bec1-78f84682b60f"
			测试一下
			还是不行
			明天调试一下。
		选择审查阶段是怎么鬼
		只能选择一审///	
		查看一下弹出的依据
		clear
		V-->4.保存报错  
			这根本不是继承于同一个baseForm，那肯定是要报错的啊
			为什么要这样强转？
			因为他想调用父类的SaveData 来保存数据库。
			看一下他是怎么保存数据的
			实时更新的
			两种方法，要么只要是这个页面的时候，我就直接把保存按钮给他屏蔽掉
			
			第二种方法是
			clear
		V-->bucket!
		5.意见回复勾选多条回复，回复框只显示一条	
		V6.点提交之后没有提示回复成功	（图审回复,优化）
		X7.添加人员从事专业里面没有电气专业，使用的dll里面缺这个专业
		clear
		X-->8.补充审查阶段框是什么意思,然后这个框是必须要选择而不能关闭的。
			他们的意思是不能修改。
			clear
		V-->9.保存并退出
		10.
		clear
		V-->8.大型中型小型 改成一级二级三级（孟哥）
			找一下消息
			章丘的工程类型不是大中小型，我看他们合格书上是一级、二级、三级
			字典表要改一下
			上报模块
		clear
		V-->1.看一下勘察，页面怎么回事 
		clear
		V-->7.勘察模块 	
		//等待他们测试。
	   勘察页面基本没有完成
	   那么我需要知道些东西，就是勘察页面有些什么东西
	   阳哥说以后以后可能是我来维护这个上报工具。
	   维护我肯定没有问题，所以我现在需要知道的是一些设计的问题。
	   交流一下设计。
	   从EI看一下是怎么回事。
	   肯定要理解每一个设计，但是可能不是由我来设计
		
		尝试着使用设计单位同样的页面
		使用特征值来进行区分是勘察还是设计
		然后来控制页面的显示
		先想方法，如果
		现在把所有的都弄成了通用的
		但是只对获取和上报进行了  区别使用。
		下面对所有窗体都同样区别使用。
		a little tired, 
		It's weekend ,have a rest !
		
		现在勘察和设计上报一样的，
		我需要知道他们是什么不同。
		勘察不能操作设计的东西。
		勘察不能、在二审删除一审审查过的东西。
		现在知道一些了。
		项目基本信息都是
		设计填的。然后勘察有自己的人员、单体、目录编制...  所以我基本所有的都需要搞一下。
		那么现在开始做吧
			所以我还是需要将下拉列表框固定？ 
			看一下他们是怎么固定的？				
			现在问题是初始化没有找到值。对象改变了。
			
			V1.屏蔽了一些字段：
			经济指标
			项目负责人 --
					-	
			项目勘察信息给隐藏掉
			
			V2.单体信息给干掉了
			3.还差 目录编制、添加图纸、添加材料
		//等待测试给我反馈：
		V还原页面操作。
		clear
	(V)-->章丘存在问题梳理
		V 1.找一下建筑联系人
		-->2.判断能不能受理通过图审的受理来判断。
			可能要修改一下储存过程
			头比较大，后面再处理。
			逻辑明天来想吧
			里面只有一个受理010
			目前这个受理是住建受理（应该是）
			！我现在只需要知道怎么去区分图审就行了
			那么图审机构受理又是怎么个情况
				这个怎么知道？
				 特征：  没有审查阶段  在一审中或者还没有受理。
				如果受理，我岂不是就开始了一审？
				对，只要我一受理，
				一审和审查阶段是独立的
					
				我开始一审，我会有审查阶段吗？
					开始审了，但是应该没有审查阶段，审查完了应该才会有审查阶段
					（问清楚）是先添加阶段再审查
				
				图审受理  没有审查阶段，会不会是（程序性审查阶段和技术性审查阶段）
				比如我现在是一审中，而且审查阶段为空 不予许修改
				一审中，而且审查阶段为1
					
				控制有哪两个？
					一个是审查阶段的Num数   一个是 审查显示的状态
					我要使用这两个控制来控制出多少种情况？
					两种情况，能不能修改
					
					我哪些能受理哪些不能修改？
					单个控制：
						只要我005，就不可以？错
							我不但要005而且还要 
							stagenum
							只要我受理了就是一直是005了
							我必须还要加一个判断才能知道
								图审有没有审查完。
								图审审查完一个阶段的判断
								去哪获取到这个判断？
								
								从state不能知道，从stagenum也不能知道
								
								再加一个CensorResultNum用于判断。
								
							
						我开始技术性审查、所以
						我还会变成其他的吗
						变成审查报告、这个表示已经完了
						
					现在有三个控制
					我要得出多少个结果？
					结果1：
					项目已经受理，图审还在审，不允许修改
					项目已经受理，图审审完了，允许修改
						一审可以修改
						二审可以修改
						三审可以修改
						四审可以修改
						五审可以修改
					明天来完成代码 cool!
					clear
		-->3.勘察看不了审查意见
		看看是怎么回事
			1.直接点击的话，没有传入是勘察还是设计的
				我想的设计思路是什么？
				不需要区别是勘察还是设计？
				不需要提前区别
				我看一下他的储存过程的逻辑是怎么写的
				有区别，那我总得有地方得区别吧
				我目前都是在传入的时候区别的
				
			根据专业来区分。
		如果我现在把查询Union起来，
		那么会出现的项目状态是
			没有实质的表现
			只是设计的
				我让他只显示设计的？
				看一下是怎么get的
				我已经传入了一个designcode
				我只需要
			只是勘察的
			勘察设计都是的
			
			不应该返回岩土的
		clear
		-->还有哪些：
		2.统一注册框   
			
		4.修改人员按钮 X
		5.添加勘察设计人员页面 什么和EI不一致 
			
		6.不默认显示地勘报告
		
		10.4 缺少下载意见书，查看审查意见界面
			excel	现在是excel
			现在看一下word的
			研究一下孟哥的代码
			同意
			clear
		-->13.2 流程节点显示不全，没有一审之后的节点
			调用一下web插入的节点   fff
			一审过后都没有？
			一审后，我下一个节点是什么？
			勘察回复
			点击提交后，写储存过程  isKchufu = 1？
			date  getdate 
			
			这个只是更新状态，但是节点还是没有插入
			我仍旧需要插入节点
			我可以用存储过程直接调用 插入节点，我可以获取到参数吗？
			我也可以再多写一个服务来调用
			我先看看他们是怎么调用的
			已经有了，他获取的时候不是从表里面获取的，所以不用再多写存储过程了。
			为什么之后的节点
			可能流程还没有走到这里吧
			clear
			:等待测试反馈
		
		(V)14.2 从事专业没有电气专业
		
		优化：
		1.目录编制勾选并添加多个单体
		
		(V)2.对多条意见进行回复
		
		3.增加上报状态，查看是否已上报到主管部门   
		4.一些待优化项，
			图审回复窗口限制用户不让他自己调节，readonly。
		(X)5.选择的地市为空，查询报错
		
		clear
	(X)-->	1.批量盖章
		
		2.打印合格书
		
	    合格书乱，not my bussiness
		clear
	(V-)	-->3.单点登录
			出图
		
				账号
			关于登录的问题，
			注册的时候，使用郑易提供的webservice进行验证；是否存在用户名相同用户
			是否是已经注册过的用户
			然后在提交注册的时候，我这边将这条数据库，推送到两个地方
				一个是地市数据库，一个是郑易的webservice
			然后我这边会等待一个唯一码
			这个码是由住建来
				那郑易那边要什么东西？ 全国唯一编码？
				他登录的时候用什么东西？ 用账户名和密码
			住建通过审查，然后给我这条数据库赋码，孟哥，会推到两个地方，一个是我的地市数据库，一个郑易那边
			郑易那边用什么验证呢，肯定要来一个区别地市的验证
				。。。
			我这边呢？
			我需要区别地市吗？
				首先考虑到章丘，所以暂时不用区别地市，
			第二，考虑到后面的话，如果全省，那么还会有两个阶段
				一阶段，其他地市除浙江省都不用锁，浙江省依旧使用锁来验证
					我现在买锁，是买个设计院的。我登录注册
					给主管部门审核
				二阶段，所有地市全部取消锁验证
					无所谓
				
		clear
	(V-)	-->关于登录的思路
			1.申请注册
			郑易提供接口给我调用，我把申请的字段（用户名，全国唯一码，社会信用代码）传过去判断是否能注册，如果能注册，我提交到我的数据库，他提交到他的数据库。
				他那显示成功以后，我这再插入数据，那么我这的FullcorpCode怎么搞？
				没有关系，他调用的我这的验证，所以会先走我这的验证，到时候我把msg返回给他
			2.登录，登录的时候我提供接口给他登录
				他调用我的webservice
				他传入什么？  用户名、密码
				返回什么？	  如果能登录，返回一个datatable 字段：全国唯一码，
				如果不能登录，返回的datatable为null，然后在msg里面描述原因。
			目前章丘的完全调用我的验证。
			
			3.8月1号上
			my business:
			imp:
			(V)1.登录统一
			2.导出意见书word
				有点复杂
			
			later:
			(V)3.注册用户，清掉用户数据库。
			等待山琳哥提供注册用户。
			其实这个根本就不是啥问题。
			
			我现在着急完成吗？
			我现在没有太多的时间，所以imp肯定是完成不了的，那就回杭州再完成好了。
			而且他们没有催，山琳哥也没有整理出文档。
			deadline还有多少时间？
			8月1号，27回杭州，28 29 30 31 今天下午几点到杭州？2点出发，那么2点半到3点回到杭州。还有两个半小时的时间来处理。
			那就用这两个半小时的时间和郑易把登录的问题解决了。
			然后周一把导出审查意见书的问题看能不能解决。
			然后其他东西？
			花时间吗，不太重要。
			--
	首先调用我的服务验证，
	(V)先写服务
			clear
	(V)-->导出意见书word
	已经找到了孟哥的模板，
	然后将代码copy过来应该就没有问题了？
	我有他的模板
	测试一下是什么效果
	还有些什么其他的问题吗？
	等待他们测试一下吧。
	不过应该都是些小的问题，这个工作环境让我觉得我的效率很慢。
	难受
	也有可能是昨天晚上没有休息好的原因。
	没有关系，我还有时间的。今天下午加明天一天。
	看一下章丘的问题。
	有时间就调试一下bigZhangPrj
	绘制流程图。
	
	那么下面：copy代码
	
	有一些字段可能没有，给他找到就ok了
	CensorName 审查阶段。
	
	关于项目的有哪些？
	我只要项目的  
	我可以使用我使用过的那种方法
	我用他father那种
	
	资质等级 资质证书，
	clear	
	(V)-->之前测试，的时候，上传图纸的时候应该不能看到一审的图纸。
	在审查管理模块电了 技术性审查，（那么应该在数据库里面就添加了一个审查阶段？）
	然后，技术性审查，信息反馈添加了这个项目。
	
	是在查询下项目的时候就不查询还是让他不显示，因为要上次和一审差不多名字
	我觉得应该是查询的时候就不查询。
	可能没有把 审查阶段值传过去。
	
	如果是就是传值问题，如果不是的话呢？
	也就是我传值传正确了，那么我是在哪进行筛选的呢
	查找
	
	0f26d2f7-e61c-45f4-9336-f3ca6594ed7d
	153654
clear
	(V)-->郑易记录bug
	(V)1.选择地市的时候，如果我是用滚轮选择，选完地市没有改变
	(X)2.修改显示日期。他已经加了一个D ，6p6p
	(X) 3.datagridView的readonly。
	clear
	-->看一下文档还有哪些问题？
	1.参加人员修改按钮
		暂不处理
	(V)2.回复意见时回复多条
		
	3.注册登录现阶段只是针对章丘的，是写死了的。
	4.导出意见模板可能存在问题
		等待测试回复
	(V)5. 没有递增序号
		给查询出来的datatable增加一个自增列就行了。
		
	当我知道下一步应该怎么做的时候，可以休息一下。
	clear
	
	晚上更吧，这样比较好。
	我能不能把温州独立一个版本出来更新？
	应该是可以的
	 
	已经编译好了，到时候弄上去瞅瞅
	clear	
----------------------------------------------------------	
(V)-->温州更新服务器	
clear
-->	1.15服务器待更新
	等待馨予给我地址
		他们只是为了测试
		clear
	
V-->嘉兴短信平台更新。
	我们的短信平台改了个叫云MAS的，可以发电信、网通号码，也可以发省外号码，移动公司发来那边技术的QQ，“技术qq：2153737122”，你们让技术联系一下，可能也要二次开发一下，上次你们应该联系过，说这个端口对接也没问题的，等换好了云MAS后，告诉我一下，我们要把原来的端口关了
		
	【中国移动云MAS】您客户【嘉兴市建筑业管理局】的云MAS平台账户密码已经重置，平台地址：http://mas.10086.cn，
	登录企业名称：【嘉兴市建筑业管理局】，
	用户名：admin，
	密码：8SBu@dq5，
	登录后请及时修改密码。如有问题请拨打服务热线：4001049990
	JXSJGJ
	1234.com
	117.149.146.9
	
	base64
	
	clear
	
V-->舟山短信
	1.本地测试，感觉给的东西不多
	现在显示发送成功，但是却没有接收到短信
	
	最好就是找到技术，问问清楚，有些什么限制
	C:\WINDOWS\assembly\GAC_MSIL\DevComponents.DotNetBar2\14.0.0.15__c39c3242a43eee2b\DevComponents.DotNetBar2.dll
	他们调用接口用的什么，我测试的时候使用的demo
	调用的时候，估计得封装一下他们的dll？
	
	问一下他们舟山有没有短信，问一下他们调取的方式
	
	 clear:
	图审机构还收不到短信，因为没有提供短信接收人联系表
	(V)-->金华的短信 
	需要开发
		V1.使用demo在服务器测试	
		2.封装dll	
		3.调用接口	
		卡在三个地市无法发送。
		主要这个不是我们这边能解决的问题
		要么是住建的服务器部署在政务网下面（不现实）
		那么唯一的就是换一下短信接口了。
	阳哥来handle
	clear	
	
V-->my situation now: not Important mood
	A little tired ,
	there is no much work todo.
	a little problem just like a piece of cake
	they don't hurry too
	so, when will fix that stuff called little problem 
	not right now
	don't show much to them.
	So have a rest. them terminate them.
	clear
	
(V)-->登录验证的功能需要修改。
	CaseResult 这个字段为1 为审核通过 2 为不通过
	
	CaseAdvice 这个是审核意见
	你可以把意见也加进去 然后让企业可以看到审核的意见
		资质等级。
	clear
(current I&H)-->让上报工具同样支持mysql。
	服务与数据库直接交互
	所以一般情况修改一下mysql应该就可以了。  
	以前的qmiservice好像也有一个修改	
	我可以加一个特征值来区别是 mysql还是sqlserver
	
	我现在要知道 杭州sys库的连接方式是不是也是这样。
	只有一个库 
	
	那么就是一个转换的问题。
	逻辑：
	首先我只针对章丘的上报工具
	首先我读取配置的值
	然后根据配置的值来区别是用的什么数据库
	service里面不需要配置地市
	
	现在就试试。
	问各位大神一个问题：
	假设已经有了定义的两个类 A,B
	他们除了名字，属性方法全部都是一样的。
	他们都有一个print()函数
	我在其他地方调用print()函数的时候，可以根据传入的 是A类还是B类来调用 
	a.print()函数还是b.print()函数吗？
	是定义泛型函数吗？

	先复制粘贴吧
	现在不是做测试的时候。
	
	现在我在service端已经把
	
	然后调试一下试试
	
	现在试一下，呵呵 不行
	
	下面1：
	首先使用sqlserver来执行一下脚本测试一下 ，然后有些字段没有就添加上字段，
	2.测试mysql。
	
	clear
(InH)	-->嘉兴个性化对接的交给了小熊。
	
	我觉得可以跟他说一下思路
	只是友好地提供建议
	不要在意给不给钱吧，想想他们想怎么样？
	有时间就处理一下。
	
	从服务器获取，然后通过中间工具，不断查询，然后插入到堡垒机oracle数据库
	他们的服务能通吗？
	不断查询又是什么鬼? 这个相当于同步，但是你怎么知道，有没有修改，难道能做成增量？
	这个还有点难
	首先我们往自己数据库插入数据的时候，有自己的触发动作。所以查入数据
	那么他们想要什么东西？
	他们只想要，有一个数据库，这个数据库里面存着自己想要的东西，而且还是同步的。
	软件的设计思路呢？
	阳哥的软件设计思路就是，提供一个web服务，你们想要什么东西，我们的web服务里面都有，要的时候，可以直接查询，这个不就是有节点了吗？
	你可以直接使用我的数据库，如果你要将他保存到你们的oracle数据库，那就是你们自己的问题？
	但是想想，这其实也可以成为我们的问题。
	你什么时候要用，你直接调取我们的服务获取，获取的数据库都是即时的。
	想怎么用都可以。多个人用？ 那我们的接口也可以给你们。你们对接口进行二次开发一下就行了。
	你们想要我们生成数据库的节点，那是不可能的；
	
	所以第二种方法就是 完全方便你们，我们来写一个同步工具。（很难）。
	我们的服务如果能提供一个增量，那么感觉就很了。（根据传入的版本来对比最新版本返回增量？not impossible）
	最好和最简单方式就是他们做二次开发，封装我们提供的接口。
	
	
	
	
	
	
	
	
	clear
(V)	-->网签系统短信发送的
	clear

(X)-->台州短信给看一下。
	图审 临海宏基 
	  图审发出审查意见。 勘察接收不到短信、
	  
	  所有的勘察（图审发出意见、他们发出图审意见）
	  设计回复了能收到、
	  勘察回复了收不到、
	  	  精铸是可以的。也就是他们家的图审感觉可能有点问题。
	  		他们这家没有5 很奇怪		
	看一下是什么原因	根本就没有5
	其他家有5
	他这家的某些字段可能有点问题
	如果我查找程序可以知道吗？  
	不会，因为
	添加消息反馈是在哪添加的？
	是在EI、网页、还是在电子审图
	
	网页。那么我去查一下网页的代码？
	关键这个有点区别对待。
	其他都行，就他的不行。
	我只需根据调试一下应该就可以了
	
	用具体的项目查看一下当然也需要使用代码。
	clear
(V)-->章丘上报工具，审查意见管理，没有到出意见的阶段，不让他点击查看意见。
	记录到文档再行修改。
	clear
	
	-->下面找到目前能着手的，先做着,mission for week
	V任务1：同样支持mysql
			明天：
			试着按照阳哥说的方式，其他地市只需要执行一下就可以了
			然后来修改保存一下数据库的储存语句，
			然后再调通一下Mysql的就可以了。
			需要测试一下。
			
	X任务2：舟山短信，我给他把图审联系人改成负责人。（不管）
	V任务3：网签短信发送，（需要通过RTX,联系李瑞）
		   网签短信，已经和瑞哥取得沟通，看来不用我关心插入数据，省了不少事
		   那么我现在升级一下我的短信
			1.首先写入日志，把最多的先给去掉
			2.使用一套代码发送网签的。不要分开搞了，使用应用程序配置来配置 是网签还是 短信机的就可以了。
			  
	V任务4：提到的一些新的需求。（等出了需求文档再说）
			
			2.
	X任务5：嘉兴对接，本来交给小熊，但是挺难的，而且还没有明确的价值。
	V任务6：台州短信查询，查找为什么会这样。以后短信都得注意一点，复制的时候，注意留一个升级版本。（等待给我实际的项目再查一下）

	9
	The user specified as a definer ('skip-grants user'@'') does not exist
	clear	    <add name="MSSQLDataLink" connectionString="server=localhost;uid=root;database=cdk_qmi;port=3306;pwd=1234.com"/>
	
	台州市黄岩永恒电力建设有限公司
	clear
	
	-->1.先把短信工具做好
		1.编译根据不同的配置进行编译
		看一下日志有没有问题。	
	2.测试一下mysql数据库的储存过程。如果比较无聊的话。
		一个存储过程一个存储过程的测试？
		不是很想测试，太多了，太麻烦了。
		等测试没有事的时候交给他们。clever
	-->3.等待提供需求文档，
		V1.在各个模块加一些项目筛选功能。
		V2.地勘报告，
			设计没有，
			但是勘察应该有，或者能自己输入，
			上报工具   勘察  目录编制
		clear
	4.看一下台式机			台式机不太好，这种无关紧要是事放在后面
		
		我电脑，需要加装内存条。那就装一个。
		能不能装一个简单的系统在盘上面，然后来解决一下我的显卡到底是什么问题？
		是突然蓝屏，应该不是显卡的问题，应该是系统的问题。
		那么解决方案呢？
		1.找一个U盘之类的，装一个系统在U盘上面，然后通过U盘来启动电脑，然后把显卡驱动更到最新。
		2.维修人员。
		3.先更新系统试试。
			也不知道是不是内存的原因。
		内存条是肯定要买的，因为这个东西不买了不管安装到哪都是可以的。
		。到时候选择商务本的时候，最好再看一下可以加装固态硬盘和内存条的。
		试一下闲鱼什么的。
		clear
	-->what is my situation now?
	do not have a enough rest.
	a little tired.
	so what should I do?
	how much work there is?
	-->1.filtate 
		almost get off today's work. I don't really like to do this stuff.
		so many people, so I have too.
		If I could,I would,but I can't ,so I shan't
			PrjName
	Address
	BuildCorpName
	CenSorShipName
	clear	
	-->2.buy computer
	3.
	in		CPU
		clear	-->布置网签短信
	V丽水、V温州、V衢州、V台州、V绍兴、V嘉兴、V湖州、V金华、V舟山
	
	alter table sys_smsmsg add IsSucceed varchar(3)
	select * from sys_smsmsg
	施工图
	网签
	clear	clear
	
	busy days soon or later will come.
	V明天给鑫越调试一下，看一下是什么问题，然后做一下其他的筛选，反正都是得做的，所以看看	怎么样，到周五阳哥正式确定需求后开始着手。
	
	V-->有点难实现
	因为他没有这个触发的事件，就像keypress一样的。
	
	那么安装他们的设计就是 
	两个都保存，一个是直接在里面键入，还有一个是勾选后回复。
	那么我先实现直接键入的这个？
	怎么实现？  我看一下 我键入以后，我的datagridview的datasource有没有改变。
	有改变，那么我就少做很多事了。
	那么我现在怎么去设计这个东西？
	这么设计，我现在需要把两个东西都保留
		针对单条回复：
			我直接在回复内容里面进行修改，然后点击“回复”按钮将意见直接暂存到服务器。
		针对多条回复：
		如果有勾选，我就弹出框来，然后将多条全部回复。
		所以不能将它称为选择，而是具体一点就是选择多条进行回复。
		
	内容为空的判断不是在回复，而是在提交的时候出现的。
	
	
	V2.双击的时候将其选择。
		获取到sender as cell的rowid,然后判断它的勾选，然后去进行改变。
			
			先做这个吧
	clear		
	(V)-->等待阳哥确定需求
		他们的需求文档写好了吗？
		我做肯定是按照需求文档做的，
		当然也可以先按照讨论的内容，先做一些。但是不是很着急。
	2.需求文档
		已经有了，等待阳哥讨论？
		还是先做呢？
		感觉有点着急吧
		那我怎么办呢？
		早点做，这是你想要的。
		so what r u waiting for?
		首先，文档是杨海川整理的。
		文档没有经过可靠的确认反馈。
		两个确认反馈，
		1.阳哥确定。
		2.需求确认。
	那么可以做，但是做的时候必须得小心一点。
	后面改的可能性有多少呢?
	如果阳哥不太关系这个，那么说，大部分决定都是由我来。
	什么情况下回返工？
	那么就是和他们预想的不一样。
	根据地市来决定不同的界面展现，这个问题比较重要，必须要阳哥来讨论确定
	。
	那么我现在要做的就是：
		无关于地市区别的。
		那么就是先做所有地市通用的。
	先估量一下工作量。
	take it easy.
	clear
	
	-->2.上报工具确定需求，然后就可以开始做了。
		现在已经确定了是使用读取xml的方式来区别地市。
		然后通过地市来进行调整。
		
		基本没有什么不合理的需求。
		需求写得很乱，那么我先做大的
		然后再具体细化。
	更新是否需要区别地市更新？
	暂时不需要...目前我们使用的同一套代码，分别更新维护可能会更加复杂。
	
	查看一下怎么组织的。
	
	xml存两个值，一个省份，一个地市
	
	我运行后马上读取，读到哪去？
	
	SendInfomationLS
	
	37 是山东、 370181 章丘
	33是浙江
	15是内蒙
	
	外省注册的有点麻烦
	
	我是从哪来的
	
	我想到哪去注册
	我这个框不管你是从哪来的。
	
	
	先把章丘版本的保留完善、
	浙江的不着急。
	
	看一下他的主面板是怎么玩的。
	
	学习一下他是怎么
	他是怎么让编译的时候就自动更新的，而不是运行的时候再做判断的。
	有点厉害。
	
	继承于UserControl在编译的时候就
		
	模块：
	1.企业基本信息维护模块（这个模块是针对章丘）
		V1.企业信息维护
	用户管理模块：（也只是针对章丘）
		V修改密码功能。
	V-->注册、登录企业信息维护。
	的需求是，注册的时候所有的注册都可以注册，
	错、注册只有章丘才会有。
	所以修改密码的功能也只是章丘的才有
	
	
	 if (!TuShenClient.g_UserInfo.ProvinceNum.Equals("25") || !TuShenClient.g_UserInfo.CityNum.Equals("370181"))//如果非章丘
		
	确定一下：
	确定了，应该没错
	V将每个地市的Province固定		
	下面就是进行模块细化
	现在就是可以进行分地市版本地细化完成了。
	1.章丘版本
		首先将注册框和企业进本信息维护模块分开。
		自己先多个判断吧，反正他的出图系统只是想要能不能登录。
		我想要的效果是 不能登录他那边
		但是能登录我这边。但是登录我这边又不能用，
		两个结果，怎么将另外一个结果
		这样，我重载一下那个函数好了。
		呵呵，牛B
	下面先完成注册登录的，其他的先不管
	1.注册
		V1.注册只是需要很少的字段
		2.注册框
			V两个输入密码不一样。
			V登录名默认为统一社会信用代码
			V对手机号位数检测
		3.注册逻辑
			把注册逻辑走通
			
		上报到主管部门需要一个状态。添加一个字段或者约定一个 CaseResult 暗号。
		这边只要自己搞就Ok了，那就是保存的时候 0，点击提交后 把他置空。
		clever!
		
		http://www.ccir.com.cn:82/ECAUpdateServer/UpdateService.asmx
		UpdateService
		-->注册有几步？
		1.填写基本信息，保存数据库
		2.登录系统补充信息保存数据库
			-->登录后还原所有字段
			clear
			
		3.将保存的信息发送到主管部门进行审核
			
		4.未通过审核登录系统修改信息保存本地，
		5.3
		6.通过审查正常使用。
		我通过审核以后，
		哪些字段以后是可以修改的、
		比如联系人姓名和电话号码肯定得是能修改的吧
		V审核我不知道，以后他们再做决定，
			+那么现在企业信息维护还分为两种，一种审核后就不可以修改的，一种是可以修改的。
			那么我在该页面除了，登录名密码、全部弄过去好了。
	V2.登录的
	2.其他地市
		clear
		clear
		clear
	-->V现在做修改密码的吧，
		clear
		
		-->2.人员信息维护
				如果不出意外，这个是需要重新建一张表的。
				那就建一张人员表吧。
				看一下需要些什么字段。
			我这边设计的话肯定是一家设计院一张人员表。
			我只需要
			反正就增加一个增删改的功能。
			
		看一下四库的表是怎么玩的
			必须要参考一下四库是怎么玩的，不然以后又多了一些人员管理岂不是麻烦事多。
			尽量简单，不需要重复字段吧。
			我应该有了表才对。
			看看一个项目下面是怎么挂人的？
			已经有了表了。
			只是有些重复的。
			为什么会重复呢？
			一个项目添加一个，呵呵
			什么鬼设计。
			
			感觉这个应该是分开的
			原来是分开的，毕竟四库不是我们的范围
			首先我这边开始都是手输的，而且是挂在项目下面的，所以说只管往里面表里面插入就行了。
			
			现在我将要修改成 单独管理的，我有两个办法，
			首先一种兼容的办法是
			企业人员单独创建一张表，
			我就用这种兼容的方法吧，
			所以还是要单独创建一张表。
		所以还是研究一下他四库是怎么玩的。
		
		看一下选择人员信息 需要哪些字段
		就根据这个表来就可以了。
		tbCaseUserInfo
		FullCorpCode、
		clear
	-->添加人员
		1.存储过程
		2.服务
		3.C端
			
		先做这个吧
		 先看一下C端储存哪些东西，
		 储存过程名称。
		 不就是数据库的东西吗
		 V
	clear

	-->stuffs 不用管
	X-->台州短信。建设单位，有一家收不到
		台州市高铁新区开发建设有限公司   阎彤野 王海村 13867677766 浙江省 台州市 浙江省台州市椒江区葭沚街道东平路859-1号633室 GTXQKFJS 
		这个是在通过验证码修改密码，不是施工图
		clear
	X-->湖州短信、有一家收不到
		浙江金洲管道工业有限公司   沈淦荣 徐明辉 15268233618 浙江省 湖州市 湖州市杨家埠 chinajzgdgy 
		这个是在通过验证码修改密码，不是施工图
		clear
	
	(-)-->勾选专项 或者重大设计变更，只要有原图审机构的。
	跳过主管部门受理
	日期是空的。
	不经过图审。
	图审可以直接开始审查。
	图审受理了的。
	12
	
	clear
	(x-)-->有时间看一下注册的时候，和本地的数据库是怎么弄的，实现一个地方注册，所有地市通用
		主要是想看，注册建设单位的时候，为什么每个地市的数据库都存得有这个建设单位的数据库。
		这可能跟网签有点关系。
		网签系统是完全使用建模工具搭建的？
		这有点厉害啊，建模工具。
		建模工具根本没有源代码，不好玩。
		
		（所以网签瑞哥那边是怎么实现不同地市的？  可能就是把各个服务器的地址配置了，有vpn什么的不关我们这边的事，因为是直接调用的服务，而服务是配置好的数据库连接方式等。
		所以我要怎么去实现呢？ 那么肯定就是调用服务了。
		那么就是问一下瑞哥要服务。cool!）
	clear
		
	clear 
		
	-->其他区分浙江与章丘版本的修改。具体到项目业务办理。		
	完成分版以后
	再做一些细节的修改。
		-->休息一会。
		不是很想干活。干不动了。
	V加个内存条啥的。
	clear
	都是属于的一些细节区分。
	从哪开始。
	都可以的。
	V那就从选择人员开始吧。
	
	项目信息模块
		V1.项目基本信息
			参考一下文档。
			不清楚的再接收一下反馈。
			
		V2.项目参与人员？
			
		V3.项目单体信息
		V4.目录编制、添加图纸、添加材料。
		这个到时候看看需求文档里面有没有提及。
	那么说版本的基本结束了。
	下面：
	根据文档需求再进行一些其他修改。
	V1.搬砖、找一下他的选择人员的框。
	2.其他问题
	下面处理一下按钮滚动的问题
	clear
	-->分页问题：	我使用了审查状态来区分，这样合理吗？
		我可能是已经点击上报了，但是还没有送审的项目
		所以这样来说还是不 合理的。
	那么现在改进一下，只需要修改一下储存过程。
	
	如何区别，在审或者修改中的项目和 待送审的项目。
	就使用一个isupload可以解决吗？
	应该是可以的。
	那么如何来判断这个isupload呢？
	
	我首先要找到这个 属于这个项目的designcode
	我已经有了这个designcode。
	我只是全部都是
	我能不能也用一个in？
	不行
	所以我必须要做区分，
	所以现在不单单是 designcode
	要具体到到底是u1 u2 u3 ？
	我首先查到了项目的 designcode 然后对应的isupload状态
	我现在的问题是怎么区分，是不是这家的designcode 
	然后我判断一下对应的isupload
	
	我现在要做拆分就好了
	
	我查询出来每一个项目的 designcorpcode.....d2.d3.d4. 然后对应的isupload.
	
	isupload 
	好难啊
	
	我不能使用但个的isupload，我只能从表中查这个isupload
	看来只能使用绝技了？
	把or拆分
	先写出来再进行优化规整
	clear
	
	-->V这样，先看看怎么把业务办理按钮位置搞定。
	然后反馈给他们测试，
	再让他们推出一版需求。
	可以更新的话，那么找个时间把章丘的更新了。
	clear
	-->6 勘察专业只显示勘察的目录、勘察的图纸
	（A：这可能是指勘察和设计为同一家设计院的时候
	这个时候应该修改哪呢？应该可以通过SpecName 进行筛选
	岩土
	勘察就只有岩土、
	岩土的必定是勘察？ 
	逻辑要理清楚、设计能不能看见岩土的？ 
	还有一个市政岩土呢？
	在BuildCatalog里面修改。
	添加图纸等都差不多的
	）
	
	哪些是开发项，哪些是修复项。
	how much it still have?
	清理一下C盘，都不够用了。
	today is Thursday，no motive to work
	why? tired? maybe have a rest.
	tired of work stuff.
	and have tomorrow.
	Did I make a mistack?
	no ,I don't think so. 
	How are their feeling.
	first, I send this message.they just think about the travel activite.
	so they maybe don't care about .that's good.
	just have I don't care too. why I send this, I don't put pressure on them.
	I just don't want anyone to put pressure on me too.I send for make myself without pressure. The fact is no ,I'm feel good.
	they may feel a little pressure at first, but then they abandon it. so they feel good too.  furthermore , I'm not put farther.so,that's good behavior. What a smart activite.
	
	城市夜景
	
	headache. have a rest and drink some coffee.
	clear
	-->两件事：
	1.添加多个单体
		还有点复杂。
		我只需要找到一个点 ，进行foreach应该就可以了。
		（）
		不要先想着foreach，
		这只是一种解决办法，重要的搞清楚他的代码逻辑。
		反正可以分配更多的时间去研究一下。
		所以不要急于求成，认真去看一下是怎么个实现过程。
		
		它和选择人员有点不一样的。
		但是这个不值得关心
		关心的应该是它是怎么和前面一个窗体进行交互的。怎么把 选择了的是什么东西。
		
		还挺难的。
		想想到底怎么个循环方法，尽量少地改动原来的代码。
		 跑一下试试。
		 选择的同时，创建了一个row实例。
		 选择的时候？
		 怎么决定他是选择的哪一行？
		 肯定是有的
		 
		 找到这一列的id
		 
		change?
		
		反正挺难的。不是很简单，那么你考虑一下。
		1.为了学习，看懂他的源代码。
		2.为了工作，其实这个功能可能不是强制性的，反而有点耽搁时间。
		作为一个研究点？
		
	V2.查看一下导出意见出现多条是什么情况。
		（V）
	V3.审查意见管理按钮
	Xeasy一点吧。
	X本来今天的安排都是关于明天的
	clear
	-->new week
	这个周要完成些什么？
		1.继续根据文档来完成相应的上报工具需求。
			想要继续根据文档来完成的话，
			有一部分，必须要他们测试的反馈
			如果即时版本没有问题，就直接给他更上去。
			如果情况乐观，可以先把章丘的更新一个版本。
			更新之前要给他们测试，他们什么时候测试是他们的问题。
			更新也是他们来决定的。
			实际更新是他们决定的，但是我需要一个反馈是无法延后的。
			那么就这样：
			1.问一下他们能不能把章丘的更新一下。
			2.问一下他们文档的反馈。这个会影响到后面我的，工作进度。
			3.最好还是了解一下他们章丘目前的运行情况。
				上次都已经把所有的测试账号的给删掉了。
				那么应该就是正式运营的了。
				那么现在一定要谨慎一点吧。
				更新什么的，要等完全测试通过后才可以这样。
			
		2.除了上报工具呢？
			V我还有什么任务吗？
			
			-->V记得把数据库更新的东西给规整一下。
			V那我先做这个吧。
			clear
	clear

-->参照一下文档：
	看一下哪些是需要反馈的、哪些是不需要反馈的。
	和更新分开吧。
		自己想吧、认为没必要做的就先不做、能实现的先按照自己的逻辑实现。
	clear
-->打包一个测试版本给馨越测试。如果没有太大问题，周五下班的时候给他放一个升级版本上去。
	把控好这次升级，做好充分的升级准备，替换之前将所有东西都提前备份。
			
	我干嘛要着急更新呢？
	1.更新来证明我们做软件的态度？
	2.方便我自己调试？
	3.方便进一步的反馈？
	更吧，做了就更。对下一步来说也要方便一点。
	
	今天尝试着把章丘的更新一下。
	clear
	-->归并一下mysql？
	算了吧，好烦，以后还要更新。并且现在弄也没有很大的作用，也不会马上用。
	
	下午更新。
	clear
	-->那么我还有哪些任务？
	(X)1.简单的任务。
		有心情就处理一下吧
		感觉基本没有其他简单的任务了。
		-->1.添加图纸有一个是否上传列，有必要显示吗？想想怎么处理
			我点击确定好像就开始上传了。
			我有一个是否exists。的例子可以使用。
			挺好玩的。
			好玩个屁，难得要死。
			写的什么鬼代码，根本看不懂。
			他的datasource的绑定，和界面的操作是分开的。
			我要给他显示是否上传图纸这一列，我有两种方法。
			1.改变他绑定的dt 从服务器下载下来，我肯定不能修改服务器，那么就是在datasource 绑定的中间给他加上一列。
			这种比较符合逻辑。
			2.我后面给他添加上去一列。
			循环赋值。
			直接给datasource?
			反正这个时候，好像对datasource操作就是直接对dgv操作。
			但是每次都要循环对datasource操作？
			这种保险一点，稳定一点，感觉应该是可以操作一波的。
			
		他采用的方法是一开始就把整个目录什么的全部下载下来。
		然后再进行操作。最后可能点击保存的时候就给上传到服务器？
		本地和服务器同步操作。
			是否上传？
			如果我采用绑定的话，那么就应该不能同步了。
			因为他界面上的没有通过服务器更新。
			呵呵。垃圾，果然还是要暴力一点。
			每次是什么意思？每次操作都从服务器获取一下这一列？
		两种结合一下：
		1.绑定的时候中间操作一波，
		然后添加新行的时候再给他操作一波那么这样就跟他原来的设计思路一样了。
		他好像有一个绑定的来着？
		卧槽！ 他居然自己画行，我真尼玛遇见了。
		为什么要这么底层。随便用用不好吗？厉害了厉害了
		每添加一次就会触发一次重画
		那么我怎么让他重画的时候，顺便把最后一列也给重画一下？
		重画是为了让左边显示，数字。
		
		找到一个位置，是怎么将这一行给添加进去的。
		accept change?
		那么就找到change的地方。
		
		有可能是在这重载的，
		他是对添加的什么都是进行了重写的
		no
		他有一个单独封装的添加行函数，在里面有一个，
		看他是怎么获取到table？
		然后修改这个table?
		
		先创建
		WriteBackData()写 后面的数据。
		interesting
		
果然啊，万事开头难。
		
		看一下他们是怎么把对话框的数据写进去的。
		读源码
		
		
		
		
		
		
		
		
		
		
			
			
			
		V-->2.是否上报列
			现在已经分为刚立项的和再审或待补报的
			要不要把再审和待补报
			这里再行区分一下，使用 能不能编辑来区别是否已经上报。
			已经上报了的就不能再进行编辑了。
		先添加一个空的列，然后再给这一列赋值。
		clear
	V2.选择多个单体。
		这个一定要研究一下。
		读源码
	-->3.查看一审、二审图纸项目和意见？
		关于审查阶段的，有好几个页面都需要
		这个好难啊
		nonono，
		现在就赶紧做一下，让他默认可以
		图纸？
		能看到图纸？
		好像是另外一个模块的，移植过来?
		
		想想这个是什么功能？
		想起来了。
		
		
		
		
	V4.审查阶段。
	 
	(-)-->5.阳哥的CAD进度条。
		我应该封装成一个类
		这个东西怎么用？
		原理是什么也需要加深理解。
		现在已经可以看到进度条在跑了。
		想想在哪去控制？
		想在哪用？ 想一直跑应该也是可以的。
		。
		那么目前做成一个一直跑的?
		那么我直接用不就好了？
		做这么多其实并没有什么用，回调？理解了一点吗？
		handler？ 多线程？
		现在已经比较清楚怎么玩的了，下面就要看看他想怎么使用，然后再根据实际的使用来进行改写。
		clear
		↑再要求细化一下需求。
		
	6.看一下 规划审查的相关模块。
		记得编码的时候，一定记住这些模块都是能独立的，因为你搞不清楚以后哪些地市有哪些模块。
		
	(X)-->7.页签需要美工美化，暂不处理吧
	站在他们需求的角度来想一下。
		他们只想这个这样做，
		如果全部交给我来，我需要能调配资源。
		现在这个上报工具的有些资源不是我能调配的范围。
		暂时不要调配。也不要完成？
		涉及到资源调配可能有点越级，这不像是我的做法，也不是我的范围？
		但是考虑到我想复制更多的东西的话，加上这个东西是始终需要解决的。
		那么我就是要调配。
		调配不动没有关系，不要让事情卡在我这。
		这个上报工具分为两部分，
		章丘的和浙江的。
		1.浙江的版本主要是由阳哥来把控节奏，
		目前浙江版本他叫我先熟悉一下规划审查的。
		
		2.章丘的目前由他们需求来把控。
		然后这边需求不是很急。
		我已经更新了一个。
		下面还有4个比较难的地方。
		clear
		
		看一下cpu吧。
		
	8.同一家设计院的时候，勘察只显示勘察的目录和图纸
		有点复杂但是问题确实是存在的。
		读源码
	9.设计院传图纸的顺序和电子审图保持一致。
		读源码
	10.导出问题图纸功能放开
	11.还是问一下吧，经度纬度到底是用来干嘛的。
		有了。
	what stuck you? 
	先做那一种？
	一种是跨数据库的
	加模块设计的
	
	一种是读懂自定义控件的。
	
	我想先做简单的。
	那么我觉得还是先做跨数据库的吧。
	虽然跨，但是只要理清思路就可以做了。
	看别人的模块不知道会有哪些坑。
	
	先看整合一些审查阶段的有些什么需求？
		V1.查看回复意见的时候，需要其他阶段。
			主要就是这个
			看一下意见在哪	tbCensorMessageManage
		V-->2.查询项目界面显示。
			clear
		
		3.
		4.
		5.
		
	-->两种方式
	V1.把所有的查出来， 在页面进行筛选，那么你要首先查到最高的审查阶段？
	V2.根据审查阶段来查询。
	需求是选查审查阶段再进行查询。
	
	反正都要查询最高的审查阶段。
	那么我还是走这个好了。
	clear
	
	-->周末加班：
	单体、把字段加上去。
	
	房建还是市政、配目录编制显示市政、房建。是在数据库上面配置的。
	1.首先页面加载的时候就要知道是市政还是房建的
	2.然后根据合格书上面的字段，来进行操作一番。
		市政显示市政的字段、房建显示房建的字段、	
	找到哪个字段表示市政，哪个字段表示房建。
	立项的时候应该有
	所以应该是主表
	现在已经有
	
	现在已经添加了字段。
	其他的先不管。
	给输入框做一些限制。
	clear
	<root><personinfo prjguid="ed493a1d-63ae-471c-ba5d-2ad44b4fd29f" userguid="08472903-b5fa-46c4-8936-4170c77fb9a9" designcode="73698731-1" 
	sexnum="1" 
	username="小兰" 
	idCard="789654123369852147" 
	idtype="身份证" 
	prjduty="审核人员,专业负责人" 
	Remark="" 
	SpecialityName="给排水" /></root>
	<root><personinfo prjguid="ed493a1d-63ae-471c-ba5d-2ad44b4fd29f" userguid="22483f84-a299-4f4f-81c3-041b319635b0" designcode="73698731-1" 
	sexnum="1" 
	username="aabb" 
	idCard="21123" 
	idtype="身份证"
	prjduty="审核人员,专业负责人" 
	Remark="" 
	SpecialityName="结构" /></root>
	clear
	
	-->短信的主管部门不予受理。
	
	这样，今天我先试试做一下阳哥的进度条，然后等待晚上更新了以后再看一下其他问题。	
		今天开始一个一个完成吧。
		专注
		feel a little tired.
		have a rest.follow the schedule.
	clear
	-->整合一下，下面还有哪些任务。
  	V1.添加图纸是否上传列（需要读源码）
		目前都是骗人的。没有每个都进行操作。要进行操作其实也是可以的。
	V-->2.选择多个单体（需要读源码）
		将单条row改成  多条。
		已经找到了在哪添加，
		现在找找是从哪来的。
		可能是采用事件，来绑定添加的。
		调试一下。
		这个是先创建列，然后再填数据
		所以先创建row，只创建了一列。
		
		这个设计不太合理，
		选择人？ 那是因为已经创建了
		呵呵，难。
		
		我能不能让他先单创建一条， 然后再根据后面选择的单体数来判断应该创建多少条、然后将这些数据从
		
		多对多关系。
		
		看一下怎么设计比较好修改。
		
		我尽量使用他的，那么能不能把选择的框放在前面？
		或者我在选择框添加list<里面装row>，选择后外部过去到这个list<row>，然后进行一波背后骚操作。这样根本就不用写太多的代码。
		那么下面找选择row后怎么给currentrow添加值的。
		
		一点马上就创建了新的row，就已经有了一些数据了。
		选择后补充的只是row的一个名称而已。
		真是想不到，居然row是新建的，而不是绑定的。
		
		看来单体名称还是可靠的。后面判断重复也是用的这个。
		
		感觉可以操作一波试试。
		找一下名称是在上面添加进CurrentRow的。
		先在baseForm里面FormClose 写进EcaControls自定义控件里面的。
		我让他只绑定第一个、可是绑定的是控件。而且使用符号分割也有点问题、万一单体名称里面有这个符号怎么办？
		对话框上面不进行操作。
		只显示第一个就好了。
		我现在只添加。
		然后在哪获取进行重复也是个问题。
		重载一下？ 把所有的重载？
		
		直接把他的对话框干掉？
		怎么干？
		
		所有的逻辑都不进行改变。
		我能知道他在哪实例化了这个选择单体的对话框，然后呢？
		让他全部自动操作一波？
		
		试试能不能让他在自己内部操作一波。
		
		 从点击添加按钮结束后开始。
		 每一层，都有上一层操作一波？
		 传的值不可靠啊。
		 null？如果是null，那么就...？
		 怎么内部操作？
		 
		每一个对话框都写一个供外部操作的。
		
		其他的不管了。
		
		干掉也不是那么容易的事，所以先按照自己方法做一下。
		
		那么就使用AddItem()?
		
		因为baseform好像给closing掉了。
		
		那就不给他操作。
		
		他们都继承于同一个 baseForm 但是却是两次不同的实例。
		
		我该做办？
		添加一个新的类，
		然后来封装这个东西，
		
		我不是有一个ECADtaOp...什么的吗？
		我确实有，但是他的权限很奇怪，感觉不很好使？
		clear
		clear
	
	-->(-)3.一审、二审图纸
		我已经三审了我想看到一审、二审的图纸，这里只是让他看一下目录呢？还是让他可以导出图纸，其实问题不是很大。
		
		我现在已经找到了表示审查阶段的属性、
		这个属性是从censorprjinfoForm里从调用服务从数据库查询来的，我要怎么让他支持呢？
		-->我找到调取服务时用到的审查阶段，然后修改一下审查阶段，然后再调取，然后刷新一下应该就可以了。
		cool！
		那么现在找到实际的需求是什么
		在哪个模块？
		目录编制里面？
		还是在上传图纸模块？
		
		如果只是让他看到，
		暂时不处理这个
		clear
		clear
	(-)4.看一下 规划审查的相关模块。
	5.同一家设计院的时候，勘察只显示勘察的目录和图纸
	
	6.导出问题图纸功能放开
	
	（X）7.设计院传图纸的顺序和电子审图保持一致。
		SortNum
	V8.对经度纬度做一下处理。暂时只限制为double 
		
	9.项目页面已经上报的页面让他可以进入，但是不能修改。只能查看。
		及一个type？让不让修改
	
	还有3个，加油！
	clear
	(-)-->导出问题图纸，需要搬砖搬一下，看看他出图系统导出图纸是怎么操作的。
		是出图系统吗？
		现在已经找到了，只调取了一个服务，然后使用了一个toolstripBtnClick ，非常方便移植，
		那么现在需要做的就是，看一下datatable表对应一下意见有些什么区别和关联。
		看有没有必要然后导出就可以了。
		cool，我现在已经知道怎么做了，那么现在休息一下。
		
		地址是从本地配置的。先看看服务器上有没有
		服务器上，没有，但是我配置还和其他一样做一下相同的配置，只是目前先把部分写死。
		看一下用到了哪些url，然后没有再配置。再获取。
		
		查看一下有没有通过guid （singlekey in qmi , wandaorowid in sys ）find PrjNum in sys.
		大致修改了，需要找一个服务器测试一下。
		测试服务器地址正不正确，然后看一下调用服务时传入的值对不对。
		
		这个暂时无法测试，因为这连不上黄岛服务器。
	clear
	(-)-->下面做一下，上报后的项目可查看的功能。
		构思：我已经有这个是否可以编辑的值了。
		两个部分，EcaSdk和上报工具。EcaSdk里面已经有了。上报工具baseForm里面加一个属性。
		然后进行区别对待应该就可以了。
		将所有可操作的控件，关乎修改的，全部Enable.
		还有后面sdkTool三个模块。
		
		应该可以了？
		
		下面进行测试一下
		clear
	-->勘察设计目录	还有最后一个问题是项目勘察设计为同一家的时候显示了混合的目录和图纸，这个想想，怎么操作？
	首先这个都是在EcaSdk里面，应该也不是很难。
	大概就是调取服务的时候多做一个限定的值区分值，看怎么区分他是勘察还是设计。
	找到在哪调取的服务？
			然后一下调用服务后，看过去哪些可用的字段用来加以区分。
	分析：这个问题应该是根据设计院唯一码获取信息，在储存的时候，只储存了唯一码的标识来区分。
		ProjectInfo.cs/row 211
	
	那么明天把这个给做完？
	然后下个周让他们把需求文档发我一下，
	clear
	
	V-->为什么他会有章丘/青岛，又有黄岛？
	那么就是他给加上去的。
	我确定一下全部改成黄岛。
	可以先修改一下名称，区号再说。
	clear	

	-->目前工作栈：
		1.批量导出问题图纸功能待测试
		
		2.区分勘察设计目录 需要测试项目，然后做
		
		3.查看功能，需要测试。
			使用衢州全流程测试不行，因为没有已经上报状态的
			搞一个上报状态的试试。
		V4.别忘了加字段subprj单体负责人？
		clear
-->4.新的需求文档。
			1.添加通用意见。
				先看一下通用意见有些啥字段。
				可以玩数据库了，尝试给测试项目加一些意见上去。
				
				
		5.目前比较大的一个是，读取项目的类型，是否属于房建还是市政
			然后来区分显示市政还是房建的模块。
			
		6.第二个问题是 最好
				
			
		
		
		看来测试只能在15上面测试了。
			已经配置了15的地址
			那么现在开始测试？
			对V
			
		有很难解决的吗？
		粗略看了一下，并没有。
		那没有关系，周五之前给他全部解决掉。
		
		913700001630430053
		e1027a46-dcf1-4fd0-a28f-fbf8f2ebdf97
		1
		clear
	-->后面记得处理的
	1.资质等级，和孟哥交流一下。
	2.做成release版本，只要是服务器端把地址配好的地市，全部做成Release版本。
		Release版本有些什么？ 那么就是固定的地市地址了。直接是从配置文件里面读取出来的。
		然后直接写死？
		每次切换地市的时候，地址配置就会修改一遍。
		因为郑易那边没有在服务器端把地址完全配置好。没有DATAURL等。
		
		章丘的有
		
		获取地市极其地市编号的时候，可以通过调用服务 ccirConfig.cs 92行获取到对应的地市名称及编号。
		
	1.查询怎么 2.模块sql 3.项目状态 4.为什么 BeginDate ,    s受理时间没了，加一个资质表，有几个填几个。	
	
	是否上报列不是很准确、其实是允不予许 列。
	clear
	(-)-->3.未经过主管部门受理
		在QciWeb里面，其实大致知道是什么原因。
		孟哥的代码好修改吗？
		修改起来应该不会有什么问题，
		但是为了谨慎起见，摸清楚情况再行修改，
		需要了解的情况：
		1.哪些地市需要修改
		2.哪些地市为什么这么个操作。
		3.只能说好难。
		到底是不是直接选择了图审机构后，直接设为已受理的？
		就抓住这个条件，如果是，我肯定是能这样修改的。
		代码都是通用的。一开始一样的没有温州。
			慧文的描述：
			项目立项的时候就直接是 010状态，但是时间为空，然后这当然主管部门显示未受理，然后再进行受理？
			受理两遍？  两个字段不对应：1.已受理，2受理时间。
			我立项之后就是已受理，然后没有受理时间。
			然后有受理状态。
			那么造成的原因是什么？
			根本原因就是已受理。这里不应该是已受理。
		知道业务逻辑，然后进行修改。
		那么照孟的意思，这里不是用010type?	有两种办法
		1.理清他的逻辑，然后用事实打他脸然后还帮他修Bug？这倒是像是我以前的做事风格，解决问题第一，但是现在我不是很乐意。我有自己的首要工作，如果有时间再帮他看吧
		
		2.不用管，这不是我写的
		
		ok
		反正现在温州已经出问题了。
		V那么我就把我的代码撤回？  
		已经撤回代码，这个Bug如果有“足够”的时间的时候，我再进行修改吧。
		clear
		
-->		今天检查测试，玩玩数据库。
		V1.查看功能
			把状态修改为已经上报。
			前三个页面看起来有效。
			后三个有点奇怪。逻辑不一样的，他是允许修改，但是也是有一定的限制吧。
		还有一个功能是通过审查阶段来查看材料？
			材料暂时不给他做？ 1.好像说的待确定，2.好像没有什么必要。
			
		V2.我当时是否上报就是用来区分要不要点。
			现在都可以进去。
			只是能不能修改的问题。
			虽然有点不合理但是暂时不予修改。
		（-）3.批量导出问题图纸功能待测试
			73698731-1
		ed493a1d-63ae-471c-ba5d-2ad44b4fd29f
		二审
			改测试的时候报错，问题比较难办。
			休息一下。好累
			1.可以确定，不是我函数的原因。
			
			2.看一下是不是服务的原因？
			我怎么测试？
			看来也不是我本地的原因
			看来要问一下了。
			暂时不测试这个东西了。
			鉴于电脑今天出了点问题。
			郑易那边调用的时候没有问题。
			我这边调用的时候有问题。
			
		4.区分勘察设计目录 需要测试项目，然后做
	一个一个解决。
		乱了乱了。重新整理吧，我已经精疲力尽了。
		
clear

------------
	-->9/20号：
	工作栈：
	work stack：
	V-->1.导出错误图纸功能。
		如果不知道是什么原因，先在本地来一套服务？
		关键是有些服务没有，这很尴尬。
		第一个服务通不了，本地是可以被调用的，
		远端无法调用
		think about it 
		那么我能不能在本地进行试着调用一下？
		如果想尝试，那么可能需要在本地部署一套导出图纸的代码。想想，感觉会很难。代码都在这，后面的代码应该不会影响。那么我在本地想通过第一个服务再说？
		我可以试着这样做，伪造一条数据和远端的一模一样。
		然后再走后面的流程，照理来说，其他服务也是调用不通的。
		所以问题的关键还是在于调用服务的问题，我能不能修改一下，在其他地市试试？能不能？
		我直接切换一下地市不应该也ok的吗？使用一下哪的？
		看一下哪有意见回复的地方吧。
		先看一下章丘有没有
		这个导出图纸功能如果测试，可以能需要修改服务和数据库，不能在正式服务器测试。
		那么现在就只剩下 青岛15和衢州全流程了。
		怎么办？
		青岛15有问题，衢州全流程。
		查看一下需要哪些服务？
		还是在衢州全流程上面测试吧。
		测试的时候，
		目前这些项目没有，那么我
		1，调通服务，2，伪造数据。
		调不通，在全流程上面还是调不通，那么就有问题了。
		报相同的错误。
		我的服务，是从青岛复制过去的，从章丘
		
		我现在试试从其他地方复制一下试试。
		
		青岛黄岛？
		
		复制了其他地市正确的可以调用，证明本地编译的版本有问题。
		clear
		目前看起来是正确的了。
		可能还有的问题就是根据审查阶段导出的问题，这是webservice里面，需要后面测试。
		
	2.核对一下还有哪些需求。
		 
	3.我这边的问题：
	
		2.关于分院版的逻辑。
		
	-->4.勘察设计目录	
		项目勘察设计为同一家的时候显示了混合的目录和图纸
		都是在EcaSdk里面
		大概就是调取服务的时候多做一个限定的值区分值，看怎么区分他是勘察还是设计。
		找到在哪调取的服务？
		然后一下调用服务后，看过去哪些可用的字段用来加以区分。
		分析：这个问题应该是根据设计院唯一码获取信息，在储存的时候，只储存了唯一码的标识来区分。
		ProjectInfo.cs/row 211
		怎么修改？
		这个可能会涉及到分院锁的问题，同一家设计院，又扮演勘察又扮演设计，但是他们肯定是不同的分院对吧？
		问清楚再处理。
		clear
	
	5.what's the next?
	-->V6.资质等级，建表
		设计院资质等级，好像不是很着急。
		毕竟他们是在试运营。
		我也可以在需求的时候提出来。
		具体怎么样，有些什么用。
		报审项目的时候会有一个资质。
		这个有关系吗？
		加一个资质表？
		外联一个。
		q1:有些什么资质。
		q2：资质的作用。
		clear
		
	-->7.项目类型的区分，是市政还是房建。
		这个东西难吗？不难，只需要看一下项目里面肯定有这个字段，然后。。。
		关键是需求是不是明确的？
		只知道大致，
		我现在的做法是没有进行区分，如果要区分，加个PrjType属性。
		看一下PrjGuid是属于哪就知道这个属性属于哪了。
		cool
		
	clear
	-->three days least:
	有哪些任务？
	X1.新的需求，等他们整理出来，我估计不剩多少时间了。
	X2.prepare for brother's wedding.
		planning for NationalDay travel.
		meet
		熟悉一下eca建模工具，试试能不能使用工具来快速搭建网站
		维护应该也挺方便的。
		修改功能不好使，自定义功能
	V3.对于分院版的问题。他们说想在十一的时候上系统，那么现在就是需要在本地库进行一下测试了，他需要无缝数据对接。
	V4.那么现在就是需要考一个库到本地。然后测试一下。
	不是本地是服务器。
	新拷一个？
	拷哪的？
	V5.东西也不一定全部都需要我来做。例如分院版这个东西可能阳哥会亲自来操作一波。
	last:那么就是他们有问题就给他们解决问题。
	clear
	V-->现在先做一个是否上报的判断吧。
	本来就有是否上报的区分。
	待送审的会在待送审项目里面，上报 后会出现在在审活修改中的项目里面。
	确实上报后只修改了一个Unit1IUpload值。
	在加一个假的列也不是不可以的。
	clear
	
	-->规划审查模块是怎么回事，没有测试过。
	V6.在地址的配置里面记录一下上次登录名称和密码。
	7.
	clear
	V-->资质等级这么用一个外联表存储？
	可能需要两张表
	1.资质字典表
	2.资质存储表，资质主键、资质dic主键？、
	3.tbcorpbasicinfo、存储资质存储表的资质主键？，不，啥也不存，直接leftjoin 资质存储表，where t1.FullCorpCode = t2.FullCorpCode
	UI上面这么设计？
	因为有四个资质等级、然后四个编号。
	
	首先我查询的时候，查询出来的格式是固定的。
	有四个资质等级名称、然后有四个资质等级编号
	关键就是他外联表里面
	
	看来网上的不是很对，
	想想怎么操作
	来一个基本操作然后拼接？
	
	我想要的结果
	fullcorp...t1 t2 t3 t4 c1 c2 c3 c4
	
	现在有的：
	tb1.fullcorpdode
	tb2.t1 /c1
		t2 /c2 
		t3 /c3 
		t4 /c4
		我现在可以查询出4行出来，那么我怎么知道列呢，
		那么我只能select top1
		clear
		
	-->1.根据服务来读取编号对应城市
	2.做一个test.txt ，存入设计院编号
	然后用来获取人员。
	3.选择人的时候，如果勘察设计选择同一个人。
	可能判断不够。正常来说，也有可能勘察设计为同一个人。
	后来想想再怎么进行修改一下，像ei一样多做一点判断。
	4.EcaUpSdk里面可能需要一个全局参数来判断是给浙江版本使用还是章丘等版本使用的。
	clear
	V-->5.无法删除本阶段目录图纸。
	未获取到远端censorID 估计是存储过程没有执行好，先查看SYS库，或者。。。找到存储过程
	现在远端有了？ 那么就是submit的时候好像没有给他弄上去？
	clear
	-->所有的新需求，全部放在双十一后面，今天用来解决问题。
		1.将qmi库的单体和sys的单体使用rowguid绑定。让删除单体，修改单体名称的时候，sys同时更新。
		2.删除单体和删除图纸都差不多的逻辑。
		
	记录遇见的问题，和需要优化的
	不再撰写新的功能和需求。
	clear
			X-->1.进度条  暂不处理。
		进度条做成通用的
		先把它做成一个简单的假进度条。
		然后要求做成一个可以移植的。
		 不知道在cad上面做进度条和其他的软件上面一不一样。因为cad上面可能会使用工具条的区别。
	后面再处理这些。	
	clear	clear
	clear

	-->9月13的。
		自增列取消、资质等级。
	9.5的
	
	V1.章丘和黄岛的被升级成了同一个xml配置	暂时不管黄岛的。
		20973317-942d-4e0f-924f-7fa380f221ec	一审		V1.先看看阳哥，桐庐的问题
	2.再看看导出问题图纸。这个可能要看一下。
		章丘的没有办法实现。
	V3.衢州版本应该是可以的，如果没有其他问题，跟阳哥说一下。
	V4.黄岛注册后设计院没有省份。这个应该是设计院直接联系主管给通过了，没有在上报工具上发起审核。
	
	V1.衢州正式的有两个问题：
		V1.VPLAN 规划审查的表、V存储过程、V服务
		现在就差一个在哪里立项的问题。
			需要测试吧这个模块。
		V2.导出错误图纸的问题估计应该是储存过程写错了。查询不到。
		衢州的正式试一下。
	clear
	
	-->V--tbPrjDesignEconUserInfo
	V--tbCensorSubPrjInfo
	clear

	-->竣测合一
	有两个模块需要做
	先选择人防还是消防的 
	点击右边的  上传测绘图纸，
	弹出文件浏览框选择dwf
	将选择的dwf挂到左侧选择了的 是人防还是消防，
	如果没有选择，提示用户选择
	
	代码逻辑：
	首先进入命令
	最好是使用一个类的静态函数完成。
	看一下他里面其他上传图纸的是调用了哪些服务，哪些类的函数
	能用的就用，先读懂再说。
		首先上传图纸的肯定是没有的，
		然后假设我已经选择了文件，
		怎么将文件上传到服务器？
			转化为字节流、
			然后调用服务，将字节流传输到服务
			这个地方看一下EcaUpSdk上传的逻辑
			
			这个东西最多能给我提供的，估计就只有服务地址？
			不止，可能直接提供了服务。那么我只需要把文件转为字节流然后调用就可以了。
			看一下服务需不需要修改，如果不需要，那么不用管服务和数据库端的事了。
			
		
	限制选择文件格式的提示框
	clear
	-->10.10需求
	1.想不同地市显示不同界面。
	2.新旧系统数据库对接是否完全的问题
		只要上报到服务器上的，照理来说都可以的。
	3.设计到人的，需要些什么字段。和袁传冰对接。需要些什么
	
	新需求？
	对一下？  可能没有什么需求了，他们自己看吧。
		把他们提出的需求分成优化项和新功能项，
		优化项后期再进行优化、新功能
		1级需求是bug
		2级需求是新功能
		3级需求是优化项
		按等级来分配时间完成。
		clear
	暂时不考虑他们的新需求。
	等确定好了再说，先做重要的部分。
	
-->	最主要的就是分院版的意思，这个交个阳哥吧，我已经不再主动handle这个了。
	.1.这个分院的逻辑使用锁号区分，到时候做一个关联就行了。
clear
	
	-->阳哥的意思应该先把其他功能完成，这个东西，可能要后面再做。
	
	目前上报工具除了阳哥的需求和bug，所有的暂时不予修改。
	先把竣测的两个模块完成了。
	
	怎么获取到node的？
	根据prjnode.name(也就是prjguid获取的)
	然后调取服务获取xml
	单体
	SubPrjName
	
	服务要单独写，代码逻辑看一下规划审查的。
	然后具体的要考虑一下 他读取的时候是怎么读取的。
	那么这么可能就得结合服务、储存过程和数据库来看一下怎么设计了。
	
	估计添加和获取数据都需要写。
	
	他没有说时间，所以周一给做完就行了。
	弄清楚再做。
	如果觉得效率不是想很高，那么先轻松一点。
	
	他下载的有了，看一下是什么功能
	结合一下吧。
	
	他们的文件服务基本都是一样的，应该是copy的的代码，看来应该是配置的原因吧。
	那么我需要做的也是copy代码单独创建一个服务，
	
	既然有了添加，那肯定应该也有删除咯。
	没有关系，copy一下就ok的
	
	那么上传文件的问题应该就解决了。

	上传文件的时候需要的字段，根据获取的来看一下。
	
	有三张单独的表，直接看一下cs是怎么使用的不就ok了。
	
	哪些有用到
	
	两种错误，上传错误和添加信息错误。
	上传分为两部分
	
	为了方便下周一快速完成。
	
	调用服务的时候传了 fileguid
	单体guid等，可能查询的时候，就根据prjguid，然后查询出来以后，再根据其他信息筛选，获取的时候是获取单张还是prjguid 和一个 fileName.
	clear
	-->规划审查的、上报工具的。
	全省升级，需要哪些字段。
	
	上报工具的数据库、服务、工具？
	先不管地址的问题。  只需要把数据库脚本等执行上去
	
	规划审查。
	
	目前用的是去衢州的
	clear
	
	两个部分，先看一下他上传文件到服务器的代码逻辑。
	----------
	V-->根据锁号查询项目
	查询的时候放在储存过程端还是放在客户端进行筛选？
	
	储存过程吧，能放储存过程都放在储存过程里面。
	添加字段、
	
	
	C8FAA5875B42DF27
	
	上报工具没有总院的，所以查询不到有一些项目先不管。 因为这些项目没有记录锁号。
	上报的时候都需要
	clear
	-->在EI上面增加规划方案联审的东西。
	V先处理完这个锁号的问题。
	然后再问一下阳哥。
	
	方案联审、加一表、如果图纸合格、要放在一个表里面。
	专门的表、文件服务、 布一套文件服务，下载合格文件。
	
	rowguid.和项目id。 
	通过guid.关联、  设计院下载的做一下，阳哥处理图审盖完章上传的。
	clear
我现在的任务：
1.上报工具浙江本版本新需求（主要还有些界面修改）
2.EI方案审查，设计院能够获取到盖完章的图纸功能
	-->先做上报工具的
	放在哪？
	设计院获取盖完章的图纸，应该是归完档的图纸，
	
	V1.做在哪
	2.项目查询没有区分审查合格的和在审或者修改的项目。后面改
	3.根据选中的项目GUID来下载盖章后的图纸。
	
	点击业务办理按钮直接让选择 本地目录
	感觉可以直接加两个字段好了，是否合格，合格日期
	
	表，Plan
	跟图纸有关联
	
	有一个阶段表
	一个图纸表
	参考施工图  合格图表、阶段表
	
	合格图表：
	tbPlanQualifiedDrawingInfo   
	列：
	（表结构和 tbPlanDrawinginfo 基本一致）
	PltId PltGuid PrjGuid SubPrjGuid SpecGuid PltName FileExtension InsertDate DesignCorpCode Stage
	
	先添加单体、后添加专业
	阶段表：
	tbPlanPrjCensorPhase
	CensorPhaseNum(阶段编号),CensorPhaseName(阶段名称)
	这个阶段，
	
	我想要用原来的，就得把原来的规整一下，才能使用新的参数。
	总比我复制粘贴得好。
	1.规整 V
	2.嵌入新的
		两个服务，
		1.downfile服务，
			不用管代码了，直接不要代码，直接copy
			然后修改一下名称和文件目录
		2.查询服务，
		看一下要些什么东西，
		下载的时候使用了些什么东西。
		getQualifiedFileName.
		分不分审查阶段？
		不分
		那么就是刚才创建的表
		单独写个服务？
		也行，看能不能在哪获取
		加在 PlanCensorWebService里面行不行？
		这个File的地址没有关系
		
		124219 
		{5981bbce-7c74-45d2-8412-14aa46cfc699}
		
	3.调整查询语句。
	http://220.191.238.239/PlanCensorQualifiedFileServiceIn/FileService.asmx
	http://   220.191.238.239/PlanCensorFileServiceOut/FileService.asmx
	clear

3.竣测的添加图纸和报告两个模块
	V绍兴的服务和数据库明天再修改。 1
	-->下载合格图纸
	
	
	-->舟山、台州
	
	设计院  
	
	第二次多线程遇见 BeginInvke  
	这个错误太难找了吗的 
	给出的错误提示根本不对应。
	显示 在创建窗口句柄之前,不能在控件上调用 Invoke 或 BeginInvoke
	其实错误是因为把列给隐藏掉了。
	
	ftp 是默认的、根据ROWGuid区分
	
	clear
	对话框  放guidVIRW 图名 图号 rowguid    勾选 然后下载
	
	他审查意见应该和图纸可以进绑定？
	
	那么现在就做进行优化的
	V1.做一个界面
		
	2.将之前的一并优化一下？
		能优化吗？
		进行筛选，看一下获取到的dt是什么，然后进行筛选，说不定是可以进行筛选的。
		强制删选？ 或者看一下查询的时候哪里有问题。
		查一下dt
		dt应该是查询了所有的 图纸信息，然后存储的时候，可能没有记录数据
		而是直接把图纸放在单独的错误图纸目录。
		可能他那边出图系统也做得这个样子，所以先不改了。
		如果要优化，那么可以优化到多出一个选择错误图纸的页面，和规划审查一样。
		前提是需要修改查询出来的dt，那么我查询出来的dt前提是需要在数据库里面有区分和记录他们的字段？  这个存入数据库我不知道怎么玩的，标记错误图纸存入了哪些字段（审查阶段，标识错误值。） 
		1.如果有标识错误图纸的值，那么我只需要修改一下存储过程就行了。
		选择图纸来导出的功能呢？
		可以优化，但是暂时没有需求就别往下面做。
		处理一下比较紧急的问题。
	图号先不管。
	PrjName	pltnum	pltname	PltGuid OkPltGuid	FileExtension
	
	ed48a064-6f9a-489b-b963-09eccc1aee99 124219 一审
	
	
	有可能是地址改了？
	他没有修改地址，那么有可能是我这边的服务修改了？
	
	怎么测试呢？
	
	服务器上面有没有错误图纸
	
	http://220.191.238.239/ECASignatrueServer/PltManageService.asmx"
	"http://220.191.238.239/ECASignatrueServer/PltManageService.asmx"
	DownCensorPltFile
	"http://220.191.238.239/ECACensorFileServer/FileService.asmx"
	DownCensorPltFile
	"http://220.191.238.239/ECACensorFileServer/FileService.asmx"
	
	"","14d57a6b-c550-4618-b4b7-53edc6d72d2f.pdf"
	"14d57a6b-c550-4618-b4b7-53edc6d72d2f"m_strPjrGuid
	
	"04838a09-1a0f-4569-9ae4-2dcc7fbf32ca","04838a09-1a0f-4569-9ae4-2dcc7fbf32ca.pdf"
	"04838a09-1a0f-4569-9ae4-2dcc7fbf32ca" m_strPrjGuid
	
	"7c0cdf86-5c96-44d7-97ff-06d6a0080a31"
	clear

	delay-->1.上报工具浙江版新需求。
	2.EI方案审查。
	3.竣测加两个模块。
	
	趁现在一口气，先把竣测的两个模块做了吧。
	因为阳哥说，这个竣测的文件服务，也是单独的FileService和Service.
	
	增加对应的图纸名称、
	然后导出问题图纸和意见 全选择 plt.pdf  下载 
	clear
--> 优化规划审查
	V1.还原数据库和服务到 全流程数据库
	V	图纸等
	V2.然后在本地添加一个Debug版本来修改优化规划审查导出图纸和意见的功能。
	3.功能描述：
	
	V-->添加一个阶段的
	审查阶段、
	
	V业务办理默认显示添加图纸
	
	V写一个上报、通知主管部门审查“”、点击上报之后  
	
	V阶段表里面记录上报时间，住建部门审查
	
	V没有的阶段的时候，上报（主管部门没有审查结束的时候，）
	
	审查结束、记录审查结束时间，‘
	审查结束、有没有记录项目状态（）？ 是否需要二审，什么的？
	现在主动权在设计院、只要审查结束、就可以自主添加审查阶段。
	
	
	
	下次上报的时候添加一个二审阶段。
	V
	clear
	4.先把这个模块完成了，后面对施工图审查意见的优化再说。
	
	今天先做一下规划方案审查的。
	
	V今天先把规划方案审查的做了试试。
	V做了添加图纸模块
	V主要修改了存储过程和C端
	V待修改S端
	
	有两个：
	V1.完成页面添加图纸模块
		需要布置到服务器进行测试
	
	2.完成选择勾选下载不合格的图纸
		
	是不是要加一个根据pltGuid获取问题图纸的服务？
	使用的是上传的时候使用的图纸。
	
	{59c3c41a-ed8d-457a-9912-8e1dc169ffed}
	8dda74f6-6479-4229-9009-eea9785d9339.pdf
	{System.Web.Services.Protocols.SoapException: 
	
	服务器无法处理请求。未能找到路径“E:\ccir\PlanCensorFilePath\ftp\8dda74f6-6479-4229-9009-eea9785d9339.pdf”的一部分。
	
	"http://220.191.238.239/PlanCensorFileServiceIn/FileService.asmx
	{59c3c41a-ed8d-457a-9912-8e1dc169ffed}
	8dda74f6-6479-4229-9009-eea9785d9339.pdf
	
	两个问题：
   在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   在 ElecTuShenCilent.PlanFileService.FileServer.GetFile(String virtualPath, String fileName, String& strMsg) 位置 F:\建设数字\公司代码\test新版上报工具\EPDMSGT\ElecTuShenCilent\Web References\PlanFileService\Reference.cs:行号 126
   在 ElecTuShenCilent.SignDownFile.DownPlanWrongDrawing(String strFileName, String strLocalFileName, String& strMsg) 位置 F:\建设数字\公司代码\test新版上报工具\EPDMSGT\ElecTuShenCilent\SignDownFile.cs:行号 67}
   
   这个获取服务可能是错的，
   但是还有一个问题是，服务器上面到底有没有这个pdf的图纸
   
   http://220.191.238.239/PlanCensorFileServiceIn/FileService.asmx
   {59c3c41a-ed8d-457a-9912-8e1dc169ffed}
   
   http://localhost/PlanCensorFileServiceOut/FileService.asmx
   clear 
   V-->绍兴应该是可以的，数据都一样，只是图纸可能有点问题，但是无关紧要。
   那么现在要做的
   1.先将svn整理提交干净，试着撰写脚本的时候，不让鑫越做太多的工作。
   sys的
	看来今天的任务得是翻译脚本的。
	1.qmi库需要翻译
	qmi基本应该没有什么服务需要翻译的
	那么就先把qmi的翻译一下吧
	2.sys需要翻译
	sys不一样，应该有很多需要翻译
	
	先翻译服务然后再翻译脚本。
	
   2.看一下浙江版需求
	recbug:章丘修改联系人方式的时候，没有保存TitleLevelName1
	
   3.然后下面是竣测合一的两个模块
   
   一个一个的来。
   V问题有点严重、还是只修改上报工具的比较好，
   V其他的ECA非上报工具的不予修改。
   1.还差最后一个函数
   2.然后关于sys的存储过程，其他的不用翻译，以后可能会要求翻译成oracle的，
   有一个函数呢？是下载图纸的估计得看一下，获取图纸信息的问题。但是应该问题不大。主要是查到图纸的名字。
   
  那么下面
  需要的东西？
  浙江版本的需求？
  
  先看一下分类的问题。
  然后将脚本翻译成mysql
  然后再继续完成下面的。
	项目负责人是EI自己选的项目负责人。
	看一下
   ProjectLinkMan
   ProjectLinkPhone
   
   DesignCorpLinkMan
   DesignCorpLinkPhone
   EconCorpLinkMan
   EconCorpLinkPhone
   一个问题是一个问题，
   后面的问题是后面的问题。
   比较紧急后面处理。
   BargainNum
   BargainNum2
   BargainSignDate2
   
   这个BargainNum是什么鬼
   
   EI的单体是怎么添加的？
   怎么解决这个问题？ 问一下阳哥吧。
   看一下原来的EI到底是怎么关联的
   瑞哥在后台的单体都是新添的。
   
   如果不是
   1.测试
   正式、测试
   如果是在测试系统还需要在测试系统进行布置
   上报工具使用 数据还好，主要是其他的，网页、图审等用的。
   
   实际、
   界面和逻辑、
   测试这边也需要做好准备。
   
   环境的问题布置问一下阳哥。
   
   如果要更新，务必注意一下、考虑到现在有的章丘和黄岛的系统
   有些字段的存储是不一样的。
   1.从上报工具进行控制、不对，还需要区分网页端什么的逻辑修改没有。
   
   那么按照豪哥意思是 先完成逻辑的，界面优化什么的，可以放在后面的。
   
   --因为EI添加单体的时候没有保存设计院的designCorpcode
	所以找不到单体
   想想逻辑是不是在主表里面实现的?
   我首先有设计院的
   。。。
   但是我存在
   那么现在记录的为空，那么就让他看到全部的。
   124219
   华邦
   rec.PrjBaseInfoForm.cs 71行修改需要更新章丘黄岛数据库
   根据锁号查询的项目的功能也不能对章丘黄岛进行修改。   
   
   Type不用修改
   主要现在查询 
   未上报的项目（不能叫未上报的项目）准确来说新建立的项目
   逻辑：
   全新的项目、上报不等于1也有上报等于1、
   原来的逻辑是最初的上报，现在是设计院想区别自己有没有上报。 如果我查询出来的（这个东西我根本没有办法修改？）除非，未上报的时候date为空，也就是图审添加阶段的时候，把data置成了空。没有这样做。
   我想想怎么能反应设计院是第一次上报还是后面的上报？
   这个字段不够啊，除非我再找到图审是否可以受理前的判断。（图审是否受理根本就没有判断）所以如果现在给添加正确的是否上报、根据原来的逻辑字段根本无法实现。
	那么依照阳哥的逻辑：
	上报工具施工图需求部分
	
	项目负责人。
	
	
	
	V单体没有过来。
	
	
   
   
   
   审查阶段没有、是否受理不为1。 
   在审或者修改的项目、上报等于1也有不等于1的？、图审是有阶段的。
   {d932ea3b-6c74-401b-bb8d-4c77b0844cc
   124219
   clear
   
   -->单体的row_guid抓紧改一下。就一个GUID的问题，因为目前还没有遇到需要使用的时候
   clear
   
   X-->新的分栏问题
   待审与在审或修改、待送审、图审是否受理来界定。待送审加上图审不予受理意见。
	
	图审是否受理取消，是否上报修改成、
	图审是否受理标题头修改成	是否开始审查。
	
   （）主表不予受理的意见。
   所以我是否上报列根本就无效，我可以留着，并且不用改变
		我在在审或者修改的这一栏（第二栏）我可以不变，因为肯定是全部都是受理的。
	那么我查询第一栏的时候，区分(where)就不是isupload了，因为需要所有的isupload是查询出一个值了(select isupload = case 1 then '是' )。isupload'1234还是需要的
	
然后我的区分是，图审是否可以受理。（好难，不要通过执行储存过程来获取，直接在里面进行查询好了。）
	这个问题有点大。花费时间比较多。
   
   clear
   :暂不处理分栏
   
   "System.InvalidOperationException: 客户端发现响应内容类型为“text/html; charset=utf-8”，但应为“text/xml”。 服务有问题，解决方案：换个服务。
   
   V-->先copy一下网页端下载和上传附件。  或者EI端的上传和下载附件。
   现在整套服务已经有了，
   我在目录下找一下他上传下载附件的目录，我如果要
   他还有一些另外的参数、
   我要么引用他的服务、
   我肯定要把它的数据也相应的插到表里面去。
   关键是使用自己要和他们兼容。
   怎么个兼容法？ 除了数据外，估计还需要自己开发一个FileService。
   
   感觉不太好看看服务 可不可以兼容
   看一下传输了些什么数据库
   
   自己写吧，只要是文件在哪就好说，毕竟别人的代码难抄难理解。这个追求效率，那么想一个最快的方法。
   （压缩和解压的问题。后面再说）
   下面做：
   1.查看一下读取和附件的字段，主要是查找到附件相关的其他的不用管吧，看一下保存的文件名是什么，怎么组织的。
   2.可能的话需要修改FileService，也有可能不需要修改。复制一下就行了。
   3.
   以后升级怎么搞？
   mmp
   照理来说，背景图片应该也是可以使用程序读取的。mgj不怕。到时候就用程序读取一下。
   4.给他们配置一下服务器。
   在15上。看一下哪些需要修改。数据库给他们还原衢州最新的，然后测试一下吧。
   这个时间确实有点急，因为有几个功能还是比较麻烦的。
   我只是需要附件。
   我能不能布置两个服务来获取附件？
   031aca9d-b5eb-4fb8-8587-3b628d1bbef8
   http://118.178.119.15/QDQciWeb/Default.aspx
   
   现在先添加一个服务试试 
   用最简单粗暴的方式做一个。
   
    <add key="AffixPath" value="E:\CCIR\施工图（电子审图）\服务\Upload\" /><!-- 存储附件文件目录 -->
   
   http://220.191.238.239/ECACensorFileServerAffixIn/FileService.asmx
   
   下面就是找一下  名称就好了。
   他的上次下载附件名肯定保存到了某个位置
   
   00e04991-80f2-49ee-a9b0-88d960595399.pdf
   
   PrjUserName
   PrjUserPhone
   
  先看规划审查的。 我现在先要做的是新功能，先把文件名找一下找那个表能找到，然后再看下其他问题。
  tbCensorMessageManage
   comm.Parameters.AddWithValue("@Title", strTitle);
                comm.Parameters.AddWithValue("@ServerPrjNum", strServerPrjNum);
                comm.Parameters.AddWithValue("@CensorNum", strCensorNum);
                comm.Parameters.AddWithValue("@CensorName", strCensorName);
				
                comm.Parameters.AddWithValue("@Mark", strMark);
				
                comm.Parameters.AddWithValue("@FileName", strFileName);
                comm.Parameters.AddWithValue("@ServerFileName", strServerFileName);
				
                comm.Parameters.AddWithValue("@FileName3", strFileNameKc);
                comm.Parameters.AddWithValue("@ServerFileName3", strServerFileNameKc);
				
                comm.Parameters.AddWithValue("@FileName5", strFileNameUnit1);
                comm.Parameters.AddWithValue("@ServerFileName5", strServerFileNameUnit1);
				
                comm.Parameters.AddWithValue("@FileName7", strFileNameUnit2);
                comm.Parameters.AddWithValue("@ServerFileName7", strServerFileNameUnit2);
	问题是他为什么 会有这么多file?  关键是FileName
		上传附件、我是家设计单位？
		下载附件、我又是哪家设计单位？
		3
	找到了。mmp
	然后就做上去吧。
	勘察和设计为同一家的时候，这个暂时试着使用专业来区分？
	能区分个毛线啊艹
	
	下载的代码基本写好了，
	明天再撰写一下上传的逻辑。
	然后继续处理其他
    
	测试了一下，目前没有报错。
	将上传的逻辑一并书写好了后再测试吧。
	V服务应该不会修改了。所以先把服务布置到15上面去。
	
	修改附件服务
	
	删除附件信息
	审查阶段、项目号、设计院编号、
	  
	
	
	
	后面记得加一个isOnlyCheck

	V那么本地需要修改吗？ 不需要吧？
	V本地修改完成，应该不成问题，现在找一下。为什么没有更新文件名的问V题。
	
 Va99a74eb-48a6-4b42-9d2f-abd4c3741805.XLSX

V问题更新的时候没有更新得掉。

"<root><designreplyaffixinfo
 DesignCode=\"013896\" PrjGuid=\"615bcc85-ed18-42b1-a90e-6de33a53cbe8\" CensorStageName=\"一审\" FileNameDesign=\"aaa.xlsx\" ServiceFileNameDesign=\"5be3b247-17e6-437b-8e1d-385633a1f95d.XLSX\" FileNameEcon=\"\" ServiceFileNameEcon=\"ee21ef83-c3a4-46d5-ae86-1ac3858b9337\" /></root>"

 上传的时候，没有传到勘察的name？
 
 勘察的FileName是多少？
 这里没有给到勘察？
 
 逻辑有问题，如果我只是勘察的呢？
 
 下载逻辑有问题吗？
 好像没有，上传逻辑有问题。
 因为我上传的时候上传成设计的了
 所以我还需要在后台判断一下，
 如果勘察的文件名为空，那么我把设计的传过来
 在存储过程实现应该就可以了吧。
 逻辑错误是在 cs不是在存储过程。
 所以在cs怎么解决？
 如果只有一个文件，我勘察和设计都一样行吗？
 不行
 所以我还是需要提前判断一下，如果等于设计，如果等于勘察，这样最为准确了。
 下载的时候如果也有两个呢？都会下载
 如果只有一个，并且如果等于勘察，勘察的FileName就等于xxx
 如果两个都是，关键我只传 一个呢？ 
 我怎么知道他是想传给勘察还是穿给设计的，
 那么唯一的办法是勘察设计都给他好了。
 那么图审就可能会收到多余的。
 所以这样也不好
 现在的逻辑是如果两家是同一个院，上传一个附件，那么就给他挂设计下面就行了。
  clear
   clear
   
  --> 上传的时候使用http://118.178.119.15/QDECACensorFileServer/FileService.asmx
	webconfig指向  服务：CensorFileServer/然后 指向目标目录 
	获取的时候  直接引用和 错误图纸那个一样的地址
   
   需要新增两个服务，并且最好把服务名称修改一下。
   
   然后执行数据库语句
   clear
   -->意见回复控制。
   
   逻辑：只要图审确认了回复，设计院这端就不能再进行修改。
   逻辑：写储存过程（写存储过程的时候需要把审查阶段考虑一下），写服务，找到字段，
	三种情况？
	1.非本审查阶段，不允许修改。
	2.为本审查阶段，确认回复后不允许修改
	3.为本审查阶段，为确认回复，允许修改本阶段回复。
	储存过程过去两个值，一个是否是本审查阶段，一个是否确定回复。
	看一下原来的可不可以做到，照理来说是可以的，
	为空的时候，审查阶段就为Last 是 在储存过程。
	
	现在多传入两个值，一个Last,一个是否图审是否确认
	先Last然后再 是否确认。
	
   clear
   -->执行一下。储存过程
   
   615bcc85-ed18-42b1-a90e-6de33a53cbe8
   013896
   
   C:\Users\847
   C:\Users\94748\Desktop\MSGtextlog\aa
   clear
   -->翻译杭州的 qmi,也有可能会翻译一下sys的，但是如果做这个应该是没有什么问题的。
   可以留到明天，明天主要处理规划审查，不知道翻译了没有。
   
   明天加班内容：
   1.翻译规划审查和遗留的施工图审查到mysql(myprimary)
   
   2.帮助他们在15上面测试，这个测试，想要的结果
		1.功能是否足够稳定上线。（test,primary）
		2.他们需要撰写说明文档等。
		3.他们撰写后期优化项相关文档。
		4.现场解决他们遇到的问题。
		 
   3.调试通施工图审查杭州正式版本和衢州正式版版本。
   然后记录相关tag文件。非常关键。(myprimary)
   
   如果所有的都没有问题，那么考虑一个更新问题。
   已经下面的新需求、其他模块、其他任务。
   
   C8FAA5875B42DF27 124219
   所有的 = 前后都需要有空格
   
   测试一下杭州的储存过程。
   clear
   -->把所有的都测试一下。
    要不要直接布置到杭州？
	如果是正式服务器，还不这样做了，先测试本地能布置的 也就是只有EiService的
	总共有多少？
	V ECA_GetDesignCensorPrjInfo
			
   
   
   V ECA_getCensorPrjBaseInfo
   V NUM 1
   V NUM 2
   V NUM3
    V ECA_AddDesignSubPrjBaseInfo
   VECA_AddDesignSubPrjRFInfo
   VECA_AddDesignPrjPersonInfo
   VECA_GetCorpPersonnelInfo
   VECA_UpdateDesignPrjBaseInfo
   VECA_GetPrjCensorStateInfo
   VECA_UploadCensorProjectState
   VECA_GetPrjPublishCensorIdea
   
   VECA_AddCensorIdeaAffixInfo
   
   ECA_getcensorprjprogressinfo
   
   VECA_UploadDesignReplyState
   
   ambiguous
   
   38633036-3961-6337-2D34-163372D34663
   124219
   
   我怎么能知道这个unit4isupload是哪个字段？
   unit 4 is upload
   
   后面限制一下，如果关于float传入的值为空的，全部转换成0。
   （如本次送审总建筑面积）
   
   先调通，然后再让他们测试对一下字段。
   
   64343762-3531-6361-2D34-163612D34663
   124219
   
   "PROCEDURE cdk_qmi.ccir_getcensorprjprogressinfo does not exist"
   
   翻译只限于关联的储存过程  非相关的表先不管
   
   杭州的应该差不多了。
   下面：
   1.想办法怎么测试一下规划审查的。
   2.如果测试通过
   考虑一下 
   新的需求、做一下安装包什么的
   看一下他们的计划。
    伪造一下数据
	这有点多啊，但是没有关系，我只需要伪造我需要的就ok了。
   Vselect * from tbPlanCensorPrjInfo where designcorpcode='{0}' and prjtype={1};
	VECA_GetPlanCensorCatalog
    VECA_DelPlanCensorPltInfo
    VECA_AddPlanCensorPltInfo
	VECA_GetPlanCensorPrjState
	VECA_GetPlanCensorIdea
	VECA_AddPlanCensorPrjPhase
	VECA_GetPlanCensorPrjQuilifiedDrawingInfo
	XECA_AddPlanCensorSubPrjInfo
  单体
   XECA_AddPlanCensorSpecPrjInfo
   专业
	XECA_DelPlanCensorSubPrjInfo
    XECA_DelPlanCensorSpecPrjInfo
   单体和专业、暂不测试
   
   基本通过了。
   还有几个暂时没有用到的没有测试。但是问题不大。
   
   那么下面
   
   这三个项目的耦合度都比较高。
   
   现在开始解耦合。
   
   能拆分出来的，尽量拆分。
   EPDMSGT
   
   phcuk,I'm little tired.
   this weekend I haven't take a breath.
   so,today,it's time to have a rest.
   do something fun and easy.
   rest my CPU.
   clean my hardDisk.
   I'll pay back
   this morning. rest.have fun
   
   想想怎么拆分。
   
   我除非再拆分出一个dll来记录这些全局变量，不然怎么玩？
   clear
   V-->-->mission now:
   0.全流程的脚本问题。我的本职工作就只是写一下脚本，这是因为他们烦着阳哥，其实一些基础的脚本是很简单的。
   我要是做得好一点就教会他们自己写脚本。
   得看他们以后是否会还会有到这个工具，是否还要使用这个建模工具。
   我可以教他们写脚本。
   其他人也应该会教，但是建模工具我不会教。
   所以建模工具等他们自己熟悉了就会用了。
   clear
   -->我的本职工作已经完成，额外的再说吧。
   所以先不用管，但是不能让他们麻烦阳哥。
   V4.将dll进行拆分。这个还有地复杂，目前没有思考出解决方案。
   V5.什么时候给他们一个安装包的版本。
   （目前制作安装包的技术问题是，制作出来的安装如果选择快捷方式，快捷方式打开的时候，会报错，可能跟这个获取目录有关系？ 那么最好的尝试是什么？我在）
   clear
   
   先做哪一个？
   dll拆分这个问题其实可以留在后面？
   给他们排一下序。
   clear
   V-->方便EI使用的话，会把规划审查的独立出来。但是这个目前没有计划什么时候做进EI
   独立出来放在首要吧。毕竟阳哥已经在提这个了。主要是先把规划审查的独立出来，其他的先不用管。
   首先EI使用的是vs2005，所以考虑到ei的使用，编译出来的dll最好都使用FrameWork2.0
   然后，既然是一次独立。那么尝试着使用更高级的编译工具 将VS2008修改成使用vs2010，或者更高。稳定的是vs2010，较高的是 vs2013或者更高。
   求稳，那么先vs2010，后面再考虑往后面升级。主要是vs2010现在列编辑神器。
   提高开发效率必备。
   clear
   V-->尽量模块化，低耦合，参数化
   
   V先给他们搞个发行版本出来。
   rec:安装包：
   
   勘察设计企业内部管理云平台（浙江）
   http://www.ccir.com.cn/
   勘察设计企业内部管理云平台（浙江）安装程序
   C:\Users\94748\Desktop\安装包
   
   
   把所有公用 的
   AffixFileService
   http://220.191.238.239/ECACensorFileServerAffixIn/FileService.asmx
   CensorServerReference
   http://222.74.237.198:18080/ECACensorServer/CensorService.asmx?wsdl
   EiClient
   http://localhost:27266/EiClientService.asmx
   PlanCensorService
   http://localhost:27266/PlanCensorWebService.asmx
   PlanFileService
   http://220.191.236.169:8088/PlanCensorFileServiceOut/FileService.asmx
   
   PltService
   http://118.178.119.15/QDECASignatrueServer/PltManageService.asmx
   
   serverconfig
   http://www.ccir.com.cn:82/ECAUpdateServer/UpdateService.asmx
   
   SGT_BarInterfaceService
   http://118.178.118.118/SOA/InterfaceService/SGT_InterfaceService.asmx
   
   WebCensorFileReference
   http://202.107.249.5/ECACensorFileServer/FileService.asmx
  
  WebSignFileReference
   http://202.107.249.5/ECASignatrueFileServer/FileServer.asmx
   
   
   "http://220.191.224.175/PlanCensorWebService/PlanCensorWebService.asmx"
   000087100101000000032007040900e0
   123248
   {f31f186b-61fe-49f6-a3c6-8012ba43d983}
   
   clear
   V-->把规划审查，应用进ei
   首先我连入口都没有找到。。。
   这样吧，不调试肯定不可能实现的了。
   不调试我都不知道哪里会有错，所以，先把EI需要的模块先给调通。
   
   其实我现在是有点累的，我得保留一点精力，留到后面。
   这个东西如果要调通，我想今天下午应该是处理不了的，当然我也可以拼一下？
   但是我感觉没有很大的必要拼。相反因为要测试，所以这个功能如果拼一下反而容易导致不稳定，反正也不能上线，所以暂时别急，今天周五，这连续两个周都没有好好休息一下，不要这样搞，不是周一。关键还有点难。
   
   V-->添加消防基本信息的时候字段保存有问题。
   clear
   
   V--> EI支持规划审查模块，想想。
   1.先把现在的EI调通
   调tm啊什么烂代码，引用些什么鬼也不知道。Dfbl。
   
   我现在卡在的问题
   
   现在精神不很好，因为没有什么思路。
   遭遇的问题：
   1.编译不通
	  这个怎么玩？
	  编译不通的问题可能要咨询一下阳哥怎么解决。
	  叫阳哥发了一个版本给我。
	  他已经在催了。
	  这个要是编译得通应该很好解决的吧？
	  
   2.主要就是编译不通吧。代码有点难懂。
   3.
   
   
   1.添加一个目录，读一下他添加的逻辑在哪。
   真tm的奇怪。
   难道还换了不成？
   treeview2，sb名字。
   一个是panel2
   我要做的两件事
   1.把 设计院的唯一码 和锁号读过来。 规划审查虽然暂时没有，但是还是需要读一下吧。
   2.放在施工图下面的话，看一下应该就行吧？
   不知道诶，这个要看一下，因为还有三个子菜单，看一下放在哪，
   看一下他以前的模块是放在哪的。
   这个其实也是不要紧的吧。
   我先连他怎么进入施工图模块的都不知道，
   所以需要调试啊
   所以需要调试通啊
   
   现在还有一种办法，办法个毛 应该TuShen模块本身就调试不通，根本不能玩。
   
   Ds的Table是加上去的。怪不得初始化没有。
   那么我需要知道可能就这个表从哪来的了。
   只知道是本地配置的，那么我将怎么修改才可以呢？
   而且我目前不知道有些字段是用来干嘛的。
   
   他应该是固定好了的。
   
   模式是固定了的。
   那么我怎么做呢？
   不要紧吧，我再做一个子菜单？
   可以一试，我不可能再做一个模块的。先这样决定
   
   第二个是我需要啥？  我需要把设计院的唯一码读进去。
   
   然后基本就ok了。
   今天看能不能完成。
   
   他的初始化都是在内部完成的。
   内部完成。
   想一下，如果我要内部完成，我肯定得写在通用操作类里面。
   。
   原来的可以修改吗？
   可以吧
   把原来的也放在内部初始化里。
   那么我现在调用的时候就不用先进行初始化了，每次都内部初始化。
   我初始化的方式都两种？
   一种是通过epdm下面的初始化，使用
   
   
 -- select * from  tbMenuManage where ParentID = 1514 or ParentId = -1
 -- delete from tbMenuManage where id =1603

 insert into tbMenuManage  (id,Name,ItemType,SortNum,ParentID,dd)values((select max(id) from tbMenuManage)+1,'设计方案送审管理',1,12,-1,0);

-- insert into tbMenuManage  (id,Name,ClassName,FileName,AssemblyName,Paramter1,ItemType,SortNum,ParentID,dd)values
((select max(id) from 
tbMenuManage)+1,'设计方案送审','PlanUploadSdk.PlanCensorPrjForm','PlanUploadSdk.dll','PlanUploadSdk','012005',3,1,(select id from tbMenuManage where Name = '设计方案送审管理'),1);

-- insert into tbMenuManage  (id,Name,ClassName,FileName,AssemblyName,Paramter1,ItemType,SortNum,ParentID,dd)values
((select max(id) from 
tbMenuManage)+1,'审查意见管理','PlanUploadSdk.PlanCensorOptionsForm','PlanUploadSdk.dll','PlanUploadSdk','012005',3,2,(select id from tbMenuManage where Name = '设计方案送审管理'),1);

-- insert into tbMenuManage  (id,Name,ClassName,FileName,AssemblyName,Paramter1,ItemType,SortNum,ParentID,dd)values

((select max(id) from tbMenuManage)+1,'合格图纸下载','PlanUploadSdk.QualifiedDrawingDownloadForm','PlanUploadSdk.dll','PlanUploadSdk','012005',3,3,(select id from tbMenuManage where Name = '设计方案送审管理'),1);


-- ItemType 1表示 3表示外部的程序集
--Paramter1 是用来做什么的 就这一个参数了吧，今天估计是完成不了了明天早上来调试一下。
012005 012008
 湖州和衢州。 这也不知道是什么鬼。
 先不管了。
 看一下怎么出这个模块吧。
 1.为什么读不出fullcorpcode。
 2.调试一下初始化的时候是怎么出模块的。
 3.看来这个文件位置不太对。
 4.明天问一下阳哥，放哪比较好。
 
 今天一定要完成这个功能。
 好给他们测试或者其他的什么。
 clear
	clear
   
   -->通过这次兼容EI，发现以前写的FormLoad根本不是很好。代码有点乱，考虑怎么进行整理一下是最好的，但是先不这样做吧，优先完成需求项。
   
   1.浙江上报工具新的需求，优化项
	 布置一下他们需要的项
   2.章丘黄岛更新（这里只有一个小Bug和一些新功能的修改，比如说上传图审附件）
   这个可以留到后面。所以暂时不予修改。可能等浙江版本的上报工具发布以后可能需要。
   要是他
   3.竣测合一添加两个模块，上传图纸的（上传到目录自定义，上传到的数据服务需要自己写，文件服务需要copy，记录的字段信息需要参考一下他是怎么查询数据库来获取目录的）
  
  V4.所有的上传问题，都最好把图纸上传放在图纸信息上传前面。
	当时开发的时候可能没有考虑到。但是影响不大。先不管吧。
	
   给自己充一下电。
   如果没有什么问题，考量一下自己的状态。
   如果比较适合做事的话，把手里的任务继续完成一下。手里的任务还有3个，大概会花费多少时间？
   最近有点累是怎么回事？
   跟以前相比呢？ 好像一直都挺累的。
   有没有觉得轻松的时候？
   大概就是拓宽自己视野的时候吧。
   clear
   V-->如果他们着上报工具。那么说先把杭州的服务给布置一下吧。然后把布置服务的过程记录下来。
   遇见问题记录解决方案。
   clear
   V-->杭州服务器部署：
   
   VPlan的都不用管吧。（3个ok的）
   VSigntruerl Ok
   VECACensorFileUrl OK
   
   V PltManageurl 需要修改一下。（更新一下）
   
   V http://115.233.209.151:8088/ECACensorServerMySql/PltManageService.asmx
   
   http://115.233.209.151:8088/ECACensorServerForUploadTool/PltManageService.asmx
   弄个新的。
   
   V把原来的备份、现有的再添加上去。
   
   V EiClient需要修改一下
   V http://115.233.209.151:8088/EIService/EiClientService.asmx
   
   V Affix一个
   
   http://115.233.209.151:8088/ECACensorFileServerAffixDownload/FileService.asmx
   
   http://115.233.209.151:8088/ECACensorFileServerAffixUpload/FileService.asmx
   
   ReportUrl  和ReportFile可能都需要修改一下  （这个修改服务器上存储的地址值就行了）
   这两个是之前老的EI的
   
   ReportUrl
   http://115.233.209.151:8088/ECAReportServerMySql/ReportService.asmx
   ReportFileUrl
   http://115.233.209.151:8088/ECAReportFileServerMySql/FileServer.asmx
   pltmanageurl
   http://115.233.209.151:8088/ECACensorServerForUploadTool/PltManageService.asmx
   
   储存附件的目录是多少呢？
   一会看一下调取的服务，能不能通
   衢州和杭州的。
   杭州修改两个应该没有什么问题了，第二个问题就是数据库储存过程是否修改了。
   衢州：
   V AffixDownLoad 需要布置其他的应该没有什么问题吧？
   V其他的不用修改吧。
  -------------------------------
   42F81BC13AA287E4
   C8FAA5875B42DF27
   http://220.191.238.239/PlanCensorFileService/FileService.asmx
   
   clear
   V-->您不是EI V5.0的正式用户，暂不能使用此版本。如需咨询EI V5.0相关事宜，请与北京建设信源资讯有限公司联系（联系电话010-88018266，88018268），谢谢！
   
   \\svrdbccir5.cjxjy.com\share\data\epdmdb.db
   
   fullcorpcode
   073188
   corpcode
   12400172-6
   

	regcode
   CA863FDABECCE72C9A
   
   
工程名称：吉利集团研发设计和试验中心
宁波的项目
看一下为什么会上传不了图纸
	
	今天继续调试一下
	先分析一下。
	为什么不能上传图纸
	报什么错？
	是逻辑错误还是Bug？
	
	唯一的线索是无法上传图纸，
	首先看看是这个阶段的原因吗？
	我有skd的代码吗？
	好像是有的吧。
	那么看一下情况
原来是逻辑的问题。
阳哥说是传值传的一审二审的关系吧。
	太心累了，这个先不管了。逻辑照理来说应该是跟上报工具逻辑是一样的。
	clear
   
   -->我为什么有一堆任务？
   还不想去完成？
   首先长时间的劳作，会使人觉得疲倦。
   可能不是身体上的疲倦，是心里上的疲倦。
   如果觉得疲倦，那么就学会放松一下自己吧。
   ok，我应该是需要放松。
   我还有一些任务挂着的，但是这不是很紧急。想想自己现在比较紧急的事吧。
   
   rec:章丘 图纸名字为特殊字符。左上角的 ` 有时间看一下。
   
   还有三个任务，不是很急，那么我先完成哪一个？新需求的，感觉不是很着急。
   还是竣测合一的比较重要。所以先完成竣测合一的。
   其次，有些比较难的，就是上报工具代码逻辑的修改。
   这个暂时没有什么影响，只在于合不合理。
   今天周三，把竣测的两个模块解决了吧明天。
   后天尽量轻松一点，然后去接一下阿曾。
   
   今天做一下竣测。
   
   分析一下：
   我上次的文件有多少？
   我要分开放还是合起来？
   合起来吧，没必要单独弄个文件夹
   我上传的信息有哪些？
   表、字段？
   实际看一下获取的有哪些
   一步一步的来。
   卡在了差一个apconfig文件。影响吗？
   我可能不是很清楚怎么去源头查找，所以暂时不予修改。我也可以使用原来的版本？
   smart   
   算了放弃了，卡着就卡着吧，暂时不管了。这个毕竟还需要花费一点心思的。
   
   那就换一个任务
   看来得看一下他们新版上报工具的浙江版本需求了，
   文档写得一塌糊涂。
   
   设计院回复意见的时候把图纸信息给清掉了？
   回复意见
   怎么会把
   图纸信息给清掉呢？
   图纸信息是图纸信息
   
   [ECA_UploadDesignReplyState]
   
   那么有的一种可能就是  给他修改了状态，然后让他自己操作给删除掉了。
   现在看一下这个问题，还在没在上报工具里面。
   需要找到设计院的登录方式
   
   913702007180104946
   
   一定要还原一下情景，
   1.找到设计院问一下他是怎么操作的。
   是他操作的还是系统自动操作的。
   阳哥说的是二审可以修改一审的图纸，意思是说这个操作是属于设计院操作的。
   删除图纸是设计院操作的。
   如果是这个问题，那么就是应该不给予他正确的审查阶段，并且不允许修改。
   
   如果这个问题是系统操作的，那么就可能跟瑞文的skd的自动同步有关系。
   我怎么才能知道是不是设计院操作的呢？
   
   如果是设计院操作的，我能看见一审图纸吗？ 好像不行吧？
   看一下。查询的时候是否使用了审查阶段。如果审查阶段没有传值过来的时候呢？
   会不会是这样的，我看能否修改的时候，我是根据是否没有结束的，然后查询出来全部都结束了，但是这个时候。不会
   那请问如果我在二审的时候连一审的东西都没有看见，我是怎么操作删除的，所以这个是不可能的。（通过 同时新上传的阶段是一审还是二审来辨别。如果这个没有错，那么就是有可能我上传时候调取的审查阶段，和删除时调取的审查阶段不是同一个）。
   如果我上传下载都是同一个审查阶段的，那么我只能是查询了一审这个阶段。
   所以要么是传值有错，要么是他内部逻辑调取了控制，然后默认为一审了。
   如果默认是查询成了一审，我也有可能是
   我出现过的情况是三审的时候，我把一审的图纸给删除掉了。
   
   设计院是不是把所有的图纸清空了然后添加了新的图纸？
   如果是这个问题，那么肯定跟审查阶段有关系。
   照理来说，系统是没有这么高级的操作的。同步的时候把信息给你删除掉了。当然这小概率也是应该考虑进去的。
   
   那么我现在考虑的是，传的审查阶段的问题了。
   1.首先查询 审查阶段，是通过储存过程端查询出来的。
   
   2.如果不是这边查询出来的，那么就是SDK这边给重置了的。如果是SDK重置的，那么必定为一审。
   以前也有这个问题， 所以，要么是SDK重置了，要么就是同步掉了。
   万一我没有重置一审，而是重置成了空呢？  那么我不可能删除任何一个阶段的东西。
   只有可能是重置成了一审。
   所以这个根据是否是被删除的都为一审就可以知道。
   
   
   
   
   
   
   
   
   （）图审确认回复后，还是否可以删除图纸？  照理来说，图审是不可能删除设计院的图纸的吧。
   
   所以这个删除操作到底是人为的还是程序同步的时候造成的。
   我不太清楚他本地是服务器是怎么同步的。
		我同步我会有删除吗？
   我暂时也不知道设计院有没有主动删除。
   
   
   
   
   
   但是修改图纸的话是需要
   
   2.
   首先，非常有意思的是
	1.根据描述，是同时添加了32条删除了25条。 这些添加的32条，都认为是正确的数据。
	INSERT:	12:33:23.170
	DELETE: 13:47:05.583
	INSERT: 14:12:09
	日期是哪天 怎么知道？
	
	2.水总01 有安置楼和地下车库
   依照时间来说，看起来
   Delete     	15:18:29.360
   Insert\二审	15:18:49.376
   感觉有点像是替换的？
   毕竟中间不是还有很多吗
   你插入语句，怎么可能把原来的进行删除掉呢？
   程序做的吗？
   同步，比对发现不对劲以后，删除原有数据，然后添加新的数据。
   添加的都是二审的啊
   
   3.暂时不用管了，他们以前就有这个问题的话，可能是sdk的问题。
   
   竣测合一的，我没有数据库，没有服务，玩个屁勒。
   我连传哪些字段都不知道。调试了也没什么用的。
   
   依旧找不到服务找不到数据库，问题没有卡在我这，那么暂时就不用管了。
   
   那么竣测合一的都卡着了，没有关系。
   算了，他也不太清楚的
   这个还是需要登录账号的。
   需要知道userid的值是多少。
   没有项目。
   
   我要是找得到服务器，我也是可以的啊。
   暂时找不到的话，那就算了吧。
   clear
   
   --> 今天可以不做一些小的需求，但是把比较难的几个逻辑设计试着做一下，看能不能完成。
   V1.单体信息孤岛的问题。
   
   X2.页面查询的问题。主要修改设计院的查询语句，他们可能只是想跟原来的页面一样？ 其实这个如果不太影响，可以放后面。
   3.
   4.
   
   既然我可以挑选单体名称，我肯定也是可以挑选单体对应的rowguid的。
   对吧
   我使用了一个List，我能不能单体名不重复，
   我能不能使用dic？
   单体名称加上图名图号。
   所以单体的名称是不能重复的吧？
   反正单体的GUID肯定是不重复的。
	我选择单体的时候，能不能选到对应的guid？？
	试试不就知道了。
	选择的时候只有一个名称，根本就没有guid
	wandaorowid
	杭州上不去，暂时不管吧。
	
   text的绑定的字段。
   看一下在哪绑定的，多绑一个rowguid行不行。
   我list 改成 dictionary
  
	按照他们的需求文档一个一个地改一下吧。
	V1.提示，只有章丘的需要这个提示。
	X2.项目所在地，修改成图审是否受理。
	X3.屏蔽身份证号
	4.进度查询多两个主管部门不予受理 图审机构不予受理阶段。
	5.
	审查
	
	那就从第一个开始做吧。
	暂不不管了。
	clear
	
	-->竣测合一：
	现在模块逻辑已经大致做了。
	就差的是两个服务了。
	一个上传的服务，一个下载的服务。
	我现在既然不知道配置文件得到的服务器地址
	所以得使用一下他们现在使用登录的地址。
	
	首先找到他们目前使用的服务是在哪。
	有两个、一个是登录的、一个是实际数据的。
	
	我现在要找的登录的。
	网址端可以登录成功。
	那么现在找到这个该死的
	请问我有服务的代码吗？
	我没有我xxx呢
	请问，我全流程的登录，当然不是我们控制，但是获取等这些是我们做的。
	所以服务还是需要的。呢
	休息一下，调节一下情绪。
	
	我获取是怎么获取的？
	
	GetUnionMapCorpPrjInfo 这个函数 
	找到这个函数试试，
	如果它的配置文件全部不正确。我该怎么去调试？
	我岂不是需要他的全部服务？
	这种Post姿势我接触地不多，但是可以试试。
	
	clear
	-->-----------
	打住：
	V1.给他uploadOperationLogic写一个根据CityName获取CityNum和CityNum获取CityName的 函数、
		根本没有记录这玩意的一个表。   同时记录cityName，然后记录cityNum，其实也有。但是不是一个表。
		我写这个是为了什么？  是为了读取配置文件的时候，我有了
		我有表了，有ProvienceName		 CityNum CityName.CityCenter.
		V目前只要参数化了就行，暂时不做麻烦事。
		
		
	2.在FileUploader里面继承baseForm调用服务上传报告和图纸信息
		调用服务获取报告和图纸信息
	3.在FileUploadHelper里面上传文件。
	clear
	-->现在开始布置服务。支持上报工具和施工图审查 我新给他一个版本好了。这个版本会同时支持？
	还是说先不打包。万一传开了不太好吧？
	反正支持的地市也只有两个。
	所以，还是用最新的代码给他一个安装包好了。
	反正修改的也是规划审查的，这两家不用管。服务布置了再修改一样的。
	
	所以，先布置服务，布置目标是支持最新的上报工具的：
	
	先布置衢州的，衢州的不需要布置吧。那么就全部copy衢州的好了。
	脚本全部用最新svn。
	有哪些服务？
	EiService
	文件服务有？
	
	衢州V
	杭州V
	休息一下是必要的。
	然后呢？ 不要怕，慢慢来也可以的。完成一个地市算一个地市好了。
	反正目标是全支持，像衢州一样的，需要测试吗？  不测试了吧。
	所以、修改日期。衢州作为最终版本的为最终修改日期。
	这样就不需要测试了吧。
	然后服务名字的问题。如果时间不一样，才考虑服务名字的问题。
	一般情况是不存在服务的问题的。
	调不通暂时不用管的。
	都看一下吧。全支持nmb
	
	EiC...asmx 		6/26
	web.config 		10/09
	WebPrj....dll   10/15
	
	首先就是杭州的plan的
	杭州是数据库语句执行了，plan的服务根本就没有布置。那么施工图的呢？ ok没毛病
	
	这个还真不是那么简单，那么现在这样吧，先布置一部分试试
	也就是先布置的施工图的。
	其他的先不管。
	
	杭州有点奇怪，所有的服务都给移除掉了。
	并非常人所为。所以暂时不予修改好了。
	
	从头再来，
	qmi脚本
	sys脚本
	施工图服务
	规划审查服务
	
	总共10个服务
	其他多少个不知道
	
	规划3个
	wV PlanUploadUrl	
	xPlanFileUrl   http://tzts.tzjzy.com.cn/PlanCensorFileService/FileService.asmx
	xPlanQualifiedFileUrl    http://tzts.tzjzy.com.cn/PlanCensorFileService/FileService.asmx
	施工图7个
	
	7个中，有
	wV	AffixFileUrlDownload x
	wV	EiClientUrl	x
	
	WV censorfileurl		m
	
	WVsignatrueurl    	
	WVpltmanageurl   叫signaturesevice需要更新plt	 
	
	<add name="databasetype" connectionString="sqlserver"></add> 
	
	<add name="ccir_ConnStr" connectionString="Server=10.27.0.153;Database=cdk_qmi;uid=sa;pwd=1234.com;Connect Timeout=30"></add>
	
	WReportFileUrl
	WReportUrl
	
	s杭州V、s湖州V、s衢州V、S舟山V、s嘉兴V、V绍兴、sc温州V、sc台州V、sc丽水V、sc义乌V 
	
	桐庐X（没有连接方式）、宁波X（这个服务器不知道是什么情况，问一下郑易）、金华（Web上不去）
	执行一下脚本吧（估计他们的字段全部执行成了PriGuid除了金华）问题不大，只有再次进行开发的时候，估计才会出错。
	后面再修改好了。
	
	还差几个地市再说好了。
	clear
    --> 方案审查
	  V1.自动识别上传图纸的图名图号。
	  图号_图名.dwf
	  下划线区分。
	  V2.上传设计方案说明和其他相关材料，选择的时候再加一种文件类型zip。
	  3.导出意见的功能，进行一下筛选。
	  
   departoption
   insertdate
   pltname
   pltnum
   
    Microsoft.Office.Interop.Excel
   clear
   
   -->反正也没有什么 
   更吧，不调试。
   到时候他们用的时候再出现什么问题再来调试不就好了。
   把试用版本当做测试在用，呵呵呵
   
   继续更，只更webConfig
   
   don't bothered by sb, don't became to a sb.
   但是如果是在主要矛盾上面呢?
   主要矛盾上面该维护的还是要坚决维护。
   因为这个会影响到自己。
   该怼的还是要怼，毕竟这个是自己践行的思想，在没有得到自己能够确认的错误的时候，一定要捍卫。
   
   补充不了项目信息
   
   不能再拖了，规划审查的上传文件。
   使用衢州的全流程测试一下。
   
   34383638-3630-3239-2D64-032392D64646
   萧政储出[2017]26号地块商业、居住项目
   2018005909
   http://220.191.236.169:8088/CompleteMappingService/CompleteMappingService.asmx
   
   绍兴的地址是错的。文件服务的地址。
   
   http://220.191.236.169:8088/CompeteMappingFileServiceIn/FileService.asmx
   clear
  
  -->竣测合一图纸文件
   
   cb7b94c1-6fc8-4da6-8736-6cb7fa969c31
   
   "http://220.191.238.239/PlanCensorService/ccir/CompleteMap/GetUnionMapPrjCatalog?PrjGuid=cb7b94c1-6fc8-4da6-8736-6cb7fa969c31"
   43403948-7c56-41bb-8b61-6e1906da14dc
   clear
   
   1. 上传竣测合一图纸文件基本完成，但是用户体验不太好，要么使用多线程、要么加一个进度条。
   
   2.	代码组织得不是很好，这需要后面继续地完成，特别是一个地市的问题。看后面怎么获取比较好。
   
   3.数据库的脚本需要提交svn。
   
   V下一步做Pdf文档盖章的。估计也就是上传的pdf给他盖个章   
   
   -->1.安装包、给测绘院用，那么需要先把升级程序集成上去。
   2.集成盖章的功能。
   
     安装包
   rec:安装包：
   竣工联合测绘系统
   http://www.ccir.com.cn/
   竣工联合测绘系统安装程序
   F:\建设数字\公司代码\temp\安装包
   clear
   
   他们确实有需求，但是不要随意改动，三思而后行。。。。
   
   支持功能是最主要的，毕竟优化更新是有风险的。
   
   建模工具，到底抽象了哪些东西。
   这个软件的设计是什么？   他到底预测到了未来的哪些重复性工作。
   他算是一种代码管理工具吗? 
   他是不是抽象了  数据交互的东西？
   我能在里面嵌入一些其他的东西吗？ 引用别人的包？
   他是不是以数据和界面为中心的工具？
   他好像只是一个网站？
   如果他抽象的是数据和前端操作。
   那么这个建模工具。
   他有逻辑吗？
   他的逻辑有没有抽象？
   对流程有没有抽象？
   他的片面之处在哪，他的使用局限在哪。
   他抽象了多少逻辑？
   这些逻辑的使用情景普遍吗？
   如果我最终抽象的都是数据，那么我弯弯绕绕都是符合抽象范围之内的。
   那么我需要知道的点，就是这个弯弯绕绕的过程有没有什么限制。
   这个建模工具是别人软件开发公司买个我们的。而我们也是软件开发的。
   造轮子。好吧，轮子比作是工具。给别人提供了工具，结果这个工具用着不好用就很麻烦了。
   有些事不全是接口，因为他们接，但是不会互相协调。有可能是单方面协调
-->看一下手头还有多少工作
	能更新吗？
	章丘黄岛？能但是没有必要更新，所以暂时不予更新。
	需求可以继续完成吗？看一下还有些什么吧
	需求应该是暂时不需要继续完成了。这个后面先滞后吧。
	clear
	
-->	ei中无缝集成新版上报工具施工图上报部分
   对于老ei的上报不是很清楚，有些功能不一定能做得比他好，替代感觉是有风险的。
   为什么要替代呢？
   替代后产生的价值在哪？
   替代后是一种优化、但其实可能很多的代码逻辑都需要自己理解并撰写。或者copy。
   实际的价值不是整个ei系统，而是老ei系统不好用的地方。
   老ei的维护所降低的成本。
   这就是你所创造的价值。
   主要看一下有没有什么新的活？
   cad的二次开发我暂时还没有使用到的感觉。
   如果有时间，我觉得cad的二次开发我应该还是不成问题的。
   所以我现在缺少的就是架构了。
   怎么去架构一个新的项目
   从业务架构到代码架构。
   我怎么样去接触这一个架构？
   
   他们是怎么架构的？
   
   感觉他是根据实际的东西来进行随意架构的？
   因为功能都是分离的。
   开发的思路是迭代式的开发。
   也就是，其实他是有了实际的开发技巧。 然后套用了一个架构思路。
   我能不能前期就实现一个简单的功能，后面再重构？然后能复用的功能，我再进行复用?
   照理来说，我这个应该是没有问题的。那为什么会失败了？
   IDE不熟悉、运作原理不熟悉、架构不懂。
   ，而且给的压力还是有点的。
   而且不熟悉，而且你还要调js来写？js根本不熟悉，你怎么玩？
   你还不会百度。还不会调试。
   你还没有时间精力去做这个事。不会失败就奇怪了。
   关键是下定决心做了没有。
   
   他为什么能架构，因为他对需求非常地清楚，而且是有代码的逻辑的情况下的。
   
   我对系统根本不是很熟悉，我业务操作都不会。怎么能理解系统的?
   系统设计不会、代码不会写。怎么能写出来？
   连需求都做得不是很好。
   花的功夫少了。
   
   设想一下，如果你现在使用你现在接触的项目，做一套bs系统，你可以做吗？
   代码基本都比较熟悉了。照理来说应该是可以做的。
   但是有些特殊的需求可能需要
   
   杭州 程序、设计点击上报  isupload = 1/ 是不是都有时间
   1.如果分开存的、
   2.如果不是分开存的
   先确认一下、
   
   让竣测的 支持杭州的mysql, easy 暂时不要做好了。
   
  
   http://115.233.209.151:8088/CompleteMappingService/CompleteMappingService.asmx
   http://115.233.209.151:8088/CompeteMappingFileServiceIn/FileService.asmx
   
   看一下有多少 服务需要copy
   
   总共24个服务
   
   39006
   123299
   
   censorurl ：没有布置吧 我也不知道
   fileurl :http://118.178.119.15/QDECAReportFileServer/FileServer.asmx
   updateurl ：没有
pltmanageurl：没有吧
	ecasigntrue:
	http://118.178.119.15/QDECASignatrueFileServer/FileServer.asmx
   norminfo  不知道
   
  章丘黄岛的更新，应该是逃不了的。
  
  基础形式
  BaseTypeName
  
  体系结构
			StructureTypeNum tbPrjStructureTypeDic StructureTypeName
  
   建筑等级
   SafeLevelNum		tbPrjSafeLevelDic SafeLevelName
  
  工程等级
   PrjLevelNum   tbPrjLevelDic	 PrjLevelName

    地上耐火等级
  FireproofLevel	dic		FireproofLevelName
  地下耐火等级
  ButtomFireproofLevelName(最合理的方法是不需要ButtomFireName，所以我这边能做到最好的就是 插入的时候都插入，但是获取的时候只参照num)
  
   tbPrjStructureTypeDic
   StructureTypeNum
   StructureTypeName
   
   先做界面保存的吧，一步一步来。
   界面和保存应该可以了，现在做获取和展示的。
   
   基本上是改完了，哪里可以测试？
    http://118.178.119.15/HZECAReportFileServer/FileServer.asmx
   http://118.178.119.15/HZECACensorFileServer/FileService.asmx
   http://118.178.119.15/HZECASignatrueFileServer/FileServer.asmx
  
   
   http://118.178.119.15/QDECAReportFileServer/FileServer.asmx
   http://118.178.119.15/QDECACensorFileServer/FileService.asmx
   http://118.178.119.15/QDECASignatrueFileServer/FileServer.asmx
   
   
   censorfileurl
http://118.178.119.15/QDECACensorFileServer/FileService.asmx
signatrueurl
http://118.178.119.15/QDECASignatrueFileServer/FileServer.asmx
ReportFileUrl
http://118.178.119.15/QDECAReportFileServer/FileServer.asmx
   
   估计
   
  为什么会这样？ 因为他绑定了旧的单体。其实这里应该是新的单体。
  卧槽。吗的
  暂不别改好了。
  
   123299
   65396537-3431-6238-2D66-162382D66336
   
   我要获取的4个东西
   1.2.3.4
   审查阶段名称、审查阶段号
   是否可编辑（0为可编辑）
   errmsg
   
   时间都卡在getCityConfig上面。
   想想办法少量地初始化。
   
   页面的可以了。然后看一下上传的字段到底是些什么问题。
   有没有上报上去
   
   V单体几个字段
   
   每次提交的时候，注意提交webservice
   然后更新通过 参照最新版本的webservice svn提交日期、然后对比一下
   本地的文件、需不需要更新webservice.
   其实就是对比 svn提交日期和 本地webservice日期。 跟其他好像没有关系吧。
   先提交svn，然后再
   
   没有很大的问题先提交svn mysql版本的翻译后面提交并修改。目前问题不大。
   
   先把上次的修改提交svn，然后再 看一下新的需求。
   提交svn，然后 更新服务器。
   看一下现在的版本可以用吗
      
   现在更一个版本怎么样？
   把章丘黄岛的更新一下？
   或者周末登
   想想什么时候更新一下比较好？
   更新了什么？  更新了几个字段。
   更新好更新吗？ 
   
   问一把吧。
   我手动了。现在先发一个版本给他们测试好了。  我修改了 数据库端吗？ 那就更新一下呗。
   所以我现在发版本也没有什么用。
   
   我现在暂不撰写新的东西了。
   所有工作只为下午的更新做准备。
   
   
	
	不着急更新、先把杭州的解决了再更新？
	那么可能就要等到下一个周了
	他们什么时候上，qtmdgwsms?  那我也不着急更新。上东西之前，一定要把功能写好。你着急搞个不完善的版本算什么东西？
	写代码也需要一点规范的好吧。
	先修改、再升级。什么时候升级，不用管，功能要做好才能升级对吧。
	升级出了更多的问题那才是真的大问题了。
	先修改好吧。
	
	先完成功能，svn翻译后面再说。
	
	X获取单体信息 、PrjLevelName 改成PrjLevel
	那么问题是这样的了。
	单体的字段修改了没有翻译成 mysql的。想想怎么翻译一下试试。
	先翻译吧。然后执行一下
	想一想、
	计划的流程：
	先翻译到Mysql，然后使用mysql做一下测试、完成文档提到的那几个东西。
	在本地测试应该也是可以的吧。
	
	先把sql的保存一下。
	
	专业意见、设计人、图名、专业负责人
	强条设计人员。
	
	SpecNameIdea
	DesignerName
    plotoName
    plotno
    SpecManagerName
    WfqtUserName
    
   本来就没有那就不用管了？
   
   mysql翻译好了吗?
   应该可以了。我之前的修改哪些有关系难道不知道吗真是的，也就只有添加单体的增加了字段而已。
   所以添加单体是不行。
   我难道不能修改杭州的吗？
   反正他们也没有什么人用吧。
   
   杭州反正没有人用，先更了杭州的试试水。
   
   本次更新，更新地市
   章丘、黄岛、浙江各地市。
   本次更新代码范围：
   章丘黄岛：  数据库语句、服务、上报工具客户端。
   浙江：
	mysql：数据库语句、上报工具客户端、服务。（杭州哪里还不行？上报工具客户端、数据库语句）
    mssql：数据库语句、服务估计不用、上报工具客户端。
   
   V杭州：
   web.dll
   数据库语句
   
   浙江：数据库语句和webservice
   
   章丘黄岛：
   附件下载服务、
   导出图纸和导出意见有的。
   那么还有些什么服务呢？
   好像就一个EI吧？
  
   两个服务：
   EIService和、附件下载附件的服务。
   2.地址附件下载地址。
   3.数据库语句。
   
  V章丘、V青岛
  
   、V温州、V绍兴、V湖州、V舟山、 V义乌。
	V金华 V台州 V嘉兴 V衢州  V丽水、V杭州 、	
   20181204更新
   
   update tbcensorconfig set AffixFileUrlDownload ='http://60.216.250.201:18080/ECACensorFileServerAffixDownload/FileService.asmx' where CityName like '章丘'
update tbcensorconfig set AffixFileUrlDownload ='http://221.215.102.2:8085/ECACensorFileServerAffixDownload/FileService.asmx' where CityName like '黄岛'
   clear
   -->章丘和黄岛的我已经修改了。
   现在测试一下。
   
   1.等待解决问题（一早上的好像还没有什么问题，那么这就很开心了。）
   2.把浙江这几家继续给更新掉。V
   3.如果没有什么问题可以继续做将上报工具融入ei
   照理来说应该是很简单的一个问题。
   
   项目基本信息 平方米等 为0
   人员加一个索引
   
   BargainNum2	PrjName	BuildCorpName
   
   rational
   
    钢混结构
	明天试试融入ei。
	
	二 试试规划审查工具
	华宸
    xMpCOKC5I4INzFCab3WEmw==
   V
   clear
   :可以融入ei了吗？
   是可以的，我都试了。
   那么如果想发行，其实很简单吧。
   完整的文件目录、加上修改本地数据库语句。 就可以完美实现了。
   本来uploadsOperationLogic就有一个是否underEI的判断。
   那么应该不用担心了吧
   
   杭州ei上报    
   Oracle
   
   先试着把查询脚本写出来吧。
   
   报审号 
   
   比较困难的先放在后面好了。
   
      insert into tbHphoneMessage([Type],CityNum,ReportDepFullCorpCode,CenSorShipName,fullcorpcode,CorpName,CorpCode,Phone,Mark) 
   select @Type,@CityNum,@ReportDepFullCorpCode,@CenSorShipName,null,b.UserName,b.IDCard,b.HPhone,  '报审项目:' + @PrjName + ' 安排您作为主审人，请及时开始审查工作。'
   from tbCensorInfo a
   left join tbCensorShipUserInfo b on b.ServerUserNum=a.UserNum
   where a.UserNum is not null and a.ServerCensorBigNum=@ServerCensorBigNum;
   
	既然叫我先做台州的，那么还是先翻译成sqlserver的好了。
   既然不知道的语句，那就放着好了。
   
   我觉得可能是在qmi库里面的。
   
   
   
   
   
   
   
   