V--> 现在手里的活又开始多了。
	大致为：
	1.上报工具需求；
		上报工具重庆需求：上报工具惠州需求、上报工具泸州需求、上报工具亳州需求。
		只是问题比较复杂。而且很多不太具体。
		
	2.竣测合一需求。
		既然是阳哥提出来的，那么先处理这个吧。
		
	X3.其他还没有具体提出来的需求。
	4.ei遗存问题。
	
	I'm get fucking tired.把svn代码下载下来后休息一下吧。
	
	Url:http://220.191.237.175/PlanCensorService/ccir/CompleteMap/ GetUnionMapCorpPrjInfo ?CorpCode=420  
	
	如果使用同一个服务器，同一个数据库，叫联合开发
	如果使用不同的服务器和不同的数据库，叫接口。
	所以我们是采用对接的方式。不要想着他们服务器的事情。
	
	我对竣测合一的需求一点也不清楚，架构和对接的逻辑我也一概不知。
	他们需要些什么东西？
	我怎么知道？
	
	采用的mvc，但是基本是只是使用了Controller提供 post服务。
	
	V根据corpcode获取项目
	
	这边需求不太清楚，但是感觉这个目录应该是默认的，如果是默认的，那么查询的时候就需要执行储存过程来进行查询。
	在没有查找到的时候就添加上去。或者写触发器也可以的。在新插入的时候，自动新添目录。
	
	V1.重庆测试 
	2.泸州测试，看一下测试怎么回复吧。
	3.竣测合一等待回复，需求不是很清楚。
	V4.重庆测试通过以后，直接给他修改服务配置？还是先编译一个版本出来。
	如果报错再说吧。
	所以先给他编译一个版本出来？
	那就先编译一个版本好了。
	
	或者等测试通过以后直接修改配置给刘山琳？
	算了 ，还是编译一个版本吧，真是无奈了。
	
	http://www.lzstxt.cn/CQCensorServer/CensorService.asmx  http://www.lzstxt.cn/ECACensorFileServer/FileService.asmx  http://www.lzstxt.cn/CQCensorServer/PltManageService.asmx  http://www.lzstxt.cn/ECASignatrueFileServer/FileServer.asmx  NULL  NULL  NULL  NULL  NULL  http://www.lzstxt.cn/CQCensorServer/CensorService.asmx  http://www.lzstxt.cn/CQReportServer/ReportService.asmx  http://www.lzstxt.cn/ECAReportFileServer/FileServer.asmx  http://www.lzstxt.cn/CQEIService/EiClientService.asmx  NULL  NULL  NULL  NULL  http://www.lzstxt.cn/ECACensorFileServerAffixDownload/FileService.asmx  NULL  NULL  NULL  401  3
	
	http:// jsgl.zfcxjw.cq.gov.cn:6018 /CQEIService/EiClientService.asmx

	-->惠州记录节点信息。
	
	既然要做，就做好一点吧。
	
	现在有Add的储存过程了，我只需要在相应的时间点进行调用就好了。
	
	现在看一下字典表，有多少地方是需要我调用的。
	
	然后再一个一个地处理一下，让他记录进去。

	V有个字段没有保存上，看一下怎么回事。
	
	勘察单位勘察成果已完成
	设计单位施工图设计文件已完成
	联合设计单位1施工图设计文件已完成
	联合设计单位2施工图设计文件已完成
	
	勘察单位已反馈修改成果
	设计单位已反馈修改成果
	联合设计单位1已反馈修改成果
	联合设计单位2已反馈修改成果
	
	只有两个字段、
	单一职责的话，我应该独立出来，单独写一个储存过程，而不应该嵌套到其他那去。
	所以 
	撰写储存过程，然后在同样的服务进行调用。
	
	储存过程里面调用储存过程。
	
	今天不可能做完了，所以先把思路理出来，然后明天再看一下吧。
	
	首先撰写存储过程进行一些判断，查询到项目的prjnum等信息后，调用储存过程 addnode。
	
	然后放在Uploade的服务里面？
	
	项目报审的话服务是： UploadCensorProjectState
	回复的服务是： UploadDesignReplyState
	
	good job，然后在这个服务里面调用一下插入节点的储存过程即可。
	我要不要做重复上报的判断呢？
	当然是需要的，
	我第一个UploadCensorState也是判断了isUploaded =null，才会进行修改，所以上报只会记录第一次上报的时间。
	
	然后第二的话，
	我没有做is null的判断，但是可以在这边做。
	我需要在这边做吗？最好吧。还是做一下比较好，这样的话，就避免重复插入节点，然后我最好把reply也做一下判断，不要每次都变成最新的。这样时间就和第一次上报的时间保持了同步。
	
	记得有时间提交一下代码。
	
	这个好像跟阶段有关，那么就不能在那里面调用了，只能单独撰写服务在同样的地方调用了。
	
	既然惠州服务器有人，那么就先不争抢这个资源了。
	
	提交一下代码吧。
	
	Am I free now?
	seem right.
	
	contine to learn 23 design models?
	
	以后重庆数据库有差异的地方，尽量还是另外保存吧。别替换了。
	惠州这边，我不可能维护两套的，我要么是使用旧的版本，要么直接根据最新版本进行修，不能基于以前旧的版本做差异修改，不然会产生分支而导致混乱。
	
	所以直接复制hzsgt的试试？
	
	节点我已经添加上去了，有几种法方式？
	我还是直接去服务器上面测试好了
	
	好消息是已经通了，坏消息是，网络太差了，还差一点逻辑需要撰写 
	逻辑已经撰写完毕，现在只需要，我节点记录第一次有问题吗？
	应该没有问题，不然他会重复插入。
	这是合理的。如果其他地方修改了date，那么是那个地方没有做date is null的判断。所以问题不在我这。
	
	所以说呢？
	替换掉吧。
	
	现在节点的基本完成了吧。
	clear
	
	-->我今天是否能把这些字段搞上去？
	
according to the department founding principle,  the implementation engineer is main role, developers are sup。
so a lot of thing they can deal they deal, I shouled not make myself too busy, do not handle things too much.
	
	沉下心来，把这几个字段完成了吧。这个应该简单的吧。
	
	ok，完成以后稍微放松一下考虑一下重庆出差的事。
	
	机票已经定了，行程已经定了。
	
	下面开始准备一些准备工作吧。
	
	63671020
	
	delay the new 
	
	所有既有的功能都需要走通。
	那么看一下有哪些地方需要测试的，
	然后修改一下相应服务配置等。
	
	27929068-1
	41FA1739D0564755AAE39564FBF2C77A

	海川这边流程走得有点慢，一个问题卡着的。
	
	两种态度，如果是按照工作的，是不希望他卡这么长时间来影响流程。
	第二种，无所谓，只要能在本周之内把流程走通掉，时间来说并不需要这么着急。
    V1.导出意见没有意见。
	
	E12D3B0CA928470BA1350D262213FCC1
	
	27929068-1
	
	V2.
	<root><personinfo 
	prjguid="C0747EBB47A0403E89AD3E5A43CF26D8" userguid="7a79096a-2bd6-46f0-ade0-1388901ad281" designcode="27929068-1" 
	sexnum="0" 
	username="魏国伟" 
	idCard="429004199801163954" 
	idtype="身份证" 
	prjduty="专业负责人" 
	Remark="" 
	SpecialityName="结构" 
	HandPhone="13294131661" /></root>
	
	"<root><personinfo 
	prjguid=\"C0747EBB47A0403E89AD3E5A43CF26D8\" userguid=\"ddba72b0-686a-4b98-ac0b-4d0ed6f44993\" designcode=\"27929068-1\" 
	sexnum=\"0\" 
	username=\"刘乾坤\" 
	
	idCard=\"370888654488965585\" 
	idtype=\"身份证\" 
	prjduty=\"专业负责人\" 
	Remark=\"\" 
	SpecialityName=\"建筑\" 
	HandPhone=\"18988755445\" /></root>"
	
	SafeLevelName
	FireproofLevelName
	ButtomFireproofLevelName
	Invest
	IsCensorFlType
	Memo
	
	思考一下如何去解决这个问题
	问题描述：在oracle刚插入的数据，意思是有的服务是可以查询到的，有的服务是查询不到的。搞个日志文件在服务器端调试吧。
	
	为什么会出现在这种情况呢？
	重新生成一下服务试试
	
	现在还有什么
	
	jnm b 
	
	进度详情表，
	
	
	
	begin
if (new.noderecorddate is null)  then 
set new.noderecorddate =NOW();
end
	阳哥在忙自己的事，所以我这边怎么搞呢？
	先为他们解决一下需求的问题吧。
	
	学习吧。还有什么
	
	093521
	
	I did not fucking know anything, please him, yeah
	make him happy.
	
	导出错误图纸的还不是那么简单。
	那么看看有没有其他服务可以调用试试？
	
	我现在要做什么？
	
	试着出一套方案，将mysql数据库导到oracle
	
	以文档的形式来吧。
	
	表结构
	表数据
	储存过程
	触发器
	
	先试着还原，然后再根据步骤 迁移到oracle。
	
	方案、肯定是使用备份的方式？
	肯定不是，只是我这边先使用了备份的方式来还原mysql数据库到本地。
	然后在本地进行传输的时候直接使用数据传输应该就可以了，表和数据应该都会一次性地传过去，当然最好看一下执行sql语句。
	
	我这边现在还有一些什么任务是可以处理的？
	
	1.数据库的迁移方案
	2.泸州四库一平台文档出来了，做进oracle。（需求自己掌握，看一下如何处理。）
	3.
	
	现在遇到什么问题？  所有的表都没有数据
	
	这不太科学，备份应该会备份数据的，但是我这边一条数据都没有，只有一个表结构。
	
	13.51begin transport/conversion/transfer
	
	首先，编码的问题。  数据源要是对的。
	
	所以还原得就有问题。
	
	[Err] 1406 - Data too long for column 'BargainNum2' at row 1
	
[Err] INSERT INTO `tbcensorprjinfo` VALUES ('39231', '泸州市医教园区基础设施EPC+PPP项目', '510504', null, null, '1', null, '1', '0', '3', '003', '002', '1', '1', '1', '5105000301040001', '泸州宏安建设工程咨询有限公司', '264094.0300', '1', null, null, '2019000021', '915100004507513971', '中国电建集团成都勘测设计研究院有限公司', '915100004507513971', '中国电建集团成都勘测设计研究院有限公司', null, null, null, null, null, null, null, '1', '438560', '2019-01-15 15:07:09', null, null, null, null, '510500', '51', null, null, null, null, '002', null, null, null, null, null, null, null, null, '321', '泸州市龙马潭区', '20760.42', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '董明', null, '13518213508', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '凌平', '白友波', '91510500MA696T26X8', '13730637300', '中电建西南医科大泸州教育投资管理有限公司', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '32636337-3138-3062-2D31-830622D31383', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '泸州市医教园区基础设施EPC+PPP项目', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '泸住建函【2018】339号', null, null, null, null, null, '3545.60', null, null, null, null, null, null, null, null, null, null, '0', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '川投资备【2018-510504-82-03-283815】FGQB-0180号', '2018-07-13 00:00:00', null, null, null, null, null, null, null, null, null, '3546', null, '0', null, '0', null, null, null, null, null, null, null, null, null, null, null, '不用填写', '{c86098a0-9b08-409c-9b11-d18dbaaa88ad}', null, null, '朱德高', '2834', null, null, null, null, '1', null, null, null, null, null, '教学大楼、人文大楼、学生活动中心、校医院、宿舍', null, null, '泸州宏安建设工程咨询有限公司', '65959.4900', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '通过', null, null, '2019-01-17 18:02:14', null, null, null, null, null, null, null, '5105000301040001', null, null, null, null, null, null, null, null, '2019-01-17 13:54:37', null, null, null, null, null, null, null, null, null, null, '2019-01-17 13:54:37', null, null, '2019-01-17 13:58:00', null, null, null, null, null, '一星', null, null, null, null, null, '', null, '', '', '', null, null, null, null, null, null, null, '0.00', '0.00'), ('39241', '格兰春天.渝湾', '510502', null, null, '2', '0', '0', '0', '3', '003', '008', '1', '0', '1', '5105000301040001', '泸州宏安建设工程咨询有限公司', '185313.4200', '1', null, null, '2019000024', '915105022047040263', '四川自力建筑勘测设计有限公司', '91510100754742959L', '四川得圆岩土工程有限责任公司', null, null, null, null, null, null, null, '1', '10824232', '2019-02-19 09:43:32', null, null, null, null, '510500', '51', null, null, null, null, '001', null, null, null, null, null, null, null, null, '322', '泸州市江阳区', '26500', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '尹集亨', null, '0830-3118201', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '阳益', '白强', '91510502563283817L', '18982712826', '四川省泸州乾盛房地产开发有限公司', null, null, null, null, '2019-04-09 15:28:06', '1', null, null, null, null, null, null, null, null, null, '63336538-3164-3032-2D33-430322D33336', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '川自司（2018）建合字28号', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '泸住建函[2019]33号', null, null, null, null, null, '185313.42', null, null, null, null, null, null, null, null, null, null, '0', null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, '川投资备[2018-510599-70-03-245963]FGQB-0010号', null, null, null, null, null, null, null, null, null, null, '139108', null, '46206', null, '1466', null, null, null, null, null, null, null, null, null, null, 
[Msg] Finished - Unsuccessfully
	
	重庆的出差的发票等。
	
	出差单？  问一下他们就好了。
	
	到时候再问。
	
	下面继续做什么？
	
	
	46	安徽	亳州	341600	http://114.98.62.33:8080/ECACensorServer/CensorService.asmx	http://114.98.62.33:8080/ECACensorFileServer/FileService.asmx	http://114.98.62.33:8080/ECACensorServer/PltManageService.asmx	http://114.98.62.33:8080/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://114.98.62.33:8080/ECACensorServer/CensorService.asmx	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	702	3
	
	
	46	安徽	亳州	341600	http://114.98.62.33:8080/ECACensorServer/CensorService.asmx	http://114.98.62.33:8080/ECACensorFileServer/FileService.asmx	http://114.98.62.33:8080/ECACensorServer/PltManageService.asmx	http://114.98.62.33:8080/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://114.98.62.33:8080/ECACensorServer/CensorService.asmx	http://114.98.62.33:8080/ECAReportServer/ReportService.asmx	http://114.98.62.33:8080/ECAReportFileServer/FileServer.asmx	http://114.98.62.33:8080/EIService/EiClientService.asmx  	NULL	NULL	NULL	NULL	http://114.98.62.33:8080/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	702	3
	
	
	1.下面写一下服务器布置文档:
	他们会布置吗？会，但是所以这部分没有多少写的必要，先写一下必要的东西就好了。
	2.亳州上报工具需求：
	每次增加一个地市的时候，就会需要在很多地市区别的地方进行相应的添加，大多数情况都是if else，想想是否可以通过比较简单的方式，来应对未来无数多的地市的扩展？
	
	首先模块基本都是固定的，然后，我基本都是分为两种，大多使用if控制。
	地市-> 模块 -> 控制
	我能不能为每个模块声明一个地市组，if 一个组，else一个组
	然后通过这个组if contains(当前地市)来 得到if还是else
	
	反正我一定是可以把总的模块列出来的。
	
	大不了新增模块的时候就再加一个对应的模块组。
	
	这个模块说不定还可以重用的。
	
	那么对这个模块的定义又是什么呢？相互之间的区别是什么呢？
	如果公用了，以后万一有差异又怎么扩展呢？
	
	人防单体详细信息、防雷、消防（防火等级、地上地下.....）
	3.导出错误图纸，调用郑易新提供的接口。
	
	这个不是engtype控制的，
	
	现在我已经把地址加上去了，下面测试一下，需要测试什么？
	测试一下页面对不对，然后保存的时候会不会保存，奥卡姆剃须理论，不必要的都不必要，一切从简。
	怎么方便怎么来吧。
	
	亳州上报工具需求比较着急，
	试着调试一下。
	
	那么接下来？ 处理一下泸州四库的问题的吗？
	他应该提供了一个库，这意味着什么? 
	我们的哪些东西会用到他们的东西？
	我其实不是需要再开发一套对接的？
	怎么个对接法？ 我们无法修改他的数据库，我们只能修改自己库的东西。所以就只有get。
	那么怎么玩呢？给他们写一个任务之类的？还是说做一个工具，实时调用一个接口将数据传输入自己的库？
	需要字段多吗？ 先熟悉一下他们的库又哪些字段可以使用和是对接需要的。
	
	这个有时间限制吗？
	
	开会的时候豪哥说哪个地市来着？比较重要？
	重庆、泸州、亳州
	泸州一个是数据库迁移的，一个是泸州的四库对接的。
	对接需要一点时间，可以先忙一下数据库迁移的。
	
	现在是什么情况？if your attitude is none of your bussiness, do not lead, ok ,fine, the leader's approval so. So ,the work you can do is thinking about the work you will do, and just make simple plan for it. Then , you can go on your study or something else? fun? not so good in this time. free-time work? that is not easy.
	
	试试衢州郑易给的接口，下载错误图纸的。
	
	http://220.191.237.175/ECASignatrueServer/PltManageService.asmx
	http://220.191.237.175/ECASignatrueServer/PltManageService.asmx
	
	现在是什么情况？  好像需要额外的字段？
	
	prjguid，
	
	V不需要的，V
	
	撤回，
	没有传目录
	让测绘人员 自己能够建目录 子目录创建子目录 
	
	根据接口项目赋码，来获取目录和图纸。

	目录和图纸都是存在我们系统的。
	
	现在是什么情况呢？
	就是他们没有传过来，这个目录，当然可能根据对接的情况不太乐观。  所以我这边怎么做呢?
	首先还是完成这个 竣测人员可以自由编辑目录。
	
	
	然后存入我们的库，最后通过接口给别人调用。
	
	没有关系，不要害怕麻烦，就好像做那个mvc的demo，即时你花了一个周的时间，结果最后并没有启用，但是这只是一个证明而已:你能学得会快，只有简单的口述需求的话，那么就做一个简单的版本。 一切从简。
	不要害怕麻烦或者不能使用什么的，这就是你的工作。if u a tired, just take a breath.
	ok，修改就修改好了。
	
	我用什么方式比较好？ 用瑞哥之前的那个有点复杂，还是用自己的比较容易理解吧。
	我这里只有用来添加文件的，那么修改一下我现在是只有添加文件夹的，那有什么影响吗，并没有，所以现在看一下他的节点有些什么信息，然后储存是怎么玩的吧，如果实在有比较也可以用自己的方式来build这个treeview。这个无所谓的，只要结果是好的就ok了。
	那么我要不要学会接口的形式呢？
	要，但是不一定得现在。
	
	这和之前的需求是有冲突的，之前有一个技术性的一个是其他的
	
	人防测绘成果
	消防测绘成果
	
	然后 如果是点击上传测绘报告那么
	如果是点击上传测绘图纸那么
	也就是说上传的东西跟选择的目录没有关系。
	catalog需要这边可以吗，完全没有问题的，跟那个添加材料的窗口一样的逻辑不就好了。
	，然后还有其他问题吗? 可能需要较小地修改一下 上传测绘报告和图纸的逻辑，但是这个并不是非常影响，只是一个逻辑的判断而已，easy！
	 
	 跟着以前做的比较完整的copy一下吧。
	 
	 有大致思路了，那么就开始copy吧。
	 
	 花里胡哨的留到后面吧，先把实际的完成，奥卡姆剃刀
	 
	 想想是同步更新呢？ 还是从服务器调用更新？
	 
	 从服务器更新应该不太科学，还是使用同步更新吧。
	 同步更新，方便快捷。
	 
	 现在加载的可以了。
	 并且测试添图纸也是可以的。
	 
	那么下面就进行
	添加目录
	删除目录、删除图纸就好了。
	
	添加目录的时候添加guid、row_guid
	
	添加文件的时候，传materialid的同时传一下Mguid.
	
	47	四川	绵阳	510700	http://218.89.178.158:8018/MYCensorServer/CensorService.asmx	http://218.89.178.158:8018/ECACensorFileServer/FileService.asmx	http://218.89.178.158:8018/MYCensorServer/PltManageService.asmx	http://218.89.178.158:8018/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://218.89.178.158:8018/MYCensorServer/CensorService.asmx	http://218.89.178.158:8018/MYReportServer/ReportService.asmx	
	http://218.89.178.158:8018/ECAReportFileServer/FileServer.asmx	http://218.89.178.158:8018/MYEIService/EiClientService.asmx	NULL	NULL	NULL	NULL	http://218.89.178.158:8018/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	0	0
	clear


	https://bbs.csdn.net/topics/390410480
	
	female in the 
	 
	 <root><prjinfo 
	 PrjGuid="4E2B29E96B2F4F1D8C98F564CA83F583" 
	 GreenLevel="" 
	 Longitude="" 
	 Latitude="" 
	 FabricatedArea="0" FinishedHouseArea="0" RenFangLevel="" area1="0" TopSumArea="0" ButtomArea="0" AllInvest="0" CarWei="0" BargainNum="" BargainNum2="" EconCorpLinkMan="" EconCorpLinkPhone="" DesignCorpLinkMan="刘山琳" DesignCorpLinkPhone="13188893800" /></root>
	
	
	9.10二审结束
	图纸上传时间9.50
	
	提供一个跳转的东西，传过来一个地市的编码，企业名称，用户名，密码，判断显示
	clear
	
-->和政务网对接，实现登录问题。
	先试试衢州，这个应该会涉及到网页端的问题，我应该怎么办？又tm要看他写的烂代码，看一下吧，应该影响的范围并不大。rnmy
	先实现，能弹到他的界面，然后通过他的界面登录，返回一些用户数据打开我们系统。
	豪哥说他们的接口是统一的，关键是他接口包含这个页面吗？  
	如果不包含，那么页面是我们自己做，调用的是他们的接口获取数据
	如果包含，那么页面是他们的，然后还能返回数据给我们，看一下文档有吗。
	
	他只是要求通，也就是试一下他的接口如何。
	
	有账户吗？
	
	单点登录  提供一个地址1，接收服务部门用户中的认证参数、
	2单点登录成功后默认跳转到该地址。
	
	下面我需要做的，使用施工图的页面，然后实现一个post数据到这个链接，然后获取数据，对比库，登录成功，自动跳转。
	
	所以说，只要模拟一下他给我们的数据，实现能直接登录和跳转即可，默认所有用户都是可以登录的，只是可能中间会有一个静默注册的过程。
	
	现在我需要的就是把这个接收数据并跳转的jsp页面写出来。*
	
	clear 

V-->查找数据库为什么不能
	124123
	328
	1
	这个问题现在有可能是那家设计院用的版本不对的原因，毕竟是属于特例。
	暂时这样修改好了，后面如果还有问题，再看看什么情况。
	clear
	
	累了，先休息一下。
	
-->现在还有哪些任务？
V1.泸州数据库迁移
-2.重新架构这个地市的，为了后面的扩展。

mysql 导入导mssql

http://localhost:19902/cz/ECAInterface /ZWECAAccess

现在大致的思路以及很清晰了

也有具体的demo了，

所以现在开始做休息一下开始做吧
下一步创建一个mvc项目，然后把他的demo集成进去，mvc页面需要做一个选择地市的框。在选择地市以后，

跳转到地市接口，给地市做一个接口来进行接收数据验证登录等一系列操作。

现在的问题是如何做地市的接口？

我肯定是一个url过来，带了几个参数，

只是一个跨服务器的调用，一个页面，调用到另一个页面，我需要在里面写接收的参数，然后使用这个参数。我需要搞个mvc吗？ 不需要，我可能只是需要一个简单的接口页面而已，而这个页面的功能有些什么呢？

1.接收参数，比对数据库
	存在，跳转项目页面
	不存在，绑定页面
我tm直接用他的demo试试，反正他这已经搞了一半了都。


http://localhost:12297/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx?CorpCode=00261754-9&CityNum=330800

现在整个东西已经通了，下面就是看一下是怎么设计的了。如何把这个页面做好，现在时间着急吗？
只要通了，感觉不是很着急了，慢慢地设计好了。
这个设计还是不要自己来，因为自己对前端也不是很熟悉。
但是可以把后台的逻辑做好。
所以接下来，修改一下后台的逻辑。

前端的问题就先不管了，先实现一下后台的东西。

绑定的时候有一些字段可以是他那边过来的，能用就用

CorpName在我们系统里面是唯一的
CorpCode在那边是唯一的
那边的CorpName
一个CorpCode 一个CorpName 在我们系统一个登陆账户。
单点登录,这就是单点登录。


让他选择，哪个作为主要的，其他的不管了。
你不可能一个账户能绑定多个 子账户。
登录名和密码也是唯一的。

localhost:12297/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx?CorpCode=00261754-9&CityNum=330600

下面如果需要，我如何给这些东西加密
我直接把info传过来试试，

{
  "xzqh": "330103",                                             行政区号
  "attnIDType": "51",
  "OrganizationNumber": "704789206",
  "attnLandLinePhone": "13712345678",
  "CompanyType": "企业法人",
  "userId": "9152",
  "sun.spentityid": "http://essotest.zjzwfw.gov.cn:80/opensso",
  "attnIDNo": "330681197901065872",
  "uniscid": "91330103704789206U",
  "realLevel": "2",
  "orgType": "3",
  "CompanyName": "浙江政务网法人测试用户",
  "attnName": "何叶春",
  "attnPhone": "13588760916",
  "CompanyRegNumber": "91330103704789206U",
  "username": "123456789"
}

其实这些数据感觉也够了，能默认绑定吗？
有名称的直接绑定，如果没有名称的，新增就好了。
当然有名称的，绑定的时候，替换掉一些字段。
没有名称的直接注册进去。

那登录肯能得换一换，不使用账户名密码登录了，或者依旧使用一个默认的东西登录，比如说账户为统一社会信用代码，密码为1，反正在这之前都给注册了的。
自动绑定好，还是手动绑定好？
手动绑定，肯定有很多名字不正规的账户会被丢失掉。
但是这些账户又是实际有项目的，不太友好。
所有呢，必须要有一个绑定的东西。

或者有一个项目认领的过程？让这些通过不规范注册命名的企业申报的项目，全部游离，通过之前的登录名密码进行认领。

里面使用静默注册（绑定），静默登录。 然后项目通过认领的方式获取。

项目根据名称来的。

问题，分公司的问题，企业名称和企业的统一社会信用代码的问题。一个企业只有一个统一社会信用代码

他的登录用户，是多个，如果是分公司，那么可以使用这个登录用户进行甄别。

等有需求了再说，先不管这个是哪个用户名下的项目这个问题，应该没有什么必要的。

15519291220
clear
安装包：
	勘察设计企业内部管理云平台（浙江）
   http://www.ccir.com.cn/
   勘察设计企业内部管理云平台（浙江）安装程序
   C:\Users\94748\Desktop\安装包

   下一步，比较一下有更适合组织机构代码的吗
   如果没有，只有新加字段来储存统一社会信用代码了。
  
-->如果不是很着急，暂时不做处理。
下一步呢？

继续学习23种设计模式吗？
当然，它需要被我学完了，始终
学一个算一个吧。

qmi 1112/1107
sys 20182/20177

improve !!!
clear
V1.提供加密过的url给他们，调用我们的东西。
	1.可能需要说明文档
	2.可能需要把服务布到省服务器
	3.RSA加密字符串
V2.泸州oracle，勘察设计单位的进度项目里面没有记录

4.泸州还有一些需求
休息一下，继续学习23种设计模
 
需要下载sqlserver，布置杭州的竣测
-->
2282066

已经装了sqlserver，现在试着把表导进去，然后重新布置一下服务，然后，发布接口，然后本机调试后发布程序。

添加单体都会出现timeout 

X文件上传没有问题，还是数据库的问题。
clear
V-->我现在已经把服务和数据库都拷贝过去了，

服务应该是布置好了，下面需要测试一下能不能通
首先试试给全流程的接口是否可以推项目进去

可以了以后将接口给他们

已经有了接口，文档，安装接口文档写一个demo
然后把接口发给他们，后期再给他们一个工具
clear
V-->中途先处理一下，给东软的接口需要：
首先将服务布置到15服务器上面
然后本地调试一下能否使用私钥加密，然后传输数据。
撰写demo和文档。
基本跟着他的demo写着试试。

不要觉得不熟悉，不熟悉才是进步的好时机。
赶时间的话跟着做就好了。

http://localhost:12297/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx?info={
  "xzqh": "330103",
  "attnIDType": "51",
  "OrganizationNumber": "704789206",
  "attnLandLinePhone": "13712345678",
  "CompanyType": "企业法人",
  "userId": "9152",
  "sun.spentityid": "http://essotest.zjzwfw.gov.cn:80/opensso",
  "attnIDNo": "330681197901065872",
  "uniscid": "91330103704789206U",
  "realLevel": "2",
  "orgType": "3",
  "CompanyName": "浙江政务网法人测试用户",
  "attnName": "何叶春",
  "attnPhone": "13588760916",
  "CompanyRegNumber": "91330103704789206U",
  "username": "123456789"
}&CityNum=330800

localhost:12297/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx?info={"xzqh":"330103","attnIDType":"51","OrganizationNumber":"704789206","attnLandLinePhone":"13712345678","CompanyType":"企业法人","userId":"9152","spentityid":"http://essotest.zjzwfw.gov.cn:80/opensso","attnIDNo":"330681197901065872","uniscid":"91330103704789206U","realLevel":"2","orgType":"3","CompanyName":"浙江政务网法人测试用户","attnName":"何叶春","attnPhone":"13588760916","CompanyRegNumber":"91330103704789206U","username":"123456789"}

这个我是直接将他序列好的info直接传到了我那个地方，那么下面我需要知道他是这么序列这一个东西的。
或者参照一下文档？
看一下他们是如何序列这东西的？

还是说参照我们和其他对接的时候，使用的post将DateSet进行序列化？

没有必要，如果是序列化的问题话，研究一下JsonConvert的序列化就好了。
只是写demo的时候需要而已，
然后我这边也继续反序列化。

也就是先序列化，然后再进行加密，

然后解密，反序列化。

ok，下面，模拟一下，进序列化传输。

用js吗？
算了吧
他有一个加密， 

http://118.178.119.15/ZWECAACCESS/ECANeusoftAccess.aspx?info=F4EA49C6F71FDA75EF57B32718BF3898F541E38E7E3557D1609A58CD38607D7F4F2F0B0A902DC68C8E787237C8C39F2EBB11B37D92191A57F45DFEC1E064F41BD7F0B795E7555299A0039767460DCCB7CB5CDFA6B67504183BB35FBC97F9B7CE243D67EFC73C47E1AD7CE165976155F2992DD96E7F952054B823BBBBD0307FB949886EE467909CC8B4B70BCCFF4A5CB80F4FBC22B4A4DE9ED5FEFAEEE3E0E923987D712FBEA067F15EC30F8D609B2656AF1BA955AD1A8D767D31393582C8CB7059C68E19C64072FA1E21E155DEDD543FE4A5B07FDFA20194A5CB37D25926DF1359989FCA4A7BB0D06221574A5A528672BBBF321FB88CB6CFBAC7844D67D5D48970C8EA6F22A2BCD119F648F07F839ADA7591EA49D195B300BBC4C3B6C89DDF51C85BBD821DABCFF5932B568F845ED75E61D35C045AA1DB8919CB7E5E1BD8D74B52DEF30363424FD83388BE523A3E15B51B732783977A8AA76D0900E9FCE38B1D5CC291128BBE59534747A059FEF0808327D18C0D45E147F95DC6C0BEF1ACEE0AF5DC46C3D4E87F8C6040EB75993FAB99A7FC36E362AFF2CFFCD39A29D1826F548FC7DB02F56E03A8397EC944E312B6F3AB7D2B5279406B9496CB14E570FD2A5BBADD480880AAE5844AF6BA28C82A8474FD2527CDA497250A9643C6FE0E0DCEA18FAD3B9EB5F77E8ABC150277EC3B8F136F290C3EAF7D3C9976FA3374078C7C9626E76E55224438D2C0CCD7D8A100292A8921090572882F56144AC6E649E91FE39E123BA594F229E284D0C07FE797882978E047C6818CE58811129E9BEA3B7B3EF93140E55251B3D6199FA953D8B65D056FE04A3C64D9598AF32CD2BCF6546A0857C3C62D55E306D9896AC0AB91E580E8B84260611943C3FBDEED35266748FC9C31E45C2C1CA53FB448451FA5262C5E9D3BBDB2F277200443A6DB5EBFFA06DCD9D41FF24AA3B78838DF48981398D4CC47836AA6414C2DF115A8FE3313A197D769801A1D08E867281FE9ABB172ABC4B291B4F01E021D79B23AAF410FB76D6CB24B2100197AC7CB493BB5EDBDEB9B26190A645C81CE43A8CC2DDF1E58501FCABE3AFC7180AC07D1E2D922E3AA6A84409B5C7108F6B29ACA358AED5F256450B184A3654CDD9276E48C4B381FEA39C12B84E1EDE257162BE45ED2F71473BF0FF0F6146E881B767528C7E289E75AC5283DF03A

http://118.178.119.15/ZWECAACCESS/ECANeusoftAccess.aspx?info=CF6CB8D94B91075D3A046EA026B78AAF79171DC784FB2794FB604D65E582DB8D83B513C2F254B5365CC4FECC89797D9F24A83BC0602A23DF9496B7CD42FAF9C6A9762F03166A040FCC32475610EFB475E7AB06B249B168F8F398DD3052F4CF7A259CD263B0D40F33182855188E3A5C9E57F54C5C501130D693AB656EAF1A15711C787BDB5C0CEFCF70852E789136A012F535A4A3E44A74F81736459A888D772311FE92CE07BB25192BD6FB564552D6115CF240728FFECBEDC2C2C115B3461B761F49DC8D1B1C64306F9DC6A2E289F4631DC46A6F4F16E9218BBD13CAFFBA9B0CC2EE58C2A90C9BD04B685E43C2F7FD45C772AED082AC9CB8E1B16200F062CDDE983B1093CB2BE97A82AAC3C112EF0F194723AC8B336E86FC40B402DDCA49DCB795F7DA54CFFF3C562637476344F506861A5CD0165F058AD11978963C8038567F2E5C5983BC392A0E93FE57F26FE36707642147E168332A58951D030B76BACC2C1B7FAC88222972BF6B225BFCEF0CAF7FCE0604120FF477A7C5B4B613AF6BA22101731755D61FAC4A94BBF544F53EC62F70E07AB38A8ACA818FE96596CEEA76057C2E7AC294DCE56DBE52E2D298FD08E7AB8E577211F951F1A220A3E55C5F3B803DD226CC35A01FF96B63A0690AA0934C44E236EFA0B7878839B9BB8157E9F3F66231E1B3C84D14FDBEF935CD791311C5FECADDA228C3CD0D5048C8C21A79706C36D22311424896A8649909124DB7037B686495599035B1DD6FB614B37B90B21DCBEC7A68F6DD6F729EC2F78E72B14A5A8E52BFB7CF1F5341E887BF03E204B7463AECDB9F09D7BD69647F1C70846EA26543497F3E211DD9C7DEBBAA7DFD2D06E7A0D0AF309696C765C267D4361F4DD4B0AEE09F0073A97109ECCDC2052631A6772630C0105A0B116AE7C1D5B7576BE1990DC3FC51B3C22C06C938542B1663F9FD284F03A140FE0167E76B1B4FCE64BF4295868C5789A8E669F117C4C4F42DB9196F9951198D44D3DFCAAD200501E59D2AF714D42FF6758B5952FD1965481BBEDD2E3814A52799F990527C196A920927AB1650F0DA9B28D4D8707FD518156BE155075F5F5B54452264123A292A0203CB59A423B75DEEB468CD6B0B0E3EC9794A7F29EA5C585CACAB4257DD28B9F480C80F7E70FAF2E0DC01B1DC2C7F504C577023A163E056D4E62BEB

现在已经通了，下面需要处理：
	V1.发布正式网站，布置服务到15服务器，
	-布置衢州的（可能需要和孟或者慧文沟通一下，提交代码，让他们谁去布置）
	V2.撰写demo文档，代码没有几行，贴上去就好了。
	
http://localhost/ZWECAACCESS/ECAssocheck.aspx
clear
:反正接口文档是给了，下面进行布置优化调通等问题暂时等等没有关系的。

123224   65663062-6261-3931-2D61-139312D61313

V-->泸州只能上传txt文档？ 
这样对吗？
看一下服务？

看一下是不是 大小的关系，还是说就是格式的问题。

文件大小的问题

直接插入不行，那么只能先插入数据，然后再想办法把blob插入进去了。

他不着急吧？ 网页端应该都没有做下载的，你着急什么？
sb

不着急，有两种解决方案，一个是直接不用blob储存了
2是尝试一下直接insert不调用储存过程
3.是尝试一下，先insert再update试试。

休息一下。

先直接尝试insert试试。
不要尝试了，直接采用官方的更新试试。

竣测合一后延一下。

我直接insert 传上去了。
那么下面呢？
我修改一下储存过程试试

看来储存过程始终无法传输，那么还是直接使用插入语句好了。
clear
:

V现在泸州的可以了
接下来：
V-->1.安徽四库一平台对接
	大概逻辑：
	注册
；一点四库 弹出企业名称。选择设计单位
	1.注册的时候，直接调用安徽的四库一平台数据来显示，然后让他选择
	
	不用查询全部，不然这样太慢了
	首先直接让用户输入企业名称检索，然后列出模糊查询结果。
	如果没有查询到就不给予注册，
	如果查询到了，那么直接选择，选择后，可能需要设置登录名密码等。
	如果企业已经被注册过了呢？
	
	该企业已在系统中注册，请使用登录名密码直接进行登录。
；人员信息，
	在企业添加人员的时候，从四库进行筛选，输入身份证号，进行查询。
	
下面，简单了解一下安徽四库对接。

然后我修改一下企业注册页面，

clear
91340000485001211U
2.杭州竣测合一接口
	
3.EI模块，总院需要看到分院报审的项目，我现在都只是记录一个锁的字段，然后根据这个锁的字段，反向去查找他的登录名密码，因为我之前是调的他的锁验证，所以说这个信息我其实并没有记录下来，所以仍旧需要郑易那边沟通一下，如何根据锁号去查询他的登录名密码等。
他有锁维护的模块，所以知道登录名就知道是谁在操作。

V-->APPKey：ff145be5-6989-406e-a2d3-4a0a0a73de33
APPSecret：1138f91a-985b-4189-a21b-f4b59d07f015


{"controls":[],"custom":{"access_token":"196dada3db45ecb0a646637d7202b881","refresh_token":"906e76393e90038d601664062ccfe383","jsessionid":"","expires_in":"1800"},"status":{"code":"1"}}

现在已经可以通了，等待要一个企业基本信息的接口，所以我这边需要调通自己的代码。

URIS=/getcorpinfo&ISJINWAN=0&AREACODE=340500&CORPCODE=91340000485001211U&TOKEN=5ab2d99b50e4df9523f2bc384b45b3df

{Content-Type: application/x-www-form-urlencoded
Authorization: Bearer 5ab2d99b50e4df9523f2bc384b45b3df
Host: 61.190.70.122:8011
Content-Length: 111
Expect: 100-continue
Connection: Keep-Alive

}
clear


V-->加密：window.btoa(‘123456’);
解密：window.atob(‘MTIzNDU2’);
如果带有中文需另外做处理
加密：
var str =‘你好, btoa’;
window.btoa(window.encodeURIComponent(str));
解密：
window.decodeURIComponent(window.atob(‘JUU0JUJEJUEwJUU1JUE1JUJEJTJDJTIwYnRvYQ==’));
http://localhost:8080/ECANeusoftAccess.aspx?JUU0JUJEJUEwJUU1JUE1JUJEJTJDJTIwYnRvYQ==
JUU0JUJEJUEwJUU1JUE1JUJEJTJDJTIwYnRvYQ==
http://118.178.119.15/ZWECAACCESS/ECANeusoftAccess.aspx?JUU0JUJEJUEwJUU1JUE1JUJEJTJDJTIwYnRvYQ==
clear
3.贴票。不要懒，尽早完成，不然忘了。

7682

企业人员接口已经通了，所以我这边肯定是不要表了，直接从那边提过来就好了。

接下来：
V-->处理一下 池州

UserName
SexName
IDTYPEname
IDCard

48	安徽		341700	
http://223.247.35.124:9088/ECACensorServer/CensorService.asmx	http://223.247.35.124:9088/ECACensorFileServer/FileService.asmx	http://223.247.35.124:9088/ECACensorServer/PltManageService.asmx	http://223.247.35.124:9088/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://223.247.35.124:9088/ECACensorServer/CensorService.asmx	http://223.247.35.124:9088/ECAReportServer/ReportService.asmx 	http://223.247.35.124:9088/ECAReportFileServer/FileServer.asmx	http://223.247.35.124:9088/EIService/EiClientService.asmx	http://223.247.35.124:9088/PlanCensorWebService/PlanCensorWebService.asmx 	http://223.247.35.124:9088/PlanCensorService/ccir/ManageDepart 	http://223.247.35.124:9088/PlanCensorFileServer/FileService.asmx 	http://223.247.35.124:9088/PlanCensorQualifiedFileServer/FileServer.asmx	http://223.247.35.124:9088/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	703	3

http:// 223.247.35.124:9088 /CZSgtWeb/#/a/login
clear

V-->上报工具回复图审意见上传附件的问题。

算了，不要改了，我这边应该是不会有错的。
clear

V-->增加PLA

应该需要修改上报工具和服务和储存过程。
这不要紧，已经加上去了。影响老版的吗？ 加个字段修改服务，有可能会影响
发个版本给他们吧

V  

jack马	jack马	bbbccc	aaa	中国人民解放军95631部队（驻泸空军部队）,泸州市公安局,泸州市住房和城乡建设局（勘察建设科）,泸州市住房和城乡建设局（城市建设科）,泸州市风景园林管理局,泸州市人民防空办公室,泸州市住房和城乡建设局（消防审查验收科）,泸州市城市管理和行政执法局 	是
jack马	jack马	bbbccc	aaa	泸州市人民防空办公室,泸州市住房和城乡建设局（消防审查验收科）,泸州市城市管理和行政执法局,泸州市风景园林管理局,泸州市住房和城乡建设局（城市建设科）,泸州市公安局,泸州市住房和城乡建设局（勘察建设科	是

jack马	jack马	bbbccc	aaa	泸州市人民防空办公室,泸州市住房和城乡建设局（消防审查验收科）,泸州市城市管理和行政执法局,泸州市风景园林管理局,泸州市住房和城乡建设局（城市建设科）,泸州市公安局,泸州市住房和城乡建设局（勘察建设科	是

clear

-->http://115.233.209.151:8088/PlanCensorServiceMS/CompleteMap

http://localhost:46939/

现在是什么问题？ 数据库装得有点问题，当时没有安装包，所以安装后就只有一个数据库，相关东西可能缺少。
可以了，我现在已经把推送数据的接口给他们了

现在需要的还有哪些东西？
一个是竣测的服务、一个是配置、然后工具。
从配置开始吧，拷贝一下衢州的就好了。

然后布置服务
杭州布置过的，更新一下。
更新完了。
那么现在就剩工具了。

420

现在衢州服务器上不去
什么原因？
qnmdzdw
clear

总院给ei的模块怎么做？
有难度吗?
我不太熟悉ei6.0，问问他们更新时间？

看意思是在5.0里面做，关键我如何处理呢？

看一下还有哪些任务？

首先他们实施还有没有卡在我这的？

检查一下是否有需求文档
1.东软对接
	目前卡在对方给我反馈和需要孟令飞更新施工图网页端。
2.EI5.0查询项目模块
3.竣测合一，目前应该没有问题了。
4.我总感觉有一些东西我是没有做的，但是我实在想不起来有些什么东西没有处理。

那么现在不要纠结这些想不起来的问题了，先把眼前的问题处理好，而且记住以后处理完东西记得打上flag。
好吧，现在没有具体的问题，都已经处理了的，如果他们有反馈，再说吧。

5.贴票

-->windows服务
挂在右下角	
服务 定期访问数据库 

首先想想你的需求，消息通知

我只要是安装了该服务的用户，
我都可以接收到一些消息，
这个消息是从服务器端发送过来的。
或者调用接口什么的，获取而来的。

还是说这是一个客户端？  不对，不应该是客户端，应该是服务，客户端和服务有哪些区别？
就好像他有一个

需求是，首先它要像一个客户端在又下角运行？
然后有功能吗？并不重要 

他像一个运行在后台的服务，然后会收到消息通知，然后会弹窗什么的展现一些通知，他有点像是mysql的自动更新服务一样，定期地弹窗执行一下，接收广播消息，或者是针对用户的消息。

看来可能是定期去获取的。

可能需要单独建立一个表，消息记录表，然后有一些是否删掉，删掉日期等的字段。

先搞清楚window的服务和应用程序的区别

不可能有纯粹的 服务的，当然也是有实现的
但是最好的还是和客户端相结合的服务

所以有客户端干嘛不直接用客户端来实现这一切呢？ 也就是后台运行程序，而不能叫做服务了，当然也可以使用服务和客户端进行组合的方式来进行开发， ，但是这个有必要吗？
看看需求是什么才决定吧。

有几种做法？
1.直接通过服务和窗口通知的方式
2.完全通过窗口应用程序的方式
3.使用服务和窗口应用程序联合的方式，这种方式还可以实现win10通知。所以就不单是弹窗这样的了。

他想要什么效果？

我服务的内部逻辑是怎么样的？ 还不是一样的需要调取服务来获取消息？

难道不是去主动的，获取消息，而是主动接收的？

阳哥的预期，用来接收平台发送的消息，

这是什么东西鬼啊？ 这不就变成了p2p的交流。

还是说发送到中间库，然后通过服务去中间库获取呢？

他的意思，运行着这个服务，然后平台发送了一条信息过来，这边将这条信息进行相关处理（展示）。

那么现在有这个发送信息，接收信息的做法吗？

请问是发送即时消息吗？

那么先做一个 服务的项目，然后他可以通知你一天喝八杯水。
funny

而且是通过右下角弹窗的方式来提醒的。

首先写一个一天八杯水的服务吧。

其实也不一定需要程序，
以为你他支持IO,所以你把相关信息存入到本地？
或者使用验证？

现在我使用了服务的形式，做了一个Message提醒的东西，

实时挂着的，
登录、
审查机构、人员、主管部门人员、
建设单位、 

开机自启动，登录一次不就好了。

纯服务根本完成不了，他肯定是被那个图标给骗了，这个还是需要做一个应用程序的。

他可能只是想要一个socket类似的通信软件。

没有关系，那么慢慢地研发一下。

先做一个demo出来，

有客户端和服务端

可以实时保持服务器端和数据库端的通信，我需要和数据库关联吗？

他们的需求是跟短信通知一样的，
什么意思呢？ 意思还是跟项目相关联的，而不是手动发送的。
自动发送的。

所以这个架构就是：

服务器上面的客户端，实时查询数据库，如果有需要发送的消息，自动发送给服务器上面的服务端。
服务器接收到消息，把消息发送到目标客户端？

只有客户端和服务器端

客户端建立请求连接，

然后服务器端实时查询数据库，如果有通知消息即将消息发送给客户端。 这样客户端可能就一个保持连接，没有实时这个东西了。

不能让客户端实时查询数据库，因为这样客户端多了对数据库的影响非常之大。

关于地市的问题，放在后面。

那么现在，第一步先做客户端和服务器端的通信问题。

客户端就是一个

如果你觉得精神欠佳，没有关系，稍微休息调整一下。
毕竟这是研发工作，需要很大的精力去思考。

下面，创建应用，
有好多例子，还是需要理解样例才可以调用吧。

一个简单的样例就好了？

但是这个是客户端发送消息到服务端，现在试试服务端发送消息到客户端

现在已经是可以发送消息到服务器端，也可以接收服务器端发送来的消息。
不过现在线程有点冲突

后面的再解决好了。

现在已经在15服务器上面测试了，只是测试的端口号不对的问题，但是是通了的。

下一步呢？ 等待具体的需求讨论，然后再进行下一步操作，这个消息通知工具将用到些什么地方，其中难免的是和数据库的交互。
但是也是在服务器上面。

所以循环查询数据库应该也问题不大，关键是这各个地市的问题，首先需要在12个地市上面布置12 个服务端和客户端吗？
	如果这样工具的地址也就分12个地市的。
还是说来一个总的，相当于一个中间的东西。
	可能需要考虑到高并发的问题。但这个后面的事了，先告一段落吧。
clear


-->一张大图片 png 贴45个图片上去，先固定位置。


clear

-->NULL	安徽	淮南	340400	http://220.248.236.51:8000/ECACensorServer/CensorService.asmx	http://220.248.236.51:8000/ECACensorFileServer/FileService.asmx	http://220.248.236.51:8000/ECACensorServer/PltManageService.asmx	http://220.248.236.51:8000/ECASignatrueFileServer/FileServer.asmx
	NULL	NULL	NULL	NULL	NULL	http://220.248.236.51:8000/ECACensorServer/CensorService.asmx	http://220.248.236.51:8000/ECAReportServer/ReportService.asmx 	http://220.248.236.51:8000/ECAReportFileServer/FileServer.asmx	http://220.191.236.169:8088/EIService/EiClientService.asmx
	
	http://220.248.236.51:8000/PlanCensorWebService/PlanCensorWebService.asmx 	http://220.248.236.51:8000/PlanCensorService/ccir/ManageDepart 	http://220.248.236.51:8000/PlanCensorFileServer/FileService.asmx 	http://220.248.236.51:8000/PlanCensorQualifiedFileServer/FileServer.asmx

	http://220.248.236.51:8000/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	704	3

手上的活有点多，有一些活都是没有具体的需求，只是大概的描述，让我倦怠。
不管，现在最原则的就是先完成阳哥安排的工作。其他的暂时不用着急。活倒都是给我干了，很nice。
这没有关系，安排在我手里的事我始终都会给处理掉的。只是时间安排上面，真的不需要太紧，给自己一点喘息的机会。不要堆积厌倦的情绪才是重要的。

看一下手上有多少工作：
V1.贴票
X2.单点登录修改网页端
`3.ei项目查询模块
V4.图片堆叠
V5.马鞍山需求
V6.施工图信息客户端
7.
clear
V-->
http://sgtsc.jsj.jinhua.gov.cn/EIService/EiClientService.asmx

11	浙江	金华	330700	http://sgtsc.jsj.jinhua.gov.cn/ECACensorServer/CensorService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECACensorFileServer/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECASignatrueServer/PltManageService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECASignatrueFileServer/FileServer.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECAPltQRCode/Default.aspx	A05A1771-2EA9-402D-9981-78AAFA31E1BB	NULL	NULL	NULL	http://118.178.119.15/ECANormServer/CensorService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECAReportServer/ReportService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECAReportFileServer/FileServer.asmx	http://sgtsc.jsj.jinhua.gov.cn/EIService/EiClientService.asmx	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorWebService/PlanCensorWebService.asmx	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorService/ccir/ManageDepart	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorFileServiceIn/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorFileServiceOut/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECACensorFileServerAffixDownload/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	10	1

11	浙江	金华	330700	http://sgtsc.jsj.jinhua.gov.cn/ECACensorServer/CensorService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECACensorFileServer/FileService.asmx 	http://sgtsc.jsj.jinhua.gov.cn/ECASignatrueServer/PltManageService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECASignatrueFileServer/FileServer.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECAPltQRCode/Default.aspx	A05A1771-2EA9-402D-9981-78AAFA31E1BB	NULL	NULL	NULL	http://118.178.119.15/ECANormServer/CensorService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECAReportServer/ReportService.asmx 	http://sgtsc.jsj.jinhua.gov.cn/ECAReportFileServer/FileServer.asmx 	http://sgtsc.jsj.jinhua.gov.cn/EIService/EiClientService.asmx	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorWebService/PlanCensorWebService.asmx	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorService/ccir/ManageDepart 	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorFileServiceIn/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/PlanCensorFileServiceOut/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECACensorFileServerAffixDownload/FileService.asmx	http://sgtsc.jsj.jinhua.gov.cn/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	10	1
clear
V-->反馈内容，灰色地，没有任何数据，有意见没有显示出来，提交按钮没有，填写的数据太长，会报错， 提交的显示意见条数不对。
审查阶段，有三审，审查意见答复，只显示一审、三审，


能看到项目名称，然后所有地市的 项目意见都看不到，

所有的项目都看不到意见，先找原因吧。

先找原因、

The database disk image is malformed
database disk image is malformed

clear

V-->东软对接测试
"
Mr.lu:
[图片]

Mr.lu:
http://118.178.119.15/ZWECAACCESS/ECANeusoftAccess.aspx?aW5mbyUzRCU3QiUyMnh6cWglMjIlM0ElMjIzMzA0ODElMjIlMkMlMjJhdHRuUGhvbmUlMjIlM0ElMjIxMzc1NzMyMTUwMyUyMiUyQyUyMmF0dG5OYW1lJTIyJTNBJTIyJUU2JUIyJTg4JUU3JUJBJUEyJUU5JTlDJTlFJTIyJTJDJTIyT3JnYW5pemF0aW9uTnVtYmVyJTIyJTNBJTIyTUEyQ1c5VzcxJTIyJTJDJTIyQ29tcGFueU5hbWUlMjIlM0ElMjIlRTYlQjUlQjclRTUlQUUlODElRTglODElOUElRTUlQUUlOUQlRTclQkElQkElRTclQkIlODclRTYlOUMlODklRTklOTklOTAlRTUlODUlQUMlRTUlOEYlQjglMjIlMkMlMjJDb21wYW55UmVnTnVtYmVyJTIyJTNBJTIyOTEzMzA0ODFNQTJDVzlXNzFMJTIyJTdE


http://localhost:12297/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx?info={%22xzqh%22:%22330481%22,%22attnPhone%22:%2213757321503%22,%22attnName%22:%22沈红霞%22,%22OrganizationNumber%22:%22MA2CW9W71%22,%22CompanyName%22:%22海宁聚宝纺织有限公司%22,%22CompanyRegNumber%22:%2291330481MA2CW9W71L%22}&CityNum=330800

220.191.237.175/QZQciWebElec/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx?info={%22xzqh%22:%22330481%22,%22attnPhone%22:%2213757321503%22,%22attnName%22:%22沈红霞%22,%22OrganizationNumber%22:%22MA2CW9W71%22,%22CompanyName%22:%22海宁聚宝纺织有限公司%22,%22CompanyRegNumber%22:%2291330481MA2CW9W71L%22}&CityNum=330800

clear

V-->图片堆叠
首先我这东西有明显的区分：
红色框、黄色人员姓名签名
白色单位信息、黑色背景

1.显然我首先需要的是将黑色背景和其他单位进行区分。
	可以先实现这个区分
2.将区分出来的对象和另一个对象进行合并并堆叠上去（添加水印）

那么现在我需要一点分开的素材。

手动画吗？

看能不能找阳哥要一下？

这个其实自己画就好了，那么麻烦干嘛。

easy，这玩意感觉应该不是很难，只要花点时间弄清楚原理就好了。

首先制作一些模板？

还是说直接先分离试试

制啥模板啊，直接分离试试。

分离和叠加

先别考虑太多，怎么简单怎么来，这只是一个小函数。

基本代码已经有了
1.明天测试一下
2.询问一下具体需求
3.先测试可以贴图就好了吧

现在已经可以镂空贴图了，下面就是需要具体的
	2000	1000
	dll	
	图片长宽	
	给一个 	
	3 3 4 
	
	做成一个dll的形式，然后传入参数
	然后得到
	
	坐标还是放在左下角吧。
clear
V-->
想想步骤是怎么样的？
首先用户打开了一张dwg图纸
然后输入Confirm的命令，选择左下角点，将指定路径下的图片添加到左下角点

只是一个展示，收集数据但是不实际地改变图纸。

先做什么？先显示出这个效果。

现在的问题是什么？
首先比例的问题，图纸插入的大小是按当前的比例来的，
然后是正方形
clear
	
V-->先做
	合格图纸目录、
	点击合格图服务，
	
	保证他（服务器）有DWG/DWF图片，也需要有地市的区分的。
	
	如果没有也需要上传上去。
	

现在知道了大致的效果。
然后下面开始实际处理一下。




	Skipped obstructing working copy: F:\建设数字\公司代码\竣工图管理系统\CompleteMapping  
clear
V--> 1.变更依据补充
	也就是一个补充材料地方。
	需要上传材料信息服务
	以及上传材料的
	
	这个材料是对应一个图纸节点的。
	多个材料对应一个图纸。
	在双击图纸节点的时候同时会获取该图纸下面的材料

	变更依据材料
	先有什么就做什么吧，没有限制就不做太多的考虑，奥卡姆剃刀理论，使用最少的

2.竣工图审核签名

3.签名维护
	
奥卡姆剃须，
以最快的速度完成三个模块内容
 
signatureFilUrl

他把左边做成了row，没有关系，我这里需要的只是它的guid而已
到时候改造一下就好了。

下面撰写储存过程。
再根据存储过程修修改一下相应的参数，那么上传的逻辑基本完成。

然后做一下签名维护的。

最后再做图纸盖章的，可能花的时间比较多。
现在到午饭时间还有1.5个小时，休息一会，1.30 到5点30有4个小时，2个小时处理完签名维护的，剩余的时间开始看和处理签名的问题。

左边已经展示了一个图纸文件下面对应的所以材料，然后我还需要给他单独做个窗口？
反正左边也只是一个展示用的，
我这边添加，删除（还不能删除以前的？）
就算我独立，我这边也需要初始化我这个弹窗啊。
要不还是直接

现在我这边大致逻辑做完了，也就不先，
	
那么等他那边改造完了我直接用好了，然后引用的问题的话，直接把uploadlogic引用换一下就好了。

那么下面做简单一点的人员签名维护的。

人员签名维护，只是上传照片就好了。

北京科技大学

下面实际的

上传文件的应该可以了。

现在，需要下载代码，修改一下上传材料的逻辑，然后调试。

V撰写存储过程。

现在是什么情况？

1.调试
2.上传svn 晚上会进行汇总
3.撰写盖章相应的功能模块。

休息一下吧。

现在测试完了也上传svn了。

下面开始做最后一个模块

构造一下逻辑是怎么样的？

不要做无用的东西，假设我已经有了。

我需要给这张图纸盖章，

首先我是这个编制人、我登录账户显示我是编制人，所以有一个登录用的标志

然后，如果我是编制人，点击盖章，执行命令，在本地找到底图，从数据库获取签名（将数据库的签名字段修改为1），然后获取签名字段，根据字段调用函数加进底图，然后将签名图放到图纸上，然后将签名图上传，命名为图纸guid.png。然后将dwf上传到网上。  

如何解决覆盖的问题？如果我是根据数据来签名，这个签名是在哪，肯定是在本地。也就是说，我获取数据的时候，其实需要把所有和项目有关的人员的签名实时同步到本地去。

也就是，每次我上传签名章到网上之前，都有一个根据底图和查询出来的签名图，签名字段来合成的操作。
我如何避免合成？当然这个是属于优化的问题了，这里不再深究。

（先不做实时性的控制了，先都签完名后上传到服务器，然后从服务器下载签名后再保存到数据库和文件服务）


1199

t.777

1.312 
2.676
3.
4.
5.

550
t.358

1.58
2.135
3.175

312/777*1199 =481.5
676/777*1199 =1043.1
			
58/358*550   =89.1
135/358*550  =207.4
175/358*550  =268.9

tbjddrawinfo 

prjid

tbprjinfo
buildcorpname
jlcorpname


-->V静默登录，提示：
怎么描述?
法人单位：XXXXXXX， 在对应的施工图联审系统建设单位注册信息中未找到对应的名称，请确认是否进入对应的施工图联审系统，点“是"进入施工图联审系统，并自动在施工图联审系统中生成用账户信息（用户名：XXXXX，密码：1），点”否“返回。




	
	clear
1199
550
	
	
776x355

492
677
	
	98
	142
	221
	
	0.6472060050041701‬
492/776*1199 	760
677/776*1199	1046

98/355 *550		152
142/355*550		220
221/355*550		342
	
杭州跟李志龙，
	
现在我需要调试一下 SaveAs的问题。

896953248
	
我可能需要知道当前的DB有些什么东西？

包含当前工作区间？
那么保存的时候可能会把之前的也给保存掉

220.191.237.175/QZQciWebElec/ExternalInterface/ZWBuildCorpLoginAccessForm.aspx??info={%22xzqh%22:%22330481%22,%22attnPhone%22:%2213757321503%22,%22attnName%22:%22沈红霞%22,%22OrganizationNumber%22:%22MA2CW9W71%22,%22CompanyName%22:%22海宁聚宝纺织有限公司%22,%22CompanyRegNumber%22:%2291330481MA2CW9W71L%22}&CityNum=330800

	
	http://118.178.119.15/ZWECAACCESS/ECANeusoftAccess.aspx?aW5mbyUzRCU3QiUyMnh6cWglMjIlM0ElMjIzMzA0ODElMjIlMkMlMjJhdHRuUGhvbmUlMjIlM0ElMjIxMzc1NzMyMTUwMyUyMiUyQyUyMmF0dG5OYW1lJTIyJTNBJTIyJUU2JUIyJTg4JUU3JUJBJUEyJUU5JTlDJTlFJTIyJTJDJTIyT3JnYW5pemF0aW9uTnVtYmVyJTIyJTNBJTIyTUEyQ1c5VzcxJTIyJTJDJTIyQ29tcGFueU5hbWUlMjIlM0ElMjIlRTYlQjUlQjclRTUlQUUlODElRTglODElOUElRTUlQUUlOUQlRTclQkElQkElRTclQkIlODclRTYlOUMlODklRTklOTklOTAlRTUlODUlQUMlRTUlOEYlQjglMjIlMkMlMjJDb21wYW55UmVnTnVtYmVyJTIyJTNBJTIyOTEzMzA0ODFNQTJDVzlXNzFMJTIyJTdE
	
两个问题，
V1.签名为黑色
V2.比例 38 
V3.文字位置

删除前
	
我应该再我的baseForm再进行分一下

定义一个公共的接口class，
然后Class实现这个接口（在里面具体实现获取地址等东西，想想属性等是如何实现的。）
然后如果其他Class如果需要调用这个Class的东西，那么就需要实现公共的接口class。
所以我目前是需要进行细分。
接口Class和具体地市实现class。

X1.换成块属性的方式，都不用PNG的了，
X2.考虑一下如果盖错了，等这种问题，这个最好暂时不予考虑。这算什么鬼东西。
3.现在测试一下点漂移的问题？
登录第二个账户的时候，
我需要数据库

数据库 不一样。 所以有些点本地无法调试。

可以直接用服务器的进行调试吗？

两种方式，一种自己调试，找到哪里修改到哪里。xgnmdgB，直接发个最新的给我应该就行了
第二种，本地和服务器结合的方式。

服务器上面为什么不好？1，服务没有更新。
数据库没有更新。搞你的吗，出错再说吧。


tutorial
tortoise

如果有这个文件，也就是盖过章的文件
正常来讲，他确实不应该对一个有盖过章的文件还进行第二次盖章操作。

如果已经存在了盖过章的文件，他将这个盖过章的文件拷贝到地图
然后删除源文件。

这个时候。这样不合理

我必须控制一下。

如果是编制人，有这个文件，那么有这个文件是不合理的。

所以我需要这怎么做？

有盖章后，我还要去盖这个章？ 

当然是提示

这没有办法调，

或者上舟山服务器？
sndma不应该搞这些有的没的，用最小的环境代价去处理，别浪费时间在别人已经做好的事情上面。这就是分工合作。

963.099904238466,-343.627932231345,0

还有名称缩放的问题，

我现在需要算他实际框的大小是多少
/40
357

高度固定为62，然后把宽为等比例缩放，什么意思呢？还是需要得到这个玩意？

我能知道图片的高吗？ 能，能知道宽吗？ 不知道，能算吗？
算不了。

我连图片的宽原宽是多少都不知道。

所以还是放比例比较靠谱

我放个比例进去好了。

62

1.jl单位和日期 名称下调一点。

我现在放了一个62进去是什么意思？

也就是把 固定大小的底框的大小放进去了，

只放了高度，
怎么个计算法？ 我好像搞错了

1.底图高度

2.签章前的高度宽度，不清楚

3.目标签章的高度已知，宽度不清楚

我如果算出

我计算	目标高度/整体图纸高度的 比值 

V然后将图纸调整到目标高度。

测试一下第二个人的签名
4.盖章程序需要dispose占用

如何解决这个问题

165,27

2464.86/203.27

2382/165
V 缩小的问题也解决了。



签名可以上移2个像素点

现在着重解决一下temp的问题。

反正这个玩意始终都是要删除的，

搞清楚他的dispose点吧。

如果不save，就不会占用。

我现在可以和程序独立出来吗？

结果我都强制回收了还不行，那么有可能是cad又占用了？

不太可能，他占用应该也只是占用最后一个，怎么会把之前的都给占用掉了呢？

命令结束后试试？
V 离生成函数远一点就实现了给回收掉了。真是奇怪。

clear

X-->
	1.trello任务列表，2个任务
	2.23中设计模式
	3.改造一下uploadlogic
	V4.吉林上报工具。
	
	4321？
	
	接口是对方法的抽象。
	
	那么思考一下。
	
	我需要使用公共的接口吗？
	
	我只是使用方法吗？
	
	我使用了其所包含的，
	
	所以我这些服务等东西，是不是不应该展示给用户呢？
	我是不是应该只展示 服务所包含的方法？

	
	我是不是应该使用一个Souce将其独立起来？
	
	也就是
	BaseForm	中间是接口   使用Base的一些东西。
	
	而不是完全地去继承他。
	
	我对他的定义是将一些共同的东西封装起来。
	
	而这些公共的东西，完全可以独立给别人使用。
	
	所以继承是不太友好的。
	
	你可以每次都用一个？
	
	当然你也可以共用一个。
	
	但是绝对不是以继承的方式去用
	
	可以将类作为接口吗？
	混乱是因为对baseForm的定义模糊造成的。
	
	baseForm其实没有关系，但是你把接口封装在里面就有关系了。
	
clear
V-->	
走锁验证、
只要方案审查模块。
	
42F81BC1585A5A5     账号 guchang     123456
	
clear

V-->DWG转DWF格式。
	现在用了单张打图的，试试效果。
	
	然后再考虑下一步吧。
	it's works
	
	Vname的问题。
clear 
等待下一步需求做进一步的改造。

现在试着，
V-->考虑一下如何实现批量盖章的功能。
	
	head storm ,let it storm.

有一种实现方式是：
	每次打开的时候根据数据库查询出来加盖章。
	如果是字段为1，但是实际没有章的，加盖公章，然后上传dwg/png到服务器。如果是字段为1实际也有章的，那么判断一下？（或者不判断，直接加盖后替换并上传dwg/png上去）。

这倒是绕了一个弯给盖上去了，但是如果，我不打开呢？
那岂不是一直盖不上去。

所以最好的，还是需要

等等，它打开的原理是什么，为什么会能区分出有和没有的？难道是判断dwf和dwg?
有可能，这跟我这边又有什么关系呢？

并没有关系。

还是先看如何应对批量的问题。

看看他们是如何批量 处理的。

好吧，他是通过打开单个，然后处理，然后再关闭实现的。

所以说可以不使用mdiDoc,用AcadApplication.Doc
	
	Docments.Open();
	
	轻松一点吧。

那么我也尝试着做一下：
1.首先打开文档，
2.然后尝试着在这里面给他添加一个对象。
3.方法已经找到了，那么现在尝试着实际添加一下。
4.先做什么？
	先实现固定地方的图纸添加实体，这个 先不管文件占用的问题。
	先测试一下。
	是dwf文件还是dwg文件？
	
	从网上下载下来的肯定都是dwf文件。
	
	应该是没有关系的吧？
	dwf可能和db有关系吗？
	
	先实现加固定的对象，其他的别管。
	
	F:\\建设数字\\公司代码\\竣工图管理系统\\CompleteMapping\\CompleteMapping\\bin\\Debug\\pltdir\\64fdbb8d-13fd-46ca-a02c-e58fffe37836.png
	
	现在一直会报eLockViolated那个错
	理清一下思路
	
	首先，打开这个doc对不对？
	
	我能否后台打开？
	他报错的原因是什么呢？因为我可能是以只读的方式打开了这个doc
	
	我想想是否还可以有其他的打开方式？
	
	确实是只读的方式打开的，那么下面试着 提升为修改
	
	upgrade好像只能一个时间对一个文档进行操作。
	而且，另外一个就自动降级为只读。
	
	但是没有关系，只要是能操作就是好的。
	
	那么现在试着。
	如果是批量的盖章，那么图章应该是分开的对吧？
	业务上来说是这样的。但是也要考虑一下不同，编制人和其他人员的不同。其他人员完完全全是从服务器下载下来的新的。但是编制人的逻辑得看一下。
	
	没有报错，但是仍旧是只读，而且最后编辑了一个空的同名文件。
	
	想想有没有第二种方式？
	
	我当前打开的有可能是dwg，也有可能是dwf。
	
	但是如果我角色确定了，应该全部是dwg或者dwf。
	
	所以这两种情况都得考虑一下。
	
	那么就先考虑dwg的情况吧。
	
	所以也并没有加上去。
	
	所以是根本没有添加上去。
	
	可能是因为被写保护了，所以才会这样？
	
	他们都把当前活动文档修改成了这个。
	
	有点意思，那么我也改一下吧。
	
	我如果不修改当前工作文档，我使用当前工作文档来添加实体是成功的。
	
	我打开也是成功的。
	cnm的好烦。
	
	那另一种方式呢？ 
	
	吗的直接把其他窗口先关闭掉。
	也不行，玩你吗啊，好烦。根本没法操作啊
ok了，没有找出来两个问题，1.变量命名有问题，以至于后面写的逻辑有问题没有一眼看出来，2.当你实在不知道怎么回事的时候，可能是你的大脑需要休息，休息一下就好了。	
	
	V现在，尝试着将签名图插进去。
	
	现在试着，做什么？
	
	选个参照点。
	
	哪个点比较好？
	
	先不管，先跟着获取原点好了。
	
	X现在，再试一下，dwf文件。
	
	想想业务逻辑吧。
	
	批量盖章的角色？
	
	首先，编制人，在只有dwf底图和签名章的情况下。
	
	首先需要将dwf转为dwg文件，然后 添加签章，然后上传数据及图纸等到服务器。
	
	然后其他人员，循环获取服务器的dwg文件，获取对应的签章png文件。然后获取签章点。
	
	然后给dwg文件，添加图章。然后上传签章及文件到服务器。
	
	也就是需要把dwf保存为dwg文件的函数。
	文件名称可以获取到吧。可以，然后如何将dwf文件保存为dwg呢？
	
	这会不会跟那个一样的？
	先打开新建一个空的dwg文件，然后，插入底图？
	
	XisLinkFileUploaded
	
	XisOver
	
	下面做什么？
下面添加勾选列，参照一下，上报工具的那个，然后生成对应的filename，当然是需要完整的，然后呢？easy，根据人员角色来做判断是否生成dwg.....，反正最后都是将图章加入dwg文件里面（当然中间得需要获取点的位置等），然后将fileguid对应的数据库状态和dwg文件传到服务器。 既然要去舟山加班，那么估计得迅速一点处理了。

take it easy, 理清思路，然后实际动手去做。

顺便看一下如何插入dwf文件。

如果现在要重构代码，肯定是很麻烦的事，既然他让我做主管，那么先实现功能，后期再重构。

所以现在只要求实现就好了，不要管代码的封装。

不要害怕复制粘贴，后期重构再来解决就好了。

下面考虑一下生成章的问题。

现在考虑一下如何让生成图章更为方便调用。

勾选的问题
替换一下guid位置

去掉本地签名的判断。
每次都从服务器获取？

现在测试一下是否成功清除掉了文件。

然后报告一下定点的问题。
500 太多 调整为50
全部盖上去了。
V
现在测试一下其他人员 。
http://115.231.120.74/ECASignatrueFileServer/FileServer.asmx
获取的

f6  
634 -438
1228 -18
写一下日志
79e
{(2497718.46597041,2056032.34844399,0)}
3021
(2382130.16500666,2047132.81743843,0)}

50
如果底图高度是签章高度，

图纸的宽度，如果小于1000，基本不用改变，固定就行。如果大于1000，那么计算一下它和1000的比较，是放大了多少倍，然后根据这个倍数，将图章也同时放大多少倍。

下面找找你所看到的图纸比较合适比例的大小，然后再看看图纸大小来作为阈值。
clear

~--> 提醒工具
电子审图，专门文件，记录人身份证号，
工具登录 使用身份证号登录，

服务器通过表，内容，身份证号来向客户端发送提醒。
qmi,

服务器端ip地址用的服务器内网地址，

客户端用的外网地址。

有具体的需求以后，后面再进行重构吧。
可能涉及到跨线程调用的问题。最好来一个未读和已读，或者上次打开时间什么的。
然后可能还会出现的问题是，未响应的问题。
clear

V-->有一些构造函数，确实是为了给Form的。

那么这些使用base有错吗？
当然没有错了。
但是如果是使用的是webservice的话，	
	
说改就改吧，属于重构，对原代码并没有影响。
clear

V-->我现在有一些任务，现在需要怎么做？

首先完成重构吧。只要记得把dll
如何处理服务器连接失败的异常？
直接抛出好了。
clear
初步重构完成，下面呢？重构完成了，这不影响功能。所以，目前不用管这里了，接下来:
V-->处理一下 竣测最新提出的问题。
新需求；
V1.展示每个角色是否 确认，以及确认日期
	这个直接在数据库查询出来不就好了，其实就一个储存过程的问题罢了。。。
并且添加筛选
	
V2.各角色登录展示不同模块，以及在选择项目以后展示该人员在项目中的角色。

v3.增加确认，和批量确认的模块

4.调整盖章位置,章的大小根据A1纸大小去调整。
V调整批量盖章的位置。

章的大小，还是咨询一下，搞清楚比较好。

章漂移的问题。解决一下。

V首先，普通盖章会漂移吗？
应该不会。

V试试
V5.上传材料后实时刷新
现在他需要使用老项目进行试运行一下。

需要拷贝这个库，然后实际走一遍流程试试，但是这个只是做一下测试，理论上是不需要写代码的。
clear

-->下面呢，考虑一下对接的问题，
首先和陈阳商议一下，如果处理这个问题。

我需要知道校验赋码具体可以出现些什么数据，
然后和我之前的东西整合一下，减少我之前需要的参数？
没必要，下面对接的问题是，

已经将文档发给了东软，下面需要处理的是：
V1.和陈阳商议如果使用并跳转的问题。
	陈阳现在提出需要找平台开发岳森。
	我找第三个人，首先肯定需要我知道这个大致实现的逻辑。
	大致可能还是需要我这边和他进对接。
	他跟东软没有联系，那么他以前开发过单点登录的，可能需要再开发一个？
	然后具体的，极大可能会需要懂建模工具大致知道并有权限的人来对杭州的系统进行相应的改造。所以这个对接，我是需要的，平台开发需要的，杭州建模也是需要的。
	
	先进行沟通吧，you are not willing, because you are lazy.
	
	原来他已经有这些东西了？
	也就是带参数的跳转应该是已经有的。
	那么现在问题是，了解杭州系统的加密接口
	
	现在已经得知有这个东西了？arrange it out !
	
	very interesting.
	http://115.233.209.151:8088/EcaHtmlserver/EcaServices/EcaSingleSignOnServer/SSONanJing
	
	 http://115.233.209.151:8088/EcaHtmlserver/EcaServices/EcaSingleSignOnServer/RsaEnCode?userinfo={userid:用户ID;st_name:用户名;st_loginname:登录名}
	
	稳一下节奏毕竟这个确实是需要建模工具这边配合的，所以，自己也干不了这个活。
	即时有也是不全的。
	
	需要他建模工具上面配置。
	
	关键其实这个也不一定能得到啊，那唯一的办法是什么？
	就是我这边再写一个注册的服务？注册进入数据库？
	赋码校验出，如果是杭州，先执行一下查找用户、存在找到用户名，直接等，不存在注册一下，然后登录。
	
	我这边只能说尽量配合吧，他写不了些什么东西的。
	但是他说是可以实现的。 实现成什么样可能需要了解一下。

现在已经获取到了赋码，需要调用一下校验的接口，
localhost:8080
	http://118.178.119.15/ZWECAACCESS/ECANeusoftAccess.aspx?
	http://223.4.65.25/ZWECAACCESS
	
	
	
	info={"PrjFuCode":"2019-330108-48-01-801826","xzqh":"330185","attnPhone":"13758298810","attnName":"方建昌","OrganizationNumber":"MA2B0GPW5","CompanyName":"杭州市临安区岛石镇银坑股份经济合作社","CompanyRegNumber":"91330185MA2B0GPW5U"}
	
	当前端接收到这个code的时候，主动调取后台的函数将这个code传过去，然后执行相应的后续操作。
	
	现在考虑一下前端如果调用后台函数，
	
	click行不行
	http://59.202.28.250:8081/api_02/project?key=C99E808EDE37452F9B1735787091E32B&id=2019-330822-50-03-025278-000
	现在情况是，先加载后台代码，然后加载前端代码，Ajax是什么技术来着？ 
	
	所以还是需要使用AjaxHander，
	
	整个设计逻辑有点问题吧。
	
	runat server
	
	not on server
	
	我现在要做什么？
	
	或者使用新页面来Click? 然后实现自动跳转？
	
	一个是对接解码的页面，一个是验证赋码的页面。
	
	现在我遇到的问题的，如果在onload执行的function里面 直接调用 btn.click()，会一直循环加载 aspx的后台及其代码。
	
	如果我是用ajax技术呢？那么会怎么样？会找不到ajax函数，那么可能是我用的函数有点问题，看看网上是如何用的，而不是用以前的老代码。
	
	看看他是怎么来的?
	现在测试一下，如果是用form1 runatserver的btn是否可以正常调用ajaxapi
	
	现在暂时不想太深究这个问题，怎么方便怎么来好了。
	
	看一下他赋码校验的接口是怎么用的，如果是post，试试用js来直接Post，获取到相关信息后，直接跳转看行不行。
	
	反正尽量简单一下，不要在网页端卡住。
	
	当然我甚至都可以直接用赋码上面的东西，直接就判断他所在的地市，
	只需要知道他这个赋码就好了，然后再哪进行判断呢？
	
	我是不是太心急了？
	
	我应该慢慢来研究一下这个的实现，我有些代码都不知道是用来干什么的，所以才会导致这个问题，她说可能是兼容性的问题？可能不是，我并不觉得，但是我也不懂，fuck,慢慢来，不是一下就能弄出来的，需要一点知识好吗。
	
	首先搞清楚他的赋码校验有些什么东西吧。
	
	照理来说是可以直接通过赋码校验来的，所以我现在还需要继续研究
	
	如果有有点累，那么就试着休息一下吧，别自找压力。
	
	用postman试试，
	
	{"success":true,"result":{"id":"4B4D6E30C35011E6B9CE0CDA411D043E","code":"2016-330521-10-03-034181-000","name":"年产100万平方米新型墙体材料项目","type":"A00003","type_desc":"备案","area":"330521","area_desc":"德清县","nature":"0","nature_desc":"新建","industry":"B10","industry_desc":"非金属矿采选业","total":2560.0,"start_year":2016,"end_year":2018,"location":"330521","location_desc":"德清县","content":"项目主要采用技术或工艺，引进具有水平的设备，购置墙体复合线、分切机、打包机等国产设备。项目建成后形成年产100万平方米新型墙体材料的生产能力，产品具有特点，实现销售收入6000万元，利税900万元，创汇0万美元。生产工艺：原材料-纸芯-拉伸-定型-阻燃面纸-复合-阻燃纸板-水泥纤维板（石膏板、硅酸钙板）-复合-定型-裁切-成品-包装。","enterprise":"浙江明伦新材料科技有限公司","cert_type":"1","cert_type_desc":"组织机构代码证-企业法人","cert_num":"913305217878203939","principal_name":"何建明","principal_tel":"13606819283","principal_email":"","principal_qq":"","principal_wechat":"","contact_name":"何建明","permit_post":"","contact_tel":"13606819283","contact_email":"","contact_qq":"","contact_wechat":"","is_development_area":"","development_area_name":"","location_detail":"禹越镇欣业路218号","permit_industry":"","permit_industry_desc":"","permit_code":"","stage":"","the_industry":"","the_industry_desc":"","project_attribute":"0","project_attribute_desc":"基础建设","update_time":"2016-12-16 13:35:04"}}
	
	真是自找压力，本来就只有一个地区的在这个窗口，所以，现在不要再去在上面去实现这个玩意了
	
	首先，这个赋码不会从在这个地方得到去其他地市再获取？ 最好问一问
	
	如果是，那么非常简单地，这个就是地市
	下面需求变成了，根据项目赋码 获取地市，然后自动跳转到相应的界面去。
	
	现在需要实现的是，自动跳转功能。
	
	别再用啥赋码校验了。直接带进去就好了。
	
	现在做什么？做自动跳转的功能，
	V3.服务布置，现在服务器换掉了，而且我看了几个都无法和外网连接，配上去好像没什么意义。关键不知道应该布在哪比较好。
X2.需要修改本地的代码，中间需要使用到赋码校验接口，然后判断后直接跳转。不再显示页面了。直接跳转。
其实这个接口还是由我这边调用吧。
	X但是当然他们那边也需要配置。具体的配置问题，还是交给他们吧，配置好了后我这边才进行调用测试，
60.177.173.164

	自动跳转实现了，下面做什么呢？
	1.需要修改一下web的代码，让他有带着赋码的，自动进行校验赋码。
	2.跟进一下和杭州赋码校验的对接，看看怎么处理。
	到时候等他替换好一下程序就好了。
	杭州的怎么办？叫他们升级模块，不在意的话那么我继续处理重庆的需求好了。
		杭州的这个问题如何解决？
		再问一下？
		他们不敢更杭州的东西？
		交流一下，
	好吧，好像只能使用dll的方式来了，那么下一步怎么处理呢？
		按照文档，然后撰写好跳转到杭州建模的，应该是可以直接测试的。
		那么下面休息一下，直接使用后面种方式吧。
	可能需要知道他们登录账户存在了哪
	
	知道了，那么现在流程是这样的，
	就是把静默注册的放在
	首先查询在表里面的统一社会信用代码

	杭州市公安消防局 1B2M2Y8AsgTpgAmY7PhCfg==

http://115.233.209.151:8088/HZSgtls/#/a/m

	http://115.233.209.151:8088/HZSgtls/#/a/login?
	userinfo={userid:247;st_name:杭州市公安消防局;st_loginname:1B2M2Y8AsgTpgAmY7PhCfg==}
	
	userdate 
	
	http://115.233.209.151:8088/HZSgtls/#/a/login?userinfo=ImI0EYobhTrWnwNEhXl8mn9vHJ3IsUFIEilohb4PgfR+XMWSRdQYVHQlsn+IO7TSbXCGQtsozwmRluMwXPAVPu/pMD3njxeBwVzJ9l+XRmMIMiTpOatkegfOp7nlbDSOBdnqsbmYdVb7YtyQwqCF8enMaPaAJzWfRI8kjcthE8Q=
	
	

	http://115.233.209.151:8088/EcaHtmlServer/EcaServices/EcaSingleSignOnServer/SSODockingMain?userdata=WbW/eL5IXeN1Cz3kx/CKQbAWoNspqeMHChmAdbBGWAo8pKw0CVAV0IATKuwV2T7wVUCCRAqOnxB6OKFNvB2LrgZ53DJgFhGfyf3A0dOKjfybmcMNzvyHpLTs843hYHvVB8TZ/7TP7mSEU2P6ONn7eJspWocbcT8cYlaWRMBI6qs=
	
	{"userid":"9114","st_name":"JUNLIN01","st_loginname":"JUNLIN01"}
	http://115.233.209.151:8088/EcaHtmlServer/EcaServices/EcaSingleSignOnServer/SSODockingMain?userdata=Rsi%2f4zwplDIoUivM30vNx%2fzOc4r5Cffbz%2b%2boDvQFzQ3H2ognN0lmo8sWe%2f%2f2bOo3UmrxLt2DUXg0gtEx72D9Std4MfgFAhy%2fIufIxJvh%2f6K2oUOb9FeuzJHIw63emlEgHW7BnwPKjNVXP671H8qfOZR%2fnwKOsK1k9WN0tOVmcC8%3d
	
	现在报错，看一下是什么原因
	
	去服务器调试一下。
	
	
	http://115.233.209.151:8088/HZSgtls/#/a/m?
	好像没有这个模块
	5910	AH213213 4552
	
	
	
	
	能返回token：
	json参数: {"userid":"247","st_name":"杭州市公安消防局","st_loginname":"杭州市公安消防局"} 
	
加密后的字符串：
	KM5Y%2f%2f9nVcIv7Wo6dn7VKLFqbTcTnLPueRUumHlPxWbhB7vH9HivDXEHn39TeOkc8kJnrLvbddNN93UAiKyWxj2%2fA61B9BzyZkUkUKXbG3VqWz7RaPIguRWplO2GjccL97RnED1uv76hxXl8fXAx9Whhz1DLjm3k8uu0ScXZx%2fY%3d
	

	不能返回token：
	
	json参数：
	{"userid":"7465","st_name":"JUNLIN01","st_loginname":"JUNLIN01"}
	
	加密后的字符串：
	bXKGTp5LFuvxV8R8Cu%2bK4If6L9nO%2fQ9yrJ6WvN8%2bS8aDSe9XuyZGMUvu9iMzkhNiGgBv7%2fKzXTgt1MvilIagcfkw9irZgA4xKnRZKSVDn5z6AhmlPeemZl3XLzUSuhdm20VGWIcL%2fL5UfqEr5bkxkziYGZmIfoJ2VR8X3I%2fayoo%3d
	
	
	现在我要做什么？
	
	我需要找到在staff表里面找一个能返回token的账户。
	
	他现在给了我一个函数，
	cool 
	
	现在技术点基本通了，下面需要进行完善一下。
	
	info={"PrjFuCode":"2019-330108-48-01-801826","xzqh":"330185","attnPhone":"13758298810","attnName":"方建昌","OrganizationNumber":"MA2B0GPW5","CompanyName":"杭州市临安区岛石镇银坑股份经济合作社","CompanyRegNumber":"91330185MA2B0GPW5U"}
	
	
	15519291220
	http://115.233.209.151:8088/HZSgtls/#/a/m?userdata=TKLSRzvqUxiTtQwjZ2QkVPDXyxQDUZrIz1C1S2Tmyb5F3M2ancEBJvZ11yqROK8CekEn7wNQij1SGuggeV4bWOAMU%252BACVlkMdj%2fhdjGBNZiRi76SnQaHCRQoupvHy5pGc0uJT3zOFRdc34VdUCrOiMjzNvY04NCmLhBR2xpepTY%3d

继续处理对接的问题：
	有7个重复的corpname，那应该无所谓吧。
	
	现在通是通了的，只要服务器是通的，那么都是通的，
 
	http://223.4.65.25/ZWECAACCESS/ECANeusoftAccess.aspx?aW5mbyUzRCU3QiUyMlByakZ1Q29kZSUyMiUzQSUyMjIwMTktMzMwMTA4LTQ4LTAxLTgwMTgyNiUyMiUyQyUyMnh6cWglMjIlM0ElMjIzMzAxODUlMjIlMkMlMjJhdHRuUGhvbmUlMjIlM0ElMjIxMzc1ODI5ODgxMCUyMiUyQyUyMmF0dG5OYW1lJTIyJTNBJTIyJUU2JTk2JUI5JUU1JUJCJUJBJUU2JTk4JThDJTIyJTJDJTIyT3JnYW5pemF0aW9uTnVtYmVyJTIyJTNBJTIyTUEyQjBHUFc1JTIyJTJDJTIyQ29tcGFueU5hbWUlMjIlM0ElMjIlRTYlOUQlQUQlRTUlQjclOUUlRTUlQjglODIlRTQlQjglQjQlRTUlQUUlODklRTUlOEMlQkElRTUlQjIlOUIlRTclOUYlQjMlRTklOTUlODclRTklOTMlQjYlRTUlOUQlOTElRTglODIlQTElRTQlQkIlQkQlRTclQkIlOEYlRTYlQjUlOEUlRTUlOTAlODglRTQlQkQlOUMlRTclQTQlQkUlMjIlMkMlMjJDb21wYW55UmVnTnVtYmVyJTIyJTNBJTIyOTEzMzAxODVNQTJCMEdQVzVVJTIyJTdE
	
	http://localhost:8080/ECANeusoftAccess.aspx?aW5mbyUzRCU3QiUyMlByakZ1Q29kZSUyMiUzQSUyMjIwMTktMzMwMTA4LTQ4LTAxLTgwMTgyNiUyMiUyQyUyMnh6cWglMjIlM0ElMjIzMzAxODUlMjIlMkMlMjJhdHRuUGhvbmUlMjIlM0ElMjIxMzc1ODI5ODgxMCUyMiUyQyUyMmF0dG5OYW1lJTIyJTNBJTIyJUU2JTk2JUI5JUU1JUJCJUJBJUU2JTk4JThDJTIyJTJDJTIyT3JnYW5pemF0aW9uTnVtYmVyJTIyJTNBJTIyTUEyQjBHUFc1JTIyJTJDJTIyQ29tcGFueU5hbWUlMjIlM0ElMjIlRTYlOUQlQUQlRTUlQjclOUUlRTUlQjglODIlRTQlQjglQjQlRTUlQUUlODklRTUlOEMlQkElRTUlQjIlOUIlRTclOUYlQjMlRTklOTUlODclRTklOTMlQjYlRTUlOUQlOTElRTglODIlQTElRTQlQkIlQkQlRTclQkIlOEYlRTYlQjUlOEUlRTUlOTAlODglRTQlQkQlOUMlRTclQTQlQkUlMjIlMkMlMjJDb21wYW55UmVnTnVtYmVyJTIyJTNBJTIyOTEzMzAxODVNQTJCMEdQVzVVJTIyJTdE 
	
	http://stgl.nbjs.gov.cn/ImlksSinglePointOfAccess.aspx?info={"PrjFuCode":"2019-330108-48-01-801826","xzqh":"330185","attnPhone":"13758298810","attnName":"方建昌","OrganizationNumber":"MA2B0GPW5","CompanyName":"杭州市临安区岛石镇银坑股份经济合作社","CompanyRegNumber":"91330185MA2B0GPW5U"}
		http://stgl.nbjs.gov.cn/ImlksSinglePointOfAccess.aspx?info={"PrjFuCode":"2019-330108-48-01-801826","xzqh":"330185","attnPhone":"13758298810","attnName":"方建昌","OrganizationNumber":"MA2B0GPW5","CompanyName":"杭州市临安区岛石镇银坑股份经济合作社","CompanyRegNumber":"91330185MA2B0GPW5U"}
	
	
http://stgl.nbjs.gov.cn/ImlksSinglePointOfAccess.aspx?info={"PrjFuCode":"2019-330108-48-01-801826","xzqh":"330185","attnPhone":"13758298810","attnName":"方建昌","OrganizationNumber":"MA2B0GPW5","CompanyName":"杭州市临安区岛石镇银坑股份经济合作社",
		"CompanyRegNumber":"91330185MA2B0GPW5U"}
clear

X我现在有点复杂，have a rest 一会儿根据顺序一个一个处理吧。

他们领导找战略点确实找得挺准的。但是落地实施是否给力又是另外一回事。

V-->重庆修改需求，大部分都是，字段的修改。涉及到，页面修改、储存过程修改，需要知道具体字段。
ok 就这些，没有大的逻辑。也还行。

主要还是工作量的问题吧。

1.这个怎么处理呢？首先这些事都是我的吧？
  对这边感觉只会让我这边来处理。所以工作量是逃不过的。
2.所以需要把其他东西清除一下，然后这边，专注一点地处理这些问题，不要一拖再拖。
3.调整一下状态吧，将事情理清楚，然后一个一个地处理掉。
4.为啥感觉我这边事这么多，吗的，首先easy吧？及时清零,及时清零。

细化工作：
一个一个处理，不要心急。
	重庆几个页面企业业绩及人员业绩入库等
	先做初始化吧，封装一下。
	
	先已经完成了初始化等的，然后看一下字段是否存入进去了。
	既然不一样，那么单独进行初始化和存储就好了。
	就所属行业和所属专业不太一样，还有两个text是一样的。
	所有窗口的初始化都做了，然后保存的也好像完成了。
	然后储存过程也需要修改一下。
	当然是重庆的。
	
	还差储存过程，基本就好了。
	
	修改了两个地方。
	
	无所谓了，还有10分钟，稍微休息一下。
	
	先泡一下，然后再洗。然后周末花一天的时间去清洗一下塑料板。
	有时间再测试吧，下面继续往下面看
	页面后面再调整好了。
	下面呢？
	
	没有关系，我这边只有测试了吧？
	
	下面处理
	
	继续看看文档还有哪些 
	
	下面是项目基本信息界面的，
	一个是需要新增字段、然后需要他们给我他们已经建立的字段，然后，调整页面，修改上传字段及储存过程。
	
	http://59.202.50.185/ProjectDetail/ProjectDetail.aspx?gcdm=2018-331000-70-03-089608-000&xmdm=2018-331000-70-03-089608-000

ECA_GetPrjPublishCensorIdea
ECA_UploadDesignReplyState
ECA_AddDesignReplyStateNode

	桥梁的单孔和多孔，然后 4种程度，肯定是需要写出来的，关键是用什么方式，
	
	一个字典表能搞定吗？ 肯定可以的用 
	QLType：
	单孔跨径 L1(m)
	多孔跨总长 L(m)
	
	QLDZXType：
	10 11 12 13 特大桥（L>1000）大桥（1000≥L≥100）中桥（100>L>30）小桥（30≥L≥8）
	20 21 22 23	特大桥（L1>150）大桥（150≥L1≥40）中桥（40>L1≥20）小桥（20>L1≥5）
	
	桥梁单独初始化，
	
	然后呢？初始化完了，进行选择，
	
	加控件、重命名控件、添加字段、特殊字段初始化、字段保存。
	查询和保存的储存过程。
	
	
	
	一个页面一个页面地来吧。
	
	//如果你觉得有点累，稍作休息一下。
	
	//如果你感觉不舒服，试着改变这种状态。
	
	你想存什么？ 直接存Name还是 还是ID？
	这有什么意义？多余的东西，怎么简单怎么来好了，那不用说，我直接存Name好了。
	
	直接存Name吧，这么麻烦干嘛。
	
	现在搞一个第二个，管他的，我都存Name不就好了，随便你怎么搞。
	
	SE的做了，往下面看
	
	现在界面字段好像改完了，现在就差，储存过程了及调试了。
	
	下面就剩下调试了。
	
	如何调试？
	
	首先调试几个比较容易出错的地方
	1.项目基本信息的时间格式
	2.正常测试。
	
	冒泡测试通过，后面再进行调整。
	
	
	
	
	
clear

~-->竣工系统的需求修改
其中有一些是我的，看着改吧

还是先修改竣工图的东西吧。

竣工图的，

clear

V-->泸州勘察设计企业注册问题
	已经有了接口文档，先用接口试试。
	看了接口，是asmx类型的接口，直接在代码里面调用就好了。
	现在需要什么？
	看看传递的参数？
	
	直接把表名传进去能直接获取到表，当然也可以加where，当然要加，吗的，这么多数据，
	
	
	0000c9b9-3fb6-4ea4-919e-2e07d2a2fdf1	101	四川业锦添建筑工程有限公司		91510108MA6CH0P86A	510108	51	5101	510108	四川省	成都市	成华区	成都市成华区羊子山路68号5栋1单元15层39号	610000	成都市成华区羊子山路68号5栋1单元15层39号	610000	成华区	124000000	属地管理企业	2018-06-15	2018-06-15	110000113		91510108MA6CH0P86A	510108	5000	111000000					362017961@qq.com	02885267331	王学胜	028-85267331	王学胜	18161254075																																	0000c9b9-3fb6-4ea4-919e-2e07d2a2fdf1	2019/3/29 7:29:03	0	0	
	
	
		0eb2bcdc-9892-4f55-8575-a9e7f9770778	0000c9b9-3fb6-4ea4-919e-2e07d2a2fdf1	5101	8FCF5D2E-C427-4C13-BAD1-02961FFDDA9E	宋绪林		513022199110294831	男	1991/10/29 0:00:00					407	116	注册建造师	二级注册建造师	注册类证书	01943389	建筑(00141015)	川251141720737		建筑	2017/9/8 0:00:00	2020/9/7 0:00:00	2017/9/8 0:00:00	四川省住房和城乡建设厅	1	是			2018/11/28 18:24:56	四川业锦添建筑工程有限公司		1	二级建造师	
	31736c99-b461-4e15-aaa6-46a4391bf3bf	0000c9b9-3fb6-4ea4-919e-2e07d2a2fdf1	51	09DAE977-B0E0-4F05-8108-7EC9F8EBD8B6	张豪	身份证	51162119871213291X	男	1987/12/13 0:00:00			无		407	116	注册建造师	二级注册建造师	注册类证书	02287342		川251131485917		机电	2019/8/9 0:00:00	2022/8/8 0:00:00	2019/8/9 0:00:00	四川省住房和城乡建设厅	0	是	企业确认注销       导入数据		2019/8/15 4:56:03	四川业锦添建筑工程有限公司		1	二级建造师	
	3c1bf9b8-796b-4129-8f29-d66ee4a8db57	0000c9b9-3fb6-4ea4-919e-2e07d2a2fdf1	51	39D784C2-D837-499B-AA8F-3DFBE94ACB8B	张韬	身份证	510704198701152454	男	1987/1/15 0:00:00			无		407	116	注册建造师	二级注册建造师	注册类证书	02232352		川251121380095		建筑	2019/5/7 0:00:00	2022/5/6 0:00:00	2019/5/7 0:00:00	四川省住房和城乡建设厅	0	是	企业确认注销       导入数据		2019/5/8 11:03:37	四川业锦添建筑工程有限公司		1	二级建造师	
	V
	
	我现在要配合他们去做这个东西？
	请问我上传的服务都是完整的吗？
	
	我上传的信息？
	
	他无法得知我上传的文件大小，不知道这个有关系吗？
	
	看一下怎么玩这个东西吧。
	
	同时给他传上去？
	
	现在需要做什么？
	现在仿照他建模的东西，搞清楚他的表结构，然后
	
	我存的是什么东西？
	
	现在问清楚了，首先我有办法去伪造这个东西吗？
	第二，我是否可以继续延续我blob的做法？
	如果要延续我blob的做法，是需要他那边提供这个函数的到建模工具的。所以说呢？
	如果找他开发了这么一个函数，那么我这边可能需要做的东西就比较少了。
	他们摇号的逻辑其实是一个函数，依靠的建模脚本，跟js关系不大。
	
	他叫我试试能不能直接写js脚本？  他们连js脚本是什么都不知道。
	
	我应该如何去处理这个问题呢？
	只需要了解大概的技术流程，不需要实际去做，不需要测试，只需要了解一下就好了。
	
	另外一种方式？就是往表里面插入数据，查看一下他插入数据是如何插入的，然后如果获取到这个数据，他又是能怎么获取的？大哥理解的意思是，需要他这边再添加一遍才能获取，当然他是错误的。 所以就是需要找到他获取所需要的参数等，但是这种方式，将改变我传入blob的函数，所以可以不依照他们的逻辑自己来处理这个东西。
	
	所以这个事怎么去处理比较好呢？  废话，当然是叫他们提供这玩意啊。
	
	所以，现在做一下测试，测试能不能直接写js脚本，如果可以，那么就没有他们其他的事了。这又需要对建模工具的脚本有一些理解。问问慧文了不了解。
	
	
	
	
 v 
clear

V-->对喝水提醒服务小有兴趣，继续开发一下试试。
先这样吧。
x可以采用tooltip的方式进行提醒。
clear

V-->马鞍山对接需求： GET 方法 合格书编号  项目单体信息json   
	图审接口
	
	现在是什么情况？
	他有一个表，在另一台服务器
	
	现在我在上面直接有一个表
	
	我现在需要做的是，将自己表里面的数据，插入到他们的服务器，他们的表里面。
	
	这个一个简单的触发器可以实现吗？
	
	有两种大方向的方式：
	1.通过较官方的OGG或者DBlink方式，进行操作。
	2.使用公司以前的同步逻辑，使用时间服务的方式，这个服务布置在哪？
	如果布置在我们服务器，那么我们服务器的服务要可以调用他们服务器的数据库。
	如果这个服务器布置在对方服务器上面，那么我可能无法通过外网接口直接访问。
	当然如果他们有web服务器，直接就可以，但是这个不现实。
	所以应该是布在我们这下面？
	然后在上报的时候触发这个玩意。
	
	先尝试一下，通过比较官方的东西，OGG或者DBlink
	感觉可以在他们的数据库创建一个我们的dblink，然后通过事件，或者作业什么的，
	seems it works.
	how about now？ easy
	clear
	
V修改一下，单选上传联系单的情况。
-->
X RuleBreakTypeName  CensorMark
	 drs[nIndex]["CensorMark"])
drs[nIndex]["RuleBreakTypeName"], drs[nIndex]["CensorResultName"], drs[nIndex]["CensorMark"]);
RuleBreakTypeName			CensorResultName		CensorMark
V有时间给他们处理一下泸州四库的问题

怎么搞？24k+10k+5k  39k
	clear
V-->改成其他人确认，编制人盖章就好了。
这个也好说，开发两天左右吧。
	
编制人，盖章  
	
首先做单张盖章，
	1.获取该图纸所有相关人员的签名？
	2.因为每个项目可能都是一样的，所以，在选择项目的时候就应该直接获取到所有参与人员的图章签名。
	直接就是一个除了日期，所有签名及公司信息都在上面的底图
	然后 在编制人盖章的时候，日期加上去就好了。
	
	3
	现在我需要做的，只是生成这个签章的png图片，其他的交给郑易去处理了。
	
	也就是在签名的时候，生成这个png，然后就可以让他去处理了，这不是很简单吗，生成png图片。
	
	每选一次就生成一次 这样合理吗？
	
	我只是生成一个底图，拥有所有人签名的底图，这样合理吗？好像没有什么不合理，选择一次就生成一次呢？合理吗？  好像也蛮合理的啊，
	或者在盖章的时候生成一个，然后判断如果有了，则不再重复生成，
	
	最后一个种方案就是，每次盖章都重新生成一次。好像更加不合理。
	
	反正签名只有一个动作，不如直接生成底图，然后底图的储存格式是带有prjguid来区分的。
	perfect
	
	没有关系，不用修改，BasicStamp
	不过现在是跟项目直接关联了。
	但是stamped是加了日期后的图片，这个还是跟每个图纸相关联。
	
	一点一点来吧。
	today is Friday, take it easy, planning your weekend ,will you go to library? maybe not. are you afraid of cost? no ,need to see who will be with. do you wanna play bastkeyball, of course I'd like to, How about the university mate?
	yeah,but alse concern about the weather, my body,and place, if there is someone organize it, I'll join.
	
	
	用这个baseicSTAMP来生成prjguid.png不就好了
	clear
V-->
	2	浙江	衢州	330800	
	
	http://220.191.237.175/ECACensorServer/CensorService.asmx	http://220.191.237.175/ECACensorFileServer/FileService.asmx	http://220.191.237.175/ECASignatrueServer/PltManageService.asmx	http://220.191.237.175/ECASignatrueFileServer/FileServer.asmx	http://220.191.237.175/ECAPltQRCode/Default.aspx	
	
	29EC4EEC-28A7-40DF-A986-DE17E6E7C016	NULL	NULL	NULL	
	
	http://118.178.119.15/ECANormServer/CensorService.asmx	http://220.191.237.175/ECAReportServer/ReportService.asmx	http://220.191.237.175/ECAReportFileServer/FileServer.asmx	http://220.191.237.175/EIService/EiClientService.asmx	http://220.191.237.175/PlanCensorWebService/PlanCensorWebService.asmx	http://220.191.237.175/PlanCensorService/ccir/ManageDepart	http://220.191.237.175/PlanCensorFileService/FileService.asmx	http://220.191.237.175/PlanCensorQualifiedFileService/FileService.asmx	http://220.191.237.175/ECACensorFileServerAffixDownload/FileService.asmx	http://220.191.237.175/ECACensorFileServerAffixUpload/FileService.asmx	http://220.191.237.175/CompleteMappingService/CompleteMappingService.asmx	http://220.191.237.175/CompeteMappingFileServiceIn/FileService.asmx	
	
	2	1
	
	
	
	http://220.191.237.175/QZQciWebElec/default.aspx
	
	
	2	浙江	衢州	330800	http://220.191.237.175/ECACensorServer/CensorService.asmx	http://220.191.237.175/ECACensorFileServer/FileService.asmx	http://220.191.237.175/ECASignatrueServer/PltManageService.asmx 	http://220.191.237.175/ECASignatrueFileServer/FileServer.asmx	http://220.191.237.175/ECAPltQRCode/Default.aspx	29EC4EEC-28A7-40DF-A986-DE17E6E7C016	NULL	NULL	NULL	
	http://118.178.119.15/ECANormServer/CensorService.asmx	http://220.191.237.175/ECAReportServer/ReportService.asmx	http://220.191.237.175/ECAReportFileServer/FileServer.asmx	http://220.191.237.175/EIService/EiClientService.asmx	http://220.191.237.175/PlanCensorWebService/PlanCensorWebService.asmx	http://220.191.237.175/PlanCensorService/ccir/ManageDepart	http://220.191.237.175/PlanCensorFileService/FileService.asmx	http://220.191.237.175/PlanCensorQualifiedFileService/FileService.asmx	http://220.191.237.175/ECACensorFileServerAffixDownload/FileService.asmx	http://220.191.237.175/ECACensorFileServerAffixDownload/FileService.asmx	http://220.191.237.175/CompleteMappingService/CompleteMappingService.asmx	http://220.191.237.175/CompeteMappingFileServiceIn/FileService.asmx 	2	1
	
	2	浙江	衢州	330800	http://220.191.237.175/ECACensorServer/CensorService.asmx	http://220.191.237.175/ECACensorFileServer/FileService.asmx	http://220.191.237.175/ECASignatrueServer/PltManageService.asmx 	http://220.191.237.175/ECASignatrueFileServer/FileServer.asmx	http://220.191.237.175/ECAPltQRCode/Default.aspx	29EC4EEC-28A7-40DF-A986-DE17E6E7C016	NULL	NULL	NULL	http://118.178.119.15/ECANormServer/CensorService.asmx	http://220.191.237.175/ECAReportServer/ReportService.asmx	http://220.191.237.175/ECAReportFileServer/FileServer.asmx	http://220.191.237.175/EIService/EiClientService.asmx	http://220.191.237.175/PlanCensorWebService/PlanCensorWebService.asmx	http://220.191.237.175/PlanCensorService/ccir/ManageDepart	http://220.191.237.175/PlanCensorFileService/FileService.asmx	http://220.191.237.175/PlanCensorQualifiedFileService/FileService.asmx	http://220.191.237.175/ECACensorFileServerAffixUpload/FileService.asmx	http://220.191.237.175/ECACensorFileServerAffixUpload/FileService.asmx	http://220.191.237.175/CompleteMappingService/CompleteMappingService.asmx	http://220.191.237.175/CompeteMappingFileServiceIn/FileService.asmx 	2	1
	
	3.
clear	

	V--> 重庆最新的测试文档，看来问题还很多。
	
	后面再改造一下，

下面处理一下重庆的问题。

有思路的时候，休息一下。
	
	clear
	V--> 不要在意他们的那些东西。
clear	http://192.168.7.130/EIService/EiClientService.asmx
	
	先处理重庆的吧，这个烂摊子是不能随便放的，还有他需要亳州的四库，我什么时候处理呢？
	V-->这个要和马鞍山的一起处理。
	哪个比较轻松？先从简单的开始？
	好像也都还好，都不是很难。
	那么久先处理比较着急的吧，四库的。
	
	他人员有问题吗？
	他的四库并不唯一，所以连人员也不唯一。这个完全是他们接口的问题。
	所以这边也需要跟他们交流一下，是怎么设计这个表的。
	
	下面试试马鞍山的接口到底通没有。
	用postman试试，
	马鞍山项目信息接口看起来有问题，所以肯定还是可能是接口没有下来，那么自然亳州的也不着急做了。
	
	{[
  {
    "CORPNAME": "恒天（安徽）建筑设计研究院有限公司",
    "LEGALMAN": "聂鉴新",
    "EMAIL": null,
    "URL": null,
    "LEGALMANIDCARD": "360402196110170718",
    "ECONOMICNUMTEXT": "有限责任公司（非自然人投资或控股的法人独资）",
    "OFFICEPHONE": null,
    "REGPRIN": 1500,
    "CORPTYPE": "16",
    "DESCRIPTION": null,
    "TIMESTAMP": "2019-07-18",
    "LINKTEL": "0551-62601824",
    "LINKMAN": null,
    "IDCARDTYPENUM": null,
    "POSTALCODE": "230001",
    "LEGALMANPROTITLE": null,
    "LINKPHONE": null,
    "AREACODE": "340000",
    "AREACODETEXT": "安徽省",
    "LegalManPost": null,
    "FACTREGPRIN": null,
    "PRINCIPALUNITNUM": null,
    "REGISTEREDADDRESS": null,
    "ADDRESS": "安徽省合肥市庐阳区长江中路221号",
    "CORPCODE": "91340000485001211U",
    "CORPBIRTHDATE": "1993-10-29",
    "VALIDCODE": "485001211",
    "FAX": null,
    "ECONOMICNUM": null,
    "LICENSENUM": null
  }
]}
	

马鞍山四库好像是可以了，现在要做亳州的四库。

V顺便找找泸州的问题

现在看来，接口名称都是一样的，所以使用最新的就好了。
错了，不同的接口还是获取的不同的信息，所以如果直接使用还是会有点问题吧

当然我现在有解决方案就是依旧使用以前的接口来获取我需要的信息，但是不知道他后面会不会修改

好吧，亳州的无法使用这个详细的接口，要么叫他们详细一点？不然我这边就只能使用模糊的东西了。

我还偏偏要找问题，怎么着
  
首先我系统到底需不需要这个详细的甲级乙级？ 就算现在不需要，可能以后也需要，但是，我管他干嘛，有id不就好了。

以后需要找，你根据id去找不就好了，现在还分什么甲级乙级。 

所以我现在是什么做法呢？

1.全部统一，使用模糊
2.要求他修改接口，统一使用详细
3.马鞍山有，使用详细，亳州没有，使用模糊。
为了自己方便，去掉3，懒得找他问题，去掉2，那么现在使用1好了。
看他怎么回复吧。
人员管理的，最好让马鞍山和亳州也统一，一个人员是注册的，一个人员是企业的，好像亳州的更了解他们的系统，所以完全使用四库的。
改，肯定给他改掉。

等一下，我有他的字典表。

那个只是报一下小的希望而已，现在用最坏的打算，其实结果也不太坏，问题也确实不是我这边的问题。所以就这样处理就好了。怎么简单怎么来。

academic

V

clear

V-->提醒工具开发
	现在是走通了技术点，现在开始正式开发。需要做些什么？
	首先人员登录的问题，这个分角色的，那么我势必需要引入几个配置，引用就引用呗，然后根据配置来获取身份，我其实也可以，怎么做比较好？
	
	首先服务器需要配置吗？只是运行在服务器上面，需要db的连接字符串配置。
	
	本地需要服务器ip的配置，服务器配置用config，本地用xml好了。
	
	xml可能还需要区分身份的，
	有哪些身份？  设计院？ 图审？ 建设单位需要吗？主管部门？ 
	xml还需要配置服务器的ip和端口。
	
	然后需要考虑断线重连的问题吗？
	
	damn，等出现这个问题再说吧，一切从简，从最简单的开始做。
	
	遇到问题再思考解决。
	
	一个用户就会在服务器开启一条线程，然后，Send，我服务器是如何发送消息到客户端的？
	首先，肯定是
	我用了一个client,看来这个通信。。。只会发给后者？果然是酱紫，现在要尝试把他做一个List，然后循环这个List来进行发送。
	
	这个类我实例化的时候是分线程的，但是如果我把他作为一个静态类的话，那么是否就可以跨线程使用了呢？
	答案是不能的。  除非是全局变量，也需要同步。
	
	所以现在呢？  我还是需要顾及一下线程的问题。
	
	首先我的主线程：初始化，并设置链接
		↓开启新的监听客户端连接线程，当有客户端链接的时候
		X↓开启新接收消息线程，一个客户端对应一个线程。
		
		
		
	他可以将这个复制，
	
	稍作休息一下，处理一下这个工具的问题。
	
	给泸州用的吧？
	h
	看一下网上的
	
	先做登录的东西，这玩意需要考虑后面地市吗？ 看情况吧，写代码只需要严格按照面向对象的设计，那么就可以了，后面是后面的事，大不了重构。
	
	建设单位是不可能有的
	
	建设单位
	
	勘察单位 
	设计单位 
	
	主管部门 
	
	联合审查部门 
	
	图审机构
	
	现在不单是这些角色，我可能需要一些group来区分了。  比如我登录一个用户，然后自然会给这个用户分配一个group，然后拿着这个group去链接服务器，
	
	socket通信是谁去监听？ 是客户端去监听，所以我在服务器，应该建造不同的消息队列（主题），
	然后让客户端根据自己登录的信息去监听对应的消息栈，如果有消息，那么就主动去获取这个消息，那么服务器端需要做什么呢？
	需要监听客户端吗？ 不需要  需要提供这个栈？ 这个栈是在这服务器端实现的，这是必须的。
	一定要了解一下消息队列，感觉这玩意肯定是有用的。
	了解一下订阅。  每登录一次socket连接，就是一个订阅，服务器需要一个将订阅存起来吗？ 什么时候用？  存起来是必须的，需要一个反馈来知道消息是否被接收到吗？
	消息具有过期时间，消息为一对多，需要提前订阅，也就是订阅了以后，然后将这条消息发送给你，看来订阅者也是需要id来标识和储存的？ 一个消息栈有很多个订阅的id，然后需要这个id的接收反馈（只要是发送成功，就算是反馈，如果不是，那么就得一直发送，然后如果超过了消息的有效时间，则无需发送，将过期消息移除队列）。这里的发送是什么意思？ 我是将消息加入队列，而客户端自己来获取，如果获取成功，那么反馈消息已发送。
	这个是否发送成功的甄选有谁来处理？ 如果是客户端，那么就会重复获取很多冗余的消息数据，所以必须有服务器来处理，服务器来处理，那么必然需要接收反馈。
	
	我发送的场景是什么？ 如果有很多客户端连接服务器，这是正常的现象，所有不用限制。  
	我的这个条消息，是发送给所有相同id的客户端？对，我不是单点登录的，所以我的主题不单是为不同身份的人去建立的，而是直接是通过角色去建立的，也就是我100个不同的主管部门，那么我就得建立100个主题？  这样合理吗？ 
	所以我这个也不能叫做是，订阅。 邮箱的模式倒是是这样的。也不对，这个感觉不是同步获取的，没有用到soket通信。
	研究一下邮箱的模式是如何实现的？ 需要建立链接吗？
	应该是需要的，需要建立连接，有可能是混合的方式？
	异步，看看异步是如何异步的
	
	居然还可以通过发送邮件的方式，这有点厉害啊，直接调用他们的api？
	那其实不需要他们的qq号和密码，这不太礼貌吧。
	
	客户端登录，我会有一个标识的id，并建立连接。
	然后我这条消息，如果是发给对应的id的，那么我将会从ids里面取到socket链接，然后将这条消息发送过去，然后再清理掉这条消息？
	不是这样的，我有这条消息，和对应的id，那么我将之放到消息队列里面去。如果过期，自动删除该条消息。
	然后客户端链接，客户端建立通信，然后获取消息队列，服务器帮助删选该条信息，然后客户端获取到这条信息，服务器端将这条信息标记为以发送。客户端获取到这条属于自己的信息。
	当然服务端需要做一个什么？ 需要做一个日志，记录未发送的消息等。
	服务器端需要试试查询数据库。这是当然的了。
	
	登录验证和实际的东西分开。
	
	先做登录验证的东西，那么这玩意从哪来的。
	不用注册，注册不是我这边控制的，我只需要读表就好了。
	
	需要先知道他的账户管理的地方、 
	sys_staffdef
	统一使用的这个表，sys_staffef，
	UserLoginType字段类型
1：是建设单位2：是主管部门3：是图审机构
	
	账户必需要有一个统一的ID，不然肯定会搞混，其实，标识符加ID应该是可以区分的，那么现在就这样区分好了
	所以插入接收方的时候，一定要标明对方的身份。
	
	http://www.lzstxt.cn/LZ_SGTCensor/#/a/lz-homePage
	http://www.lzstxt.cn/EiService/eiclientService.asmx
	
	线程的问题目前看起来是安全的。
	
	无所谓了虽然我也不知道具体是怎么成功的，但是到时候出错了我肯定就知道自己是怎么出错的了。
	接下来呢？
	
	1.将客户端界面等调整一下
		区分已读未读，（先做一些处理简单好了）前面加个括号来标识，先走通技术点才是最重要的
		图标跳动等
		客户端实现开机自启动，这个倒是好像挺简单的吧
		
		
	X（主动获取消息？）登录的时候主动获取一下，其他时候都是自己发送。
	考虑异步发送和接收
	为什么我要异步发送？ 因为我想让他异步接收，也就是反正我是发出去了，什么时候接收是你的事。
	也就是出现在客户端登录了一次，然后又下线的情况。
	这目前并不能实现，算了，你对异步的理解可能错了，
	异步的意思是，我发送了，我就不管了，继续往下面发，才是异步。而不是一定要等发送这个操作结束，会失败吗？ 当然会失败了。所以仍旧是需要使用消息栈的方式去循环发送。
	也就是如果连接的客户端有这个消息，我马上就把这条消息发送出去，如果发送成功，我移除。  为什么使用队列？ 因为你的容积是一定的，一次只能发送1000条，然后，需要先把前面的发送出去，然后再发送后面的，这就是能控制，中间查询数据库的问题。
	还有什么更高级一点的东西吗？ 
	我使用栈的方式，也就是先进的后出，永远都把最新的加入到消息栈，然后再从栈里面pop出消息并发送，如果发送，我如何移除？
	还不如发送失败的直接移除到垃圾堆里面去？然后再垃圾桶处理一下这些消息，也就是我只遍历发送一次，如果发送失败，再做处理。
	
	当然最好成功的也需要记录，用来反馈给数据库。
	
	下面：
	1.继续完善 查询和 反馈的储存过程等， 然后进行调试。
	2.完善一下服务器端。
	
	优化一下客户端功能。
	休息一下吧
	
	删除重建信息表：
	tbcensortx
	字段：
	ID（主键，自增）
	SenderName（发送者名称）
	TargetID（接收者唯一标识，设计院是Fullcorpcode,网页账户为sys_staff表的唯一标识）
	TargetTypeNum(接收者标识，参照字典表tbMSGRoleTypeDic)
	Content		（消息内容）
	CreatedData 	  （创建日期，触发器默认插入日期）
	ExpirationDate （有效日期，触发器如果为null默认设置30天后）
	isSucceed		（是否发送成功）
	
	
	字典表：tbMSGRoleTypeDic
	ID  ,RoleName		,Mark
	0	 DesignCorp		设计院
	1	 Censorship		图审
	2	 BuildCorp		建筑企业
	3	 Goverment		主管部门
	4	 UnitManager	联合部门
	5	 SysAdmin		系统管理
	
	下面需要撰写储存过程
	if you feel tired, just have fun ,or find something easy to do. maybe plan ,or knowledge.
	what you gonna do tonight, find tell phone number for asking for if id card is arriving.
	invest your self. how ?
	
	下面，等待魏国伟将表改造好以后，修改储存过程并进行调试。（服务端）
	
	客户端，界面优化。
	
	看起来做了一点小的优化，现在看看魏国伟那边怎么样了
	
	给服务器端也写一个回调好了。
	顺便当是理解一下如何实现的跨线程调用。
	
	宁波设联			
	
	
	
	
	

2.服务器端，尝试连接数据库，然后将需要发送的信息读取出来，然后依次发送到客户端。
	have a rest	
	应该采用消息栈的方式来进行发送，而不是主动发送，是获取后发送，
	主动获取也主动发送，如果在线，直接主动发送，发送一次以后，然后如果有未成功的，证明不在线，然后放入待发送消息队列，待用户登录以后主动获取消息。
	他说的为了减轻数据库查询压力，但是发送怎么发送呢？ 插入到消息队列，然后队列不应该是一条一条地出来的吗？
	那也只是作为一个中转的地方，
	也就是加载到内存里面来的。
	em....也还好，想想有什么比较合适的方式。
	
	通信的鲁棒性由后面，再做处理，先一步一步来。
	
	因为异步，所以才会需要使用队列的方式。所以这就无需考虑到马上成功等问题。
	
	所以你所将的获取是错误的，正确的认识是，使用队列进行异步发送到客户端，仍旧是主动进行的。
	
	将生产者和消费者区分开。
	降低耦合。
	
	既然有一个异步调用的案例了就一定要去理解是如何运行的，如何实现的，好像是通过回调，callback，
	需要了解一下委托吗？ 需要了解回调。
	
	下面需要:
	V1.用xml本地配置的方式来判断是否需要设置自启动。
	2.
	
	服务器端时时做一个消息发送操作？no，记住这里没有发送的操作，只有获取的操作，如果客户端是实时获取的，那么久时时获取操作。如果为空可以停下来？如果插入了新信息再启动？
	
	所以，客户端向服务器端发送消息是需要的。
	而且采用获取的方式的话，还是需要服务器端开启n个线程来监听n个客户端发送的消息。
	
	还有第二种方案，750per year开一个企业邮箱，然后使用腾讯企业邮箱的api来发送邮件。
	呵呵，垃圾。
	27929068-1
	
	基本版本研发已完成，现在先让他们给意见，后期再进行修改。
	V提交一下代码，
	
	clear
	
	V-->联合设计和勘察是同一家。
	
	不太合理，需要全部重新设计，全部使用ideabelong字段好了。
	
	我只传了一个 设计院编号。
	
	但是我现在要获取的是所有的？
	
	有重和没重。
	
	需要区分。
	
	V有重，是和 主体、联合1、联合2.  也需要区分。
	clear
	http://61.190.70.122:8011/getcorpcertinfo
	V-->
	lcdf001
	0573GgDLCR3ancdUOudb5g==
		483	42F81BC157A419BB	123252	1	浙江绿城东方建筑设计有限公司	2019/9/9 15:15:58			lcdf001	0573GgDLCR3ancdUOudb5g==	123252	1	201707030231					浙江绿城东方建筑设计有限公司	False	123252-0		2020/9/8 15:15:58
clear
	X-->台州的，网页端填写的设计院联系人和项目负责人，字段冲突。
	虽然看起来只有台州报这个错误，但是其实，其他地市也有这个问题只是没有人提出来而已，那如何处理这个问题呢？
	
	台州的可以单独处理吗？
	当然可以了，but it's really fucking annoyed
	
	一件一件处理，看一下进度计划
	
	两个比较重要：
	1.台州的 
	如何处理呢？
	处理你吗啊，明天去high皮
	不行，稍微起个头就随意high好吧。
	好，就这样。
	DesignCorpLeaderName
	DesignCorpLeaderPhone
	这个字段，也没啥用吧？  这个是之前慧文设计的，我只是修改了一下的。
	项目负责人，项目联系人，直接同一个，无所谓的。
	如果有需求，填项目联系人就行了。
	clear
	V-->2.总院模块
	这个干嘛要我来做呢？这个完全由以前的ei老代码处理一样的嘛。
	我这边处理的话会怎么样呢？
	首先能不能处理，比较麻烦，但也不是不能处理的，
	他需要一个查找全部地市的，总院模块
	一个页面。可以查找所有的项目，我如何去给他处理？
	首先我可能用到ElecTuShen和uploadtool两个dll。
	第一个用来添加一个页面，根据用户的企业唯一码，选择地市然后通过唯一码来获取该企业所有的项目。 那么这样岂不是还包括勘察的。
	所以语句估计得重新写，吗的到时候说不定还要出统计的东西。
	
	现在尝试着把这个东西解决，
	然后将自己的电脑搬回去好了，然后将电脑租赁给取消掉。然后试着使用公司的电脑来进行编程。
	
	首先我已经决定这么做了，
	下面有思路吗？
	页面，单独搞一个
	
	复制一下，然后呢？ 
	逻辑也差不多，然后查询使用新服务接口和储存过程不就好了。
	接口不用新的也可以，直接有一个接口可以直接用的，那么就直接使用一个新的页面储存过程，先这样吧，后面再考虑搞进ei的事。
	
	模块叫总院项目查询模块
	
	要不直接在云平台单独搞一个模块不就好了，这样它总院的应该也是可以的对吧。
	
	他主要是想查询自己企业下面的所有项目，有字段可以区分总院分院吗？难道就是锁号的长短？
	
	如果能区分，那么就让他看到所有的项目（如果是总锁就可以显示模块），如果不能区分呢？ 
	好像不一定非要做进ei5.0对吧。反正你用个云平台来进行补充什么的都是可以的。
	
	如果是浙江版本，显示这个模块。
	
	information
	
	如果可以区分，那么直接使用的getall不就好了。
	
	直接在项目进度模块查看不就好了。
	
	其实也就是去掉锁的划分。
	
	现在是想办法区分锁的问题，如果可以区分，那其实这边是很容易的，直接加个状态什么的修改一下储存过程？
	或者新搞一个储存过程也是可以的。
	
	休息一下。
	
	现在先假设锁号大于16为总院吧。
	
	名称 All就好了。
	
	直接用all改造一下？ 可是那个好像是datatable?
	是不可以的，那么看一下执行储存过程什么的支不支持。
	
	应该是支持的，也难说，服务更没有更新不太确定。
	
	反正先做一点是一点吧。
	
	逻辑是这样的，如果有更新这个服务，那么肯定是支持这个接口的。
	支持这个接口，也就是通过修改或增加的方式来处理，如果没有那么用第一种不就好了。
	
	所以现在可以用杭州的试试，然后需要来一个总院的锁号。
	
	不一定非要吧，改造一下不就好了，真是的。
	
	登录名可能不行，但是4个锁号到应该可以查询出来的吧。
	
	好吧，看来还是要查询设计院的登录名了。 也就是每个编号都需要调用一下，接口来获取对应的登录名。
	EILockService
	没有关系，已经做了优化了。
	
	不是自己的登录账户不显示。
	
	
	
	clear
	V-->泸州删除单体，这个可以吗？
	还是通过储存过程的方式比较好吧，那么我这边就需要，或者写个存储过程直接调用？
	后面再处理吧，
	clear
	
	V-->方案审查
	建设单位可以传图纸
	bs 
	设计院
	cad提意见 建设单位回复
	
	建设单位注册
	对接
现在我需要做些什么？
想着接手这个系统（图纸审查多合一系统）的bs端、设计院cs端和cad端。
现在阳哥的需求是什么？ 目前要的是完善一些细节问题。
那么就三天的时间，看看大概的逻辑，然后走一下

	如果这样单纯地看源代码，你可能会看睡着。
	那么得带一个目的和方法来去看，
	如何去看以至于我不会睡着？
	
	业务我需要了解吗？业务大概了解
	具体实现我需要了解吗？of course，而且需要带一个问题地去了解，带着问题，有点学习的意味，当然这是学习。
	提问，把问题写出来。
	根据GB50974-2014的4.3.9的第2小条的要求：消防水池应设置就地水位显示装置，并应在消防控制中心或值班室等地点设置显示消防水池水位的装置，同时应有最高和最低报警水位
 
	首先环境得通吧？
	数据库,come on
	数据库有人在用，damn it	。
	那我今天一天都得卡在这吗？
	下个周二要去衢州出差
	做好准备
	
	没必要通吧？ 
	知道一些基础的东西就好了？
	比如说，它肯定是一个网页对吧。
	那么它就有一些页面，都是些什么页面，可以直接在vs里面浏览这些页面吗？
	页面还蛮多的，
	用的mvc 
	model 
	view 
	control
	一般就是view到control看他的通用做法，看一个实例吧。
	一个controll的文件有多个函数，有些函数对应一个页面，有些函数没有对应页面。
	用的超链接的方式？ what the fuck?这个好像首先将数据查询出来给view.data，然后返回view，然后view在加载的时候使用这些data来进行初始化。
	
	有一些js脚本里面用了这些是采用的ajax的方式 url:函数名称 返回的是Content(Convert.ToJson(dt);
	
	那这么说还是挺简单的了。学到了吗，学到了。
	
	匿名类
	
	view到control
	
	然后control到model
	如何cshtml
	这个 需要调试的时候才知道，可以在线编辑吗？idon't know hope so.
	晚点的时候记得拷一下衢州的库
	调通试试。
	本地布置。
	
	seems good.
	clear
-->看起来还有一些模块未完成：
	X1.用户登录，账户管理等模块
	X2.个人信息
	X3.还有一些Bug，超过时长，用户会话被注销了。这个可以做到跳转，已经有代码示例了。Home/54
	
	X4.页面看起来怪怪的，而且并不是很robust。
	V5.项目进度查询也有点小问题，有些是没有，没有的也没有更新。应该先置空才是，可能是直接返回了。
	V6.
	DbHelper是引用的外部dll。当然这个项目我没有，我只需要会用就好了，居然是将configuration的key传入进去？
	V7.主管部门有一个pdf预览的东西。还挺有意思的。
	
	广州那边也有需要用的，所以我们这边得做好一点。
	X8.登录框选择角色这个，应该只需要改一下文本框的样式就好了，把图片去掉。
	X9.这个数据库基本就是sys复制过来的，当然只是加了一些plan项目相关的必要表。 但是用户体系其实还不是很清楚？有哪些？ 好像没有图审部门吧，只有主管部门和设计院等。
	
	10.修改项目信息还有点问题。
	
	11.添加会审部门，选择其他审查部门、  加个table类似的
	12.插入节点有待判重（上报无需判重）。添加会审部门需要判重
	13.上传材料需要将选择的文件格式固定。Vguid 对应储存过程[ECA_AddPlanMaterial_BuildCorp]及表guid有关字段长度改为60或者更多。
	14.上传后应该马上刷新一下 材料目录()
		看看哪里有没有类似的操作可以借鉴一下。
	
	
	
	获取材料的没有获取到
	15.将勾选后显示材料等信息换成整行的点击。
	16.修改模块
	17.上报工具端也需要修改一下，上报后无法修改，但是不即时。
	即时的情况应该是上报之后不再修改，后面再瞅瞅好了。
	18.网页端控制一下上传文件格式。
	V19.建设单位，用我们的施工图的表，2.主管部门的使用oracle导进我们库的表。
	20.账户问题，使用以前的全流程账户

	V21.赋码校验。

	V1.创建建设单位的表
	V2.移植页面
	  首先这个是建设单位注册吧？不是设计单位注册
	  是的，所以说，直接复制那个corp的表对不对？ 看一下有些什么信息，看起来比较通用。
	V3.撰写注册逻辑。
		建设单位注册和登录的可以了吗？ 可以了 
		
	-->现在考虑一下主管部门的？
	首先，需要创建表
	其次，完成登录，体系。
	主管部门需要存储些什么东西？目前看来基本没有什么东西，只是简单的登录名密码id等。
	先不要急着完成这些小的东西，先理解整个需求，才能更好地设计。
	
	他是如何获取到项目的？为什么我刚新添了一个项目，然后并没有显示？
	根据tbPlanCensorPrjInfo row_guid和tbPlanCensorStaff 的prjguid来关联哪个部门的id
	
	周三需要先把项目走通。
	配置主管部门账号。
	clear
	
	现在还剩一个多小时，我现在能做点什么？
	
	1.设计主管部门的东西
	V-->2.将所有程序调通。
	
		v立项->
		
		V建设单位补充材料
		
		->
		V确认送审
		-> 	V图纸材料上传（就没有图纸材料，问清楚这个模块的功能，需要展示什么吗？感觉好像是跟报建项目的时候的模块有点类似。搞上去吧先。）
		
		审意见回复信息
		
		->
		V进度查询节点有信息。
		->V设计院
		->V主管获取项目
		->V主管受理
		->V主管添加会审部门
		->下面试试主管部门直接在
		是从四库校验过来，0120003224
			我怎么登陆？ 需要锁，而且我并没有，那么选择设计院能不能选一个有锁号的，试试。
			选择	浙江大学建筑设计研究院有限公司 结果得到的designcorpcode是0120003224 而不是锁号所保存的fullcorpcode，那怎么办？
			锁号是什么？是唯一码，在我们系统的唯一码123224
			也有可能是我们的四库接口用得有问题，测试的项目都是对的。具体咨询一下阳哥。
			即时如果这个走我们的库，那么好吧，得进入qmi库了。not so easy 
			问问他之前的是怎么获取到的。
		应该是立项以后，设计院马上补充才对吧？
		设计院补充项目，然后 建设单位再确认上报。
		V下面处理一下锁号的问题，让设计院能查询到项目，并能补充项目信息。
		现在已经将设计院添加进去了，先改一下数据库好了。
		V->
		用正式的服务器
		上面有，替换一下所有的cshtml和dll就好了，那么，现在先，
		需要往tbPlanCensorStaff里面插入数据，然后就能让其参与到项目中来。
			然后CAD端的账户维护等，也依赖于这个账户维护及
		当然也要做这个主管部门账户登录的问题，
		我现在怎么去处理这个问题？
		首先我已经有表了，现在我只需要把登录的东西稍作修改一下就好了，
		第二个是选择其他审查部门的，其实逻辑也差不多的，看一下有哪些字段是需要的吧，然后再新增上去，第二个，本地还是远程？ 先把本地能调通的再布置到远程吧。这样可以的。尽快走通。
		既然卡到主管选择会审部门这，那么就处理这个问题好了。
		
		会审部门居然是从全流程的一个web服务项目获取过来的，看看是怎么回事。
		看一下他用到了哪些字段。
		st_id 	账户id
		st_name 登录账户？
		
		deptid  部门id
		dept_name 部门名称
		一个部门下面，有多个人（窗口），我选择的时候，我选择一些账户，这个不要紧，就当做他直接选择了人好了。
所以这个不是会审部门表，更准确地说应该是会审窗口表里面包含了会审部门。
		所以有userid也是很正常的。
		现在应该是可以选人了，那么试试？
		V对，试试
		
		如果可以，下一步完成登录的问题。
		开始登陆问题，
		改好了吗？改好了试试
		
		V调个项目过来试试，从规划到住建
		但是主管部门看到的模块，是否跟市规划一样？ 默认给市规划，还是说由立项部门来进行？确认一下。
		项目信息对不对？
		有些字段没有，有些字段不对。没有的不要管，看一下不对的，显示的问题管吗？
		是不是 4库校验 过来的不对。
	
		浙江省	丽水市	浙江方圆规划建筑设计有限公司	78772304-1	0120003919	李子文	A233004298	市政行业(排水工程、给水工程、道路工程)专业丙级；建筑行业(建筑工程)乙级	乙级
	以前的表就不是同一个，现在想着怎么操作比较好？

		1.直接使用系统内的DbHelper来连接不同的数据库
		2.使用其他方式接口出来，这得依靠其他系统。考虑以后，这玩意，使用配置的方式吧。最简单的了。
		反正目前来看都是在同一台服务器下面的。
		
		主管部门，先将oracle还原到本地试试。
		
		V先还原
		然后从oracle数据库导出脚本到sqlserver数据库
		
		他有一些数据了，如何处理？
		看看差异？
		导入到我新的表还是换个表来储存？
		也就是直接修改我的逻辑，
		修改一下吧，反正以前是有的，
		看看他怎么登陆比较好
		其实就两个表，
		V看看怎么关联的，然后查出相应的数据就好了。
		
		添加一个市规划局的账户。
		oracle里面有，需要同步进去。
		如何同步？
		
		同步过来，数据是没有重的，但是主键重了，这怎么搞？ 还好，直接重新赋？
		，对全部删掉然后重新赋
		把deptdef表的id改了，那么sys_staffdef记录的那个id，那岂不是会有问题。
		
		如何把sys_staffdef也跟着改一下？
		
		主要是会换掉以前的id，这能换吗？
		
		这样，保留她想保留的id，
		然后导入进去的，全部是新的id。这样项目什么的都没有变对吧？
		
		havearest
		
		账户的问题后面再说吧，张颖的反正是添加上去了。
	现在先把注册的一些东西copy过去。
	需要：
	首先是点击四库查询，添加到这个隐藏字段的 designcorpfullcorpcode对不对？
	
	看一下
	搞清楚GetSelectCorpInfo是如何操作的
	根本就没有看到这个函数的定义，但是他还是获取到了设计院的名称，他到底是怎么操作的？我如何操作让他也可以获取到fullcorpcode等信息？
	感觉他的GetSelectCorpInfo肯定是有问题的，因为根本没有和这个函数的定义，没有linkman 把法人搞出来？
	果然是没有定义这个函数，怪不得连断点都停不了。
	乱抄代码的后果。damnit
	接下来的演示应该不是很需要调通，只是需要知道一些业务逻辑,看起来并没
	有什么业务逻辑，所以奥卡姆剃须理论，最简的。
	clear
	
-->	360100 南昌 http://59.55.120.139:8081/NCWeb/#/a/lz-homePage
	341200 阜阳 http://60.172.12.109:8081/sgt/sgt/FYWeb/#/a/login
	clea
http://220.191.236.169:8088/PlanCensorFileService/FileService.asmx
50	安徽	阜阳	341200	http://60.172.12.109:8081/sgt/ECACensorServer/CensorService.asmx	http://60.172.12.109:8081/sgt/ECACensorFileServer/FileService.asmx 	http://60.172.12.109:8081/sgt/ECACensorServer/PltManageService.asmx	http://60.172.12.109:8081/sgt/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://60.172.12.109:8081/sgt/ECACensorServer/CensorService.asmx	http://60.172.12.109:8081/sgt/ECAReportServer/ReportService.asmx 	http://60.172.12.109:8081/sgt/ECAReportFileServer/FileServer.asmx	http://60.172.12.109:8081/sgt/EIService/EiClientService.asmx	
http://60.172.12.109:8081/sgt/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	704	3
	
	52	江西	南昌	360100	http://59.55.120.139:8081/ECACensorServerOracle/CensorService.asmx	http://59.55.120.139:8081/ECACensorFileServer/FileService.asmx	http://59.55.120.139:8081/ECACensorServerOracle/PltManageService.asmx	http://59.55.120.139:8081/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://59.55.120.139:8081/ECACensorServerOracle/CensorService.asmx	http://59.55.120.139:8081/ECAReportServerOracle/ReportService.asmx	http://59.55.120.139:8081/ECAReportFileServer/FileServer.asmx	http://59.55.120.139:8081/EIServiceOracle/EiClientService.asmx	NULL	NULL	NULL	NULL	http://59.55.120.139:8081/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	706	3
	http://59.55.120.139:8081/NCSGTWeb/#/a/login
	看来衢州Plan的并没有布置上去。
	这个项目放了好久了。
	
	主管部门可以在网上提意见，也可以在CAD提意见
	设计院和建设单位传文件。
	
	上传文件的时候控制 其他文本为pdf，图纸dwf
	默认为规划局，然后由规划局来选择哪些部门是联合审查的。
	
	然后调试需要使用google浏览器，并且需要把所有相关的项目都走通，。
	
	主要把建设单位和设计单位的走通，他们的数据库是在同一个表里面的。
	ok，有些问题你看，其实是浏览器的问题。
	现阶段的主要目标是走通然后足够演示。
	
	下班之前把服务器地址给他配一下。
	clear	
-->http://60.172.12.109:8081/sgt/sgt/FYWeb/#/a/login
	clear
	-->当然还有登录的这些等。
	找到了，休息一下。
	V下周二确定去衢州出差，那么你需要在那段时间集中点精力去把这个项目走通。并使它robust。
	1.交流以后再行你的计划和打算。
	所以我现在得需要先了解这些信息，然后为了交流顺畅。
	clear
V-->他比较着急，今天下午先给他处理一下，屏蔽掉泸州的选择联合审查部门的问题。
无所谓，先修改，再找问题，然后更新。
220.191.237.175
clear
    
	V-->今天下午的任务需求，列出一百来个你所使用的cad二次开发函数。
	所以，考验你效率的时候到了。
	clear
	
	V--> 今天要做什么？
	有点乱，首先他们倒是提出了一些需求。
	这个项目你怎么样？内心怎么样呢？ 
	你与足够的知识储备来应付这个项目吗？ absolutly yes.
	那么现在你的问题是什么？
	1.不知道时间如何安排
	2.对需求了解不多
	3.对网页端的修改并不饱含自信，需要学习一些新的东西。
	4.我需要一个实施来corperation.
	
	下一步怎么走？ 不是马上接手吧，慢慢来。
	
--> 他有哪个地市的需求来着？	
	
			DesignCorp = 1,
            Censorship,
            BuildCorp,
            Goverment,
            UnitManager,
            SysAdmin,
            Other
	ok，下午发给他好了。
	
	V还有袁忠华的，交给他来处理。
	clear
	V-->绵阳也使用泸州同样的四库，
	然后封文龙给了我几个安徽四库对接的东西。
	
	阜阳和池州
	clear
	
	理一下，
	我们解决的问题是什么？
	代替线下，每问一个部门都需要规划局的认可单，而现在规划局进行牵头，这样将通过系统传达认可。
	
	
	
	规划局想出一个自动比对修改的。
	
	线下是怎么个操作？
	全部图纸
	筛选，这些增加用户体验的操作。
	实际审图的时候，有可能只是审几个专业的。
	账户统一。
	
	重点是什么？ 线下转线上，实时，
	
	出一个PPT？
	反正看一下吧，把逻辑理一下。
	
	逻辑大致理出来了，下面把他换成一个流程图，
	然后呢？ 
	然后实际走一个简单的系统进行演示一下。
	代码方面呢？
	哎，先检查一下情况，测试一下分屏显示的可以用吗，如果不可以，集成并调通。搞清楚cad端需要些什么东西，
	然后网页端按照提出来的东西进行优化。
	
	如果觉得累了就稍作休息一下，不要紧的。
	
	cad端看起来也有一些东西需要调通。
	
	烂就烂吧，先看看什么情况好了。
	
	
	
	调通cad端，这样吧，还是使用一个最新的来搞吧。其实我很抵触，休息一下。
	现在什么问题卡着我了？
	cad端报错卡着我了。
	所以一定要先把cad端调通。这需要花费时间吗？是的。
	这需要花费一定的时间， 现在既然是你负责，那么这些时间也是应该要花的。不是吗
	
	主管部门的登录问题，
	这边居然还是调的以前的接口，现在尝试着换成现在的，现在本来用的也是mvc，照理来说应该是可以直接调用的，大不了给他新加一个。
	现在换一下，先看看如何调用post网页端
	
	看来需要新发布对外的接口了。
	"{\"url\":\"" + url + "\",\"issucceed\":\"" + 0 + "\",\"alterMsg\":\"" + "企业查询失败！errMsg:" + errMsg + "\"}";
	
	http://localhost:4522/login/ClientLogin?userinfo={"LoginName":"张颖","LoginPassword":"1","UserType":"2"}

	select t1.deptid as DepartId,t1.st_id as censoruserid,t1.st_passwd as PassWord,t1.st_name as Username,t2.dept_name as censordepartname,* from sys_staffdef t1 left join sys_deptdef t2 on t1. deptid = t2.deptid where st_passwd='xMpCOKC5I4INzFCab3WEmw==' and dept_name is not null
	
	48	72	xMpCOKC5I4INzFCab3WEmw==	613	衢州市城建设计有限公司	72	613	613	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	6	0	NULL	6ECAC1AA-BC96-4D89-AE56-ADF095A703EC		613	0	NULL	NULL	NULL	48	衢州市城建设计有限公司	0		1	333000015546	E90D6972-6E33-4077-82FA-BF4006AC71D9	2017-06-15 00:12:20.297	NULL
25	75	xMpCOKC5I4INzFCab3WEmw==	衢州市公安消防支队衢江区大队	衢州市公安消防支队衢江区大队	75	衢州市公安消防支队衢江区大队	衢州市公安消防支队衢江区大队	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	Q	0	NULL	{EB46A60D-38BC-4313-8C53-CED2A57729DE}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	tredf-PC	25	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	QUZHOUSHIGONGANXIAOFANGZHIDUIQUJIANGOUDADUI	0	NULL	NULL	NULL	25	衢州市公安消防支队衢江区大队	0		1		{563A1FCB-A5DD-45DF-8BF5-9CE5D726ACFC}	2017-10-30 13:49:18.000	0
62	98	xMpCOKC5I4INzFCab3WEmw==	开化县住建局	开化县住建局	98	开化县住建局	开化县住建局	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	K	0	NULL	{695C867B-7C09-41AC-8157-EBFFE060CDCA}	NULL	NULL	0	0	NULL	NULL	13757015547	NULL	admin-PC	62	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	KAIHUAXIANZHUJIANJU	0	NULL	NULL	NULL	62	开化县住建局	0		1		{6A4B1525-9664-48B9-933C-DD93B446AD1F}	2017-06-29 12:48:07.000	0
227	235	xMpCOKC5I4INzFCab3WEmw==	浙江金盾	浙江金盾建设工程施工图审查中心	235	浙江金盾	浙江金盾	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	Z	0	NULL	81C2F200-423A-4D0C-A7BE-A85E2F7CE818	NULL	NULL	0	0	NULL	NULL		NULL	PC-20180414KNTT	227	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	ZheJiangJinDun	0	NULL	NULL	NULL	227	浙江金盾建设工程施工图审查中心	0		1	3301000301040018	CE171255-8EA8-406D-BBDE-C704656FC9BC	2017-09-21 15:06:01.760	NULL
532	757	xMpCOKC5I4INzFCab3WEmw==	张颖	市规划局	757	张颖	张颖	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	NULL	NULL	NULL	80B6AA46-C50E-49A2-9786-90B0B8253A53	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	532	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	532	市规划局	0	NULL	1	NULL	E2EB8AF2-EF30-4976-A936-73D7227B5E08	NULL	0
99	1010	xMpCOKC5I4INzFCab3WEmw==	义乌住建局审批科	义乌市住建局	1010	义乌住建局审批科	义乌住建局审批科	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	Y	0	NULL	{44E7F1E3-A9B3-463A-A83E-8743B85C6A0D}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	Lenovo	99	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	YIWUZHUJIANJUSHENPIKE	0	NULL	NULL	NULL	99	义乌市住建局	0		1		B4507919-D72B-4093-98C2-25629B884D62	2017-08-01 00:26:33.460	NULL
	
	http://220.191.237.175/plancensor/login/ClientLogin
	
	
	\"userinfo\" ={ \"LoginName\":\"张颖\",\"LoginPassword\":\"xMpCOKC5I4INzFCab3WEmw ==\",\"UserType\":\"2\"}
	
	感觉登录的好像是可以了一样，那么下面
	走一个完整的项目测试一下？
	
	V更新到正式，然后走一下 流程吧。
	
	他说注册的走不通？  我好像是把接口换成以前的了，所以不通也是正常的，因为这个库，是走的前面的库，不是走的我们的库。
	
	如何处理这个？
	
	安装的时候需要执行一个文件，这个文件是用来做什么的？
	写注册表的，然后写进去的值，是将当前的安装目录，作为值写进注册表。
	1.需要修改这个路径值，如何获取当前的安装目录？
		我执行第一个的时候，好像有这个操作，就是获取当前路径的操作。
		反正两个都是同格式的文件，不如直接写在一起。
		那么我第二个肯定也是可以获取到这个值的。
		所以修改也就好说了不是吗。
		F:\建设数字\公司代码\CAD\CityPlanCensor\outdir\RunCPC.exe  %1
		
		直接修改好像不管用？ 为什么？
		这样，先试着读取一下试试
		读取是可以读取的，证明路径是对的
		
		只是修改出问题
		
		
	2.执行操作
	    明天再交流一下这个vbs如何修改root的注册表值，如果实在不行，只能绕过去了。
		
		=感觉应该是不行的，那么只有绕过去了。
		如何绕过去？
		现在通过注册表修改文件的内容，然后呢 
		
	看来是可以了，现在在做安装包的时候，运行一下就好了
	
	V下面试着做一个安装包出来，最后运行的命令行参照之前的脚本。
	http://117.149.224.15:37780/plancensor/login/index
	
	V1.安装包。
	
	2.温州部署。
	有个地方需要改一下。 
		默认上报规划局那
		
	找一些登录账户。
	比如主管部门
	建设单位 
	
	市规划局的账户
	
	573	53296	xMpCOKC5I4INzFCab3WEmw==	平阳县住建局质监站	平阳县住建局	53296	平阳县住建局质监站	平阳县住建局质监站	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	P	0	NULL	{953AB5DB-ED2E-43EC-ACDD-EF5D829E2D79}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	USER-20190107NE	573	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	PINGYANGXIANZHUJIANJUZHIJIANZHAN	0	NULL	NULL	NULL	573	平阳县住建局	0		1		3616062F-E92D-499F-BF7B-0204D8B2DCE4	2018-07-23 09:15:22.910	NULL
53450	53450	xMpCOKC5I4INzFCab3WEmw==	浙江中联建设工程施工图审查中心	浙江中联建设工程施工图审查中心	53450	浙江中联建设工程施工图审查中心	浙江中联建设工程施工图审查中心	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	Z	0	NULL	{EB8DCEBE-F017-4212-B9BF-EC036C94C51E}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	KSHONG-PC	53450	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	ZHEJIANGZHONGLIANJIANSHEGONGCHENGSHIGONGTUSHENCHAZHONGXIN	0	NULL	NULL	NULL	53450	浙江中联建设工程施工图审查中心	0		1	3301000301040007	{C7CF110C-8774-4192-93BC-555B0F865E71}	2019-03-05 19:14:35.000	0
53626	53626	xMpCOKC5I4INzFCab3WEmw==	浙江城建建设工程施工图审查中心	浙江城建建设工程施工图审查中心	53626	浙江城建建设工程施工图审查中心	浙江城建建设工程施工图审查中心	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	Z	0	NULL	{63FA74DE-F1A6-4216-8371-E7DFBC9EEA6F}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	li	53626	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	ZHEJIANGCHENGJIANJIANSHEGONGCHENGSHIGONGTUSHENCHAZHONGXIN	0	NULL	NULL	NULL	53626	浙江城建建设工程施工图审查中心	0		1	52330000MJ8730779E	{3F9573AB-BB68-4DFA-BF27-100D965E4F09}	2019-03-26 22:06:48.000	0
522	54082	xMpCOKC5I4INzFCab3WEmw==	龙湾区住建局测绘管理科	温州市龙湾区住建局	54082	龙湾区住建局测绘管理科	龙湾区住建局测绘管理科	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	L	0	NULL	{30839D4B-9A8A-49FF-9EFF-B2D7CE46A353}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	J3W3JKO3ZDZGYCB	522	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	LONGWANOUZHUJIANJUCEHUIGUANLIKE	0	NULL	NULL	NULL	522	温州市龙湾区住建局	0		1		A2983272-1F29-4807-AF2C-6E8FA31D1D48	2018-07-23 09:15:22.910	NULL
510	54178	xMpCOKC5I4INzFCab3WEmw==	温州市前期办	温州市住建委	54178	温州市前期办	温州市前期办	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	W	0	NULL	{9528E506-5EFF-4FF2-AC8E-847C3D9827DC}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	SKY-20181017QBN	510	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	WENZHOUSHIQIANJIBAN	0	NULL	NULL	NULL	510	温州市住建委	0		1		A17C3E2F-A397-4289-B298-9B5013248580	2018-07-23 09:15:22.910	NULL
54406	54408	xMpCOKC5I4INzFCab3WEmw==	温州市质监站	温州市质监站	54408	温州市质监站	温州市质监站	xMpCOKC5I4INzFCab3WEmw==	NULL	NULL	W	0	NULL	{4539BD02-95E9-46E2-885B-B99BC3C9271F}	NULL	NULL	0	0	NULL	NULL	NULL	NULL	DESKTOP-LN057	54406	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	普通用户		NULL	NULL	NULL	NULL	0	NULL	NULL	NULL	NULL	NULL	WENZHOUSHIZHIJIANZHAN	0	NULL	NULL	NULL	54406	温州市质监站	0		1		{BB279A6A-6DA5-4A6D-B22F-5D5568E1B089}	2019-07-30 10:28:57.000	0
	
	
	有些默认写死的，先用触发给他解决掉好了。
	
	v添加规划局账户，找一下建筑单位的账户，用来测试。
	3.网址给 企业微信	严树凤
	
	我是否能找到那个项目？
	
	杭州起航投资有限公司
	
	select t1.deptid as DepartId,t1.st_id as censoruserid,t1.st_passwd as PassWord,t1.st_name as Username,t2.dept_name as censordepartname,* 
	from sys_staffdef t1 
	left join sys_deptdef t2 on t1. deptid = t2.deptid 
	where st_loginname='{0}' ", LoginName
	
	insert into sys_staffdef sys_deptdef
	
	有规划 
	
	deptid = 514
	
	select t1.deptid as DepartId,t1.st_id as censoruserid,t1.st_passwd as PassWord,t1.st_name as Username,t2.dept_name as censordepartname,* from sys_staffdef t1 left join sys_deptdef t2 on t1. deptid = t2.deptid where  st_id in (757,532)
select * from tbBuildCorpBasicInfo where UserPwd = 'xMpCOKC5I4INzFCab3WEmw=='

select * from sys_deptdef where deptid = 514
select * from sys_staffdef where deptid = 514
insert into sys_staffdef (st_id,st_name,st_loginname,st_passwd,row_guid,deptid)values(54942,'温州市规划局','温州市规划局','xMpCOKC5I4INzFCab3WEmw==',NEWID(),514)
	他有些表的结构不一样
	怎么搞？ 
	删除，然后一个一个导过去？
	转换工具好像要的吧
	会不会把触发器也给删除掉了
	到时候瞅一眼	现在有人在服务器上面，所以先不着急处理好了，看一下cad的那个地市是怎么来的？
	配置文件里面来的。
	说实话，我cad根本没有测试多少。
	这肯定是有问题的。
	让他们测吧，反正既然他们都说已经完成了，
	SELECT t1.* FROM dbo.tbPlanCensorPrjInfo t1 LEFT JOIN dbo.tbPlanCensorStaff t2 ON t1.row_guid = t2.prjguid WHERE t2.censoruserid=53701 and (isshouli<>1 or isshouli is null)
	大致调通了，下面将安装包等发给 树凤
	下面呢？
	尝试着把电脑腾出来
	V先打包，发个测试。
	想想怎么搞？  
	不管今天做什么工作，把他放在新的电脑上面去。安装一下vs2017.
	2019安装有问题？
	怎么处理？
	跟win7好像有点关系，那么要不。。。使用win10的那台主机？
	或者把系统装成win10的
	装成win10需要花的时间太多了，直接把主机换一下算了
	这样好吗，没有什么不好的。
	艹，这么卡的吗？
	什么鬼东西啊，User2，好吧，登录进去了
	然后试试。
	然后把自己的笔记相关的都提交到github上面。
	所以还需要下载一个
	绵阳也使用四库校验。
	must i act seems very busy?
	maybe maybe not.
	没事，该装的软件，该拷贝的文件以及拷过去了，装好了。所以下一步，
	clear
-->与其像一个咸鱼一样jzhmdyz，不如仔细思考一下下面工作的安排。
	理清一下思路，
	我现在要做什么？在台式机上面完成开发。
	我可以直接把我目前的东西提交到git，然后到那边去下载啊，怎么没有想到这个呢？
	clear
-->接下来：

1.试着转换成oracle版本
这需要涉及到网页端、上报工具、cad的数据库交互部分，也就是Service部分。
	看情况将dehelper重构成郑易3to1的debhelper
2.网页端的页面优化，以及等待他们提出需求。

it's already 5:30 time to toke.
晚上有什么打算？
当然是打打球了，练习一下转身，以及科比的虚晃。
how about house, deside this weekend, then cost a week for movement.
还有其他需要训练的内容吗？ 有的，但是我暂时有点想不起来。

考虑一下装换成oracle吧。
我如何处理？
首先，看看这个dbhelper，看看他们是谁研发的，交流一下？
如果是慧文研发的就好了，但是看起来不太现实。
如果我需要直接对原项目进行重构以支持oracle的话，我肯定需要考虑到兼容以前的，兼容以前的好处理吗？还是说自己单独封装一个dehelper？
虽然有一个providerName，但是根本就没有用到，所以使用郑易的3和1是必不可少的了。
别考虑兼容什么的，直接放弃掉，自己搞一个不就好了。
反正现在地市不多。
	自己封装dbHelper。
	幸好易大师的dbHelper是可以直接用的。
所以下面呢？
	是否需要将dbhelper替换掉？
	算了吧，有很多其他项目也引用了这个dbhelper，所以如果修改，涉及的东西太多了。反而麻烦。
	直接自己封装一个差不多的就好了。
	那么就是将易大师的dbhelper提取出来，新建一个项目来进行封装了。
当然还有一些plan的存储过程，看看还有哪个地市要方案的，看看存储过程翻译过了没有。
答案是，并没有。 没有关系，几个脚本而已，饭后先把
	直接用还是怎么搞，需要那啥吗？
	需要封装吗？感觉不太需要啊，吗的，我的项目我做主，别人的项目一律不予修改。
clear
-->http://59.55.120.139:8081/ncweb/
52	江西	南昌	360100	http://59.55.120.139:8081/ECACensorServerOracle/CensorService.asmx	http://59.55.120.139:8081/ECACensorFileServer/FileService.asmx	http://59.55.120.139:8081/ECACensorServerOracle/PltManageService.asmx	http://59.55.120.139:8081/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://59.55.120.139:8081/ECACensorServerOracle/CensorService.asmx	http://59.55.120.139:8081/ECAReportServerOracle/ReportService.asmx	http://59.55.120.139:8081/ECAReportFileServer/FileServer.asmx	http://59.55.120.139:8081/EIServiceOracle/EiClientService.asmx	NULL	NULL	NULL	NULL	http://59.55.120.139:8081/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	706	3
clear

接下来继续完成，dbhelper的转换。
暂时先不管，以前sqlserver版本的，先把目前的oracle版本解决掉。

-->
http://jsgl.zfcxjw.cq.gov.cn:6018/CQSGTWEB/#/a/login
44	重庆	重庆	500000	http://jsgl.zfcxjw.cq.gov.cn:6018/CQCensorServer/CensorService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/ECACensorFileServer/FileService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018 /CQCensorServer/PltManageService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	http://jsgl.zfcxjw.cq.gov.cn:6018/CQCensorServer/CensorService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/CQReportServer/ReportService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/ECAReportFileServer/FileServer.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/CQEIService/EiClientService.asmx	NULL	NULL	NULL	NULL	http://jsgl.zfcxjw.cq.gov.cn:6018/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	401	3
clear

已经基本反映成oracle的了，这么来说，我布在泸州的服务器上面试试，如果可行，然后再翻译一下上报工具的存储过程和研究一下cad端的一些东西应该就好了。

http://www.lzstxt.cn/plancensor/login/index

提示没有安装provider，咨询一下郑易好了。

他没有回，那么试着装一个provider?
如何装？
先不用装，
郑易给了意见，是因为我的配置有问题。

仔细分一下。

首先，确定是数据库的问题对吧。
其次，会不会跟我这个编译出来的.net framework有关？
	网页能正常浏览，关键的，就是这个OracleClient，但是我看了一下，他们的版本都是一样的啊。
	tbcensorconfig
	
我网页是可以浏览的。

休息一下吧 
仍旧是报无法找到Provider的错误，那么，这个Provider是从哪来的呢？

我只需要提供一个Provider，本地为什么不行？ 我试试我的电脑行不行，
提交一下代码吧。

太蠢了，浪费时间，不要对自己的代码这么放心，最好调试一下。

首先，这个联合审查的相对独立的项目，其他服务呢?用来做些什么的呢？
暂时不予考虑，现在需要做的是什么？
将这个服务布置好，然后呢，
布置个屁，布了也是白布。
反正他们也不用的网页端。
不用好像也没有关系吧，反正oracle的我是搞下来了。网页端的任务算是完成了，所以下面把
上报工具和图审端弄一下。

现在怎么去弄呢？
先看一下衢州的有哪些存储过程，然后拷出来。
然后再还原上去。

jsgl.zfcxjw.cq.gov.cn:6018/CQEIService/EiClientService.asmx

PLAN相关的应该都可以存储过程是可以了，那么下面呢？
修改一下上报工具。
让泸州可以找到 报审的项目先吧

Plan的服务怎么样呢？
没有的话叫他布置过来就好了。

布置了以后的话，我需要什么？
改一下地址服务器的地址。
让他走通

现在需要做些什么？
1.上服务修改一下配置，然后呢？我数据库根本都没有还原过来吧？ 是的，并没有，那么就需要伪造数据？
是的，需要伪造数据，我可以随意报建一个项目吗？试试好了。设计院选多少？cao，是从4库过来的，没事，先搞进去一部分好了。

很奇怪，为什么我现在对新的项目需求有点都不感兴趣呢？

工作态度真的有问题不是吗？

我现在需要怎么做？
我手里有活吗？absolutely yes.
我应该把他们处理完吗？ yes 
我应该用最快的速度去处理吗？ no 
我需要计划一下我的时间和工作量吗？yes 

为什么我会陷入这种状态，就是因为没有计划。
no plan 

没有计划，是因为没有目标吗？ yes 
没有前进的目标，所以导致现在进程有点问题。
对，有问题找上来的时候，我可能会积极处理。那么现在问题不就是找上来了吗

我说过我需要一个实施，但是全部出差去了。

-->我现在有计划了，把这个名义上交给我的项目，做好。TROUBLE MAKER
现在有其他人在推动你了，你应该积极主动一点，不然会更加烦恼。
clear

如果不去主动，那么我就是给多少钱办多少事的状态，我不应该怎么做，我应该永远保持办多少事给多少钱的状态，这样我永远给了别人 压榨自己的机会，那么我也将在他们想要回报我的时候索取更多，或者直接让资本沉没掉。

说实话，我这一个周都没有什么心情去处理，我只想早点搬家然后过上规律的生活。damn it!

我现在需要上服务器，将服务配置好
然后修改一下地址
上报工具大致是通了。下面就剩下cad端了。
然后网页端他们自己来好了。

tbPlanSpecCatalogDic 

那么下面呢？
将cad端调通吧

今天稍微好一点，没有那么累，还是需要多休息。


好像是用的CensorService

GetCensorShipStamp

看看是哪个项目，具体了哪些函数

免费入住？
1400
卧槽
（）

一个服务：
http://220.191.237.175/ECACensorServer/CensorService.asmx

就看看这个项目好了。
3合一里面是有的
在服务器上面找找好了

http://www.lzstxt.cn/ECACensorServer/CensorService.asmx

1.前期联合部门同事共同搭建项目框架；
2.后期负责项目整体需求功能调整；
3. 配合实施、销售对项目进行推广、培训及新需求功能模块撰写、调整等。

登陆怎么处理呢？
1.使用自己的？
2.使用别人的？
使用自己的吧。
等等，我这边是没有做的。
所以看看代码好了
用的全流程的地址，那么说，这跟哪一样？
衢州一样吗？
V是一样的。
那么，现在这么说，我这边好像是可以了。
现在想办法测试一下吧。
需要测试那么就需要一些测试数据
从网页端下载一下测试数据吧。
然后需要走一个测试项目吗？
肯定的了。

现在需要吗？ 
暂时不需要，这个周末把房子搬迁的问题解决了以后，然后就可以开始疯狂工作模式了。
所以今天正好有点累了，没有关系休息一下好了。
80
8080
8081
1521  3389
117.157.233.200	
clear 
现在怎么样？
everything is ok ?hard work time,let's begin!

v1.比较紧急的是，重庆的需求。
	ProjectType 2为勘察 
	1为设计
	现在找到如何生成的这个catalog
	如果没有是怎么生成的，找错地方了...
	V	
-->方案审查

通过手机 获取方案图纸接口
王钰
1.首先文档资料，截图保存到同一个文件夹
2.项目已经到了推广阶段
3.他们有提出测试需求
4.泸州Oracle版本
5.登陆对接 登陆 平台 
6.安卓 手机端接口

clear
prjfunction
V-->上报
bim  
首先马鞍山和重庆的有文档的问题都处理了，下班的时候更新一下就好了，更新。

现在呢？have a rest
clear

-->然后泸州？
	泸州的就方案审查
	 做到了cad，如果cad通了就好说了。

今天处理一下，oracle的版本。

x衢州的是多少？
登陆模块试试好了。

需求不是很多，看看有么有新的功能需求吧，
然后继续处理Oracle版本的？
还是说比较着急，直接处理他们的？

do not think too much,
current is most important.



ECA_GETPRJCATALOGBYUSERID
	
	http://www.lzstxt.cn/PlanCensorService/ccir/ManageDepart/GetCensorPrjCatalog?UserId=3235
	
	ECA_GETCENSORPRJCATALOGBYUSERI
	现在我需要去衢州，将这些damn的存储过程拷过来。
	并翻译成ORACLE
	
	休息一下吧。
	
	把所有的存储过程都翻译一遍，这是必不可少的damn it!
	V    ECA_AddPlanCensorOption
	V    ECA_AddPlanOkPlt
	V    ECA_GetPlanOkDrawChapterInfo
	V    ECA_AddPlanOkDrawChapterInfo
	clear
	都翻译了一下了，理论上面基本都通了不是吗
	所以下面呢？ 
	需要走流程试一下吗？
	暂时不需要吧，下面，配合他们走流程，然后辅助性地修正错误就好了。

V-->有可能无法启动是显卡的原因？
我现在想怎么处理呢？
1.我会考虑重装系统，这样的话，大部分软件会丢失。但是数据还在。
	但是我不清楚重装系统是否能解决问题
2.不重装系统，而是考虑继续坚持计算机来查找到具体的问题。这样会比较难不是吗？
	有点难，但是是最好的解决方案。
3.它确实是一台工作非常合适的电脑。（对于写代码来说，确实很好用）
	完全不娱乐，那么就会考虑替代了。
4.
我已经用最好的解决方案解决了，当然其实我并没有做任何事，他自己就好了。
clear
V-->现在处理一下衢州方案设计审查的。
	
	晚上去看看javaScript的书吧，吗的。真是烦得要死，浪费时间。
	并没有js的书，还是得在网上买，是时候深化自己的技术了。
	那么你想从事哪方面呢？
	turn to :workstuff

document.getElementById("table").rows[i].cells[0].getElementByTagName("input")

singleCheck(a);

function singleCheck(a) {
            var checkboxs = document.getElementsByName("btSelectAll");
            for (var i = 0; i < checkboxs.length; i++) {
                if (a.value != checkboxs[i].value) {
                    $(checkboxs[i]).attr("checked", false);
                }
            }
        }
V-->下面审查意见数据库查询脚本有问题，看看什么原因。
SELECT DISTINCT t1.optionguid,t1.insertdate,t1.departoption,t1.replayopiton,t1.replaydate, t2.censordepartname FROM dbo.tbPlanCensorDepartOption t1 LEFT JOIN dbo.tbPlanCensorStaff t2 ON t1.userid=t2.censoruserid WHERE t1.PrjGuid=
clear
V-->还有页面时间久了报错的问题：CensorReplayIdea
clear 

-->单点登陆
	复用施工图的。
   哪里的单点登陆，
   这个仍旧是和政务对接
	clear 

试着处理一下我电脑的问题，
	继续把generation的问题思考完。
-->所以下面处理的话，还是处理一下，重庆的需求吧。毕竟正式上线了。
	1.勘察项目对接。
		首先勘察项目，会要求填写项目编号，
		http://47.108.80.111:8011/user/login?userName=scxt&userPwd=scxt@123
		{"status":0,"msg":"加载成功","data":{"userId":"6","userName":"scxt","userPwd":"scxt@123","userRealName":"审查系统","userNewPwd":"scxt@123","userPhoneNum":null,"userPoliceID":null,"userDeptID":null,"userDeptName":null,"userRoomID":null,"userRoomName":null,"userZoonID":null,"userZoonName":null,"userEmail":null,"userQQ":null,"userSex":null,"userCCP":null,"userPicPath":null,"userAdress":null,"userGraduateSch":null,"userMajor":null,"userQualification":null,"userQualificationName":null,"userContractTypeID":null,"userContractTypeName":null,"userPositionID":null,"userPositionName":null,"userRegistStageID":null,"userRegistStageName":null,"userRegistFailReason":null,"userRegistDate":null,"userGradeID":null,"userGradeName":null,"userPostRankID":null,"userPostRankName":null,"userProTitleID":null,"userProtitleName":null,"userProTitleMajor":null,"userRoleID":null,"userRoleName":null,"userInDate":null,"userWorkStateID":null,"userWorkStateName":null,"userOutDate":null,"userPositionChg":null,"userGradeChg":null,"userPostRankChg":null,"userContractDate":null,"userAdvanceBonus":null,"userRemark":null,"startLine":null,"endLine":null,"userDeleteFlag":null,"customWhere":null}}
		
	2.
	3.
... too much.

clear
V--> 系统验收
单独的项目查询模块
需要列出所有项目吗？
还是指定的项目？
应该是指定项目的，只需要一个通用的码：校验赋码 就好了。
然后通过这个校验赋码，在该模块查询出一些信息，设计方案项目基本信息，
一个赋码会对应设计方案的多个项目吗？
可以对应多个，但至少来说，这个已经是最靠谱的了，所以就出一个相应的模块，
参数：项目赋码
输出：一个页面 项目基本信息，规划的图纸和材料。
clear
	
	V-->70ce9b2f-a0ab-41c0-99c5-7447d1789856
	ViewPrjMaterial
	http://220.191.237.175//PlanCensor/Plancensor/ViewPrjMaterial?prjreviewnum=2018-330800-82-03-072601-000
	
	要不要给他出个不需要读取的版本？
	那么也就是需要配置各地市的文件了。
	clear
	http://220.191.237.175//PlanCensor/Content/PDF.JS/web/viewer.html?file=红线图.pdf
	
	http://220.191.237.175//PlanCensor/Plancensor/ViewRedLineMaterial?prjreviewnum=2018-330800-82-03-072601-000
~-->http://220.191.236.169:18800/AuthServer/Auth/GetAccessToken?code=376fb791d9d344a9992981c23c6a8564
方案审查的，简单来说就是用他们的用户体系，也就是我们只做了功能，业务，以及cad端，设计院端的研发。当然做了很多工作了。只是用户体系是他们的，
这样不太好，你能放下地交给他们去维护吗？答案是不会的。
而且考虑到和施工图的对接，那么你也不能这样搞不是吗？所以按照以往和施工图对接的模式，你得问问
clear
并没有对接，所以这个问题也暂时delay.
	
-->那么下面继续处理一下重庆的一些问题。
1.这么说，bim的比较着急，那么先处理这个好了。这个周二和周三交。
首先这个设置为单独的模块，增加一个上传bim文件，根据项目来的，所以，过滤一下所有包含bim的项目，然后当打开的时候， 判断一下断点续传，上传状态，所以应该有一个上传状态监测的。然后如果监测到该项目有需要上传的，那么询问是否继续上传，，
需要给多个项目同时上传吗？
没有必要，一个项目一个上传窗口就好了。
我能复用以前文件提交的吗？那个用了委托，来实现，但是我这边的话，能这样用吗？有点复杂，我也可以控制他一个一个上传。但是感觉不是很好，所以得重新设计一个页面不是吗？

最好的设计还是，跟其他下载工具一样的。

迅雷、网页。
这玩意并没有那么简单。
但是我可以尝试着先把简单的事处理了，比如设计表。
tbBimFileInfo (Bim文件信息)
fileid（主键）,prjguid,fileguid,filename,fileExtension（扩展名）,UploadBeginTime（开始上传时间）,UploadEndTime（结束上传时间）,isDeleted（是否删除）。先研究一下服务看是否需要记录以及怎么记录断点。
uploader

V文件信息表，
不要考虑太多，首先支持大文件上传，
http://localhost:42054/Fileserver.asmx
调试了，是可以传文件的。

下面把form嵌入进上报工具。

	做一个上传的页面。
	直接用他的可以吗？
	不可以，
	那么把他的逻辑copy出来好了。
	文件给他固定一下？
	文件服务怎么搞？
	web上面肯定是需要服务
	怎么搞？ 
	他这个服务怎么布置？
	应该也是差不多的？
	
	copy一下页面然后，上传，
	
	中间还差一个窗体来显示该项目下面的BIM文件。
	
	然后在窗体上面 再挂一个按钮来显示，
	这个copy一下，添加人员的吧。
	这个已经OK了哦，
	下面呢？ 
	撰写服务，以及存储过程将，文件信息，等补充完成，基本上就做完了。
	
	服务撰写完了，现在试着 
	 现在完成 存储过程
V-->文件服务，
	
然后上报工具端的模块提供。

需要打开后断点续传吗？断点续传是必须的，关键在哪比较好？

断点暂不处理了。
clear

V-->企业信息对接。
怎么个对接法？
好吧，跟泸州差不多，大概明天需要再加半天班。





2.勘察的比较麻烦，因为需要比较多的时间。
3.短信发送
https://help.aliyun.com/document_detail/101300.html?spm=a2c4g.11174283.6.602.76fa2c42iZsxna

刘山琳(刘山琳)
14:17
AKID: LTAI4FxYqEx5jCqeEjUtb9JK          
AK密码：bGWdlgPAmy9yrY22uda7UjaePqyfXi 
@刘浩(刘浩) 刘浩 这个是短信发送提醒的

也需要提醒工具。
cool
clear	

-->
红线的
pdf文件
页面
几条数据
easy 等他发东西给我了。
clear

现在泸州的好用吗？
一点小地方进行了修改，但是不影响大致的东西。
只是网页端的小修改。
所以，照理来说，直接把本地的直接发布也是可以的不是吗。

那么我还是修改衢州的吧。

我是自己处理自己的需求呢？  还是把规划方案的服务布置一下呢？
既然我答应了说后续的，那么，这个肯定不能花太多时间好吧。

我只能说有点蠢，
现在事情太多了，我不能让他们卡在我手上。
1.首先是布置规划审查的服务的，至少需要2~3天。
	几个服务，数据库 然后规划审查的C端（上报工具+CAD）。
	我可以顺便出一个稳定
-->V2.全流程的人想走通，那么需要做一点单点登陆的，
	想想怎么调试呢？ 那么肯定是需要这个code的，所以让他给我code的方法，其实给一次应该也是够的；
	但最好是给方法，这样给可以让我自己能冒泡测试。
	http://220.191.236.169:18800/web/#/gateway
账号：余林    密码：空 
{
    "access_token": "eyJUaW1lIjoiMjAxOS0xMS0yMlQwOTo1MDozMS44Mzg4NjcxKzA4OjAwIiwidHlwIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJVc2VySWQiOjY5LCJVc2VyTmFtZSI6IuS9meaelyJ9.CPzvNStmJrL_RhShyKXlFFecpjlTXLNoEf5Kg72uERw",
    "userInfo": {
        "userId": 69,
        "userName": "余林",
        "loginName": "余林",
        "mobileTel": "",
        "idcard": "",
        "orgcode": "",
        "staffType": "",
        "mainDeptID": "53",
        "mainDeptName": "质检一科职员",
        "roles": null,
        "depts": null
    }
}
clear 
别tm的什么单点登陆了，这系统以前就是好的，只是现在重新调通了一下，你还真以为你有什么大不了的负责一个项目？这些项目只不过是别人扔出来的垃圾，然后找个人来接手罢了。你要是想进步，就得自己学习，学点别人不会的，这才是你的价值体现。工作中只能积累经验，但是并不能让你学到什么深一点的知识。 通过自学而不是被当个工具一样做些别人不削的事，被迫实施。

3.重庆上传bim文件，进度被打断了，那么先不着急了。

4.南昌会有一些小需求，滞后。

http://localhost:4522//home/Index?code=1b27eeea65ec44669d67b5dba37c6f55



今天周五，有没有哪些适合周五处理的需求呢？
好吧，这个单点登陆看起来挺合适的。
V


讲究度，所以有些着急，但是不应该影响你的进度。
what fucking ever 
V！1.明天要运动一下,白天可以打打球。
V2.电影要看吗？ 看情况吧，可以看，当然需要下载，也有可能不用下载，下载也挺好的。
V！3.网线做一下，这是必须的。反正我就是想做。肯定有用但是用处大不大以及是否一定有用。
X4.上网呢？熬夜估计不太会去。
V5.这个周事有点多，如果能休息，就尽量休息一下。
6.
  
v-->不要管这么多，今天加班的目的就是把bim的处理完，
至于他们想处理勘察对接的，最多也只能是初步对接。
一切都不要管，先把bim做完。
clear

-->布置一下贵港的方案审查。
	450800
	首先，数据库，
	oracle
	
	看看泸州的哪些服务用到了，不要复制不用的服务上去。
	Plancensor 
	Plancensorfileservice 
	PlancensorfileserviceOut?
	PlanCensorQualifiedFileService 
	PlanCensorService 
	
	
		008EC3C7-6BF5-4ABD-BC0D-D904B2CBAC54								
	01D999CC-9CC5-4858-99FD-1179B4EAA9D0	重庆华彩建筑规划设计有限公司	1	李秀芳	59518390-9	91500000595183909L	工程设计乙级	勘察设计	2016/5/31 10:39:01
	01F680F5-87DC-4030-A5BF-3B5F818A1B9A	重庆上书房建筑设计顾问有限公司	1	李建柱	75305790-9	500106000031291	工程设计甲级	勘察设计	2015/3/10 15:20:21
	02FF2481-5983-475E-A40F-810E32B44AD2	重庆市雄远工程勘察设计有限公司	1	陈维忠	59516788-8	915002325951678887	工程设计丙级	勘察设计	2016/3/24 9:35:18
	03165662-8A78-4BD3-968C-DBCD57812DF3	重庆伯爵王照明设计工程有限公司	1	裴小红	91500107771788772J	91500107771788772J	工程设计乙级	勘察设计	2019/2/26 9:54:24
	
	ViewRedLineMaterial
	
	
	-->今天下午完成方案审查布置的。
		根本上不去服务器，玩你吗啊
		
		我几个服务都布置了，然后呢？ 
		数据库还差哪些？ 
		我先配置得让web端可以访问吧。
		
		修改好配置，还需要干嘛？
		
		现在关键是，我的登陆账户哪来的。
		吗的，大不了就数据库来，不要搞多余的事。
		怎么简单怎么来 
	clear
	
	-->温州的方案审查待更新
	
	clear
	
	-->适合下午搞的，把南昌的需求完成一下吧。
	现在只能搞一个，那么就搞一个南昌的需求吧。
	或者更新一下温州的？
	更新一下温州的吧。
	clear 
	累了，休息一下。
	
	GetHsDepartInfo
	"{d48285bf-c46c-48c2-9c7a-be8b021ffdf6}"
	
	-->最近工作有点忙是什么原因?
	1.很多人都在找我，处理一些需求 
		有哪些？
		1.新地市开拓新的项目，方案审查
		2.老的项目新的需求修改。
		3.小工具因为其他公司接口的修改而做的维护工作
		4.综合需求需要新的框架技术？有吗？不太确定就是没有
		5.一些无关开发的事，诸如：撰写文档、回答流程、做简单的安装包之类的
	2.
	3.
	
	
	早上我先把
	
		1	胡浩	男	身份证	510214197011190059	专业负责人,项目负责人	建筑
	
		李晓林	男	身份证	500381198512135216			
	你发现没有，他们要求的时间，和效果其实并不是死的，但是他们总是喜欢要求时间，他们想打上flag，所以要求你这里完成某某某功能，但是你并反应不过来，这对你来说不过是漫长维护中的一个功能需求中的一个而已。
	这个时候，1.他们要打flag，时间和效果完全没有跟我商量，他们只是需要立这个flag。
			2.即时他们立上了flag，这跟你其实也没有什么关系，这只是心里预期而已，也就是这个flag完全不影响你自己的研发进度。
			3.但是这个保证你不需要他们反馈的情况下。
			他们总是觉得自己立完flag就可以跑路afk了，事实并不是这样，事情总是在process中去发生。
			所以这也给了你自己一个警醒，如果能碰巧将事情处理的干净整洁，那么是幸运的，但是千万不要要求自己，每一件事都这样。
			
	他们想要完美，是不可能的，我也不会也不应该去要求完美。	
   
   at DrawingUnionCensorSystem.Controllers.HomeController.Index(String code) {"access_token":"eyJUaW1lIjoiMjAxOS0xMS0yNlQxMzozNjoxNC4wMDY5ODQzKzA4OjAwIiwidHlwIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJVc2VySWQiOjY5LCJVc2VyTmFtZSI6IuS9meaelyJ9.tK-X-VjU8KP5L6RHX27inkqFhOgVGw1IAxn5lvusj_c","userInfo":{"userId":69,"userName":"余林","loginName":"余林","mobileTel":"","idcard":"","orgcode":"","staffType":"","mainDeptID":"53","mainDeptName":"质检一科职员","roles":{"158":"质检科科员"},"depts":{"1":"系统管理员"}}}
	clear
	下面呢？ 
	已经3点了，我还可以处理一些比较小一点的需求
	现在有哪些小的需求：
	V1.南昌还差一个字段
	2.方案审查贵港，上报工具端配置
	3.方案审查贵港，CAD端配置
	V4.教翟建荣打包程序，可以安排上报工具的打包给她。
		cool!!!
	5.完成温州短信接口的修改。
	6.温州方案审查的更新，以及系统程序的打包。
	还有40分钟时间，感觉累吗？还行，今天没有休息过，所以不要给自己太大的压力，休息一下吧。
	
	fuck，不管了，说明天给就明天给。
	
	勘察设计企业内部管理云平台（浙江）
	http://www.ccir.com.cn/
	勘察设计企业内部管理云平台（浙江）安装程序
	C:\Users\94748\Desktop\安装包
	
	安可	
	厅为主
	怎么适配要求
	记录和听 
	现场问清楚
	
今天早上先处理一下
	下面温州的短信接口大致是通的，那么我这边需要单独开发一下了。
	
	-->今天下午：
	V1.温州文档
	暂时不管了
	2.温州测试包及网页端的更新
	看一下svn上面的提交记录？ 或者直接更新整个。
	直接更新整个其实也不是什么问题。
	现在需要怎么做？
	1.
		首先把网页端替换上去。 
		替换网页端，并走测试项目
		其次，替换一下cad端，就用那个测试包好了。
	更新范围：
	.dll 
	2.
	3.准备明天的出差
	4.将温州短信的研发稍微延后。
	
	"d332bd95-963c-46a8-8866-6f412c20fa7b"
	/PlanCensor/PlanCensor/GetPltInfo
	
	../Content/PDF.JS/web/viewer.html?file=
		http://117.149.224.15:37780/PlanCensor/PlanCensor/GetPltInfo?pltguid=d332bd95-963c-46a8-8866-6f412c20fa7b
	syntactically
	http://api.eyun.openmas.net/yunmas_api/smsApi/batchSendMessage
	
	现在上传文件有点问题，
	获取的时候，不是ftp, 然后名称是+.
	上传没有问题，获取有问题
	
	问题还是上传文件，文件名和extension传错的问题。
	
	文件服务有问题，那么这个文件服务是哪个呢？
	../Content/PDF.JS/web/viewer.html?file=../temp/ddf3fa57-891c-4059-8abc-ba0db4114c8d.pdf
	http://117.149.224.15:37780/PlanCensor/Content/PDF.JS/web/viewer.html?
	http://117.149.224.15:37780/PlanCensor/Content/PDF.JS/web/viewer.html?
	http://220.191.237.175/PlanCensor/Content/PDF.JS/web/viewer.html?file=../temp/125b8eb1-612a-42db-b193-cf322c237697.pdf
	file=..temp/6e85cbe9-319b-4276-ab02-ca5341ad0a30.pdf
	
	对象名 'eca_tbcensornoderecordinfo' 无效。
	
	我现在是什么状况？
	现在是什么情况呢？
	
	我应该直接发一个安装包，然后呢？ 
	通过替换文件的方式，如果我不这样呢？
	需要把cityreg 改一下，现在我只需要保证，阳哥电脑上面的是可以的，应该就好了。不是吗？
	TBPERSONPRJDUTYDIC
	tbspecialitydic
	V-->这个周主要处理一下重庆的需求
	人员变更以后，我这边是怎么控制的？
	首先我人员是否能登陆进系统又是怎么控制的？
	然后我人员变更以后，又是怎么控制的？
	370830199001042939
	
	clear 
	V-->然后温州短信的问题。
	
	X池州、的问题看能不能拖到下一周。
	clear
	
	V先提交一些代码吧。
	
	想想这个是否能改的。
	
	首先图审会重复受理吗？ 
	
	项目编号 PrjCode as SerialNumber
	显示PrjName 
	
	淮南
	
	341600
	
	340400
	今天把勘察的一些东西处理一下。  看看默认岩土专业是怎么回事。
	如果是勘察，Dropdownlist
	如果是其他，清空Items。
	
	找到那个表，找到那个判断语句
	
	TBPRJMATERIALDIC 材料表，就这玩意。
	问清楚需求好了。岩土的。
	
	上报卡流程的问题，看看脚本怎么写的
	
WS_Report_GetPrjSpecSubPrj	
	
	1263
	1
	27929068-1
	
	prjtype 错了。看看怎么回事。
	
	 (int)Project.Instance.CurrPrjDesc.PrjType
	
	Project.Instance.CurrPrjDesc.strCensorPhaseID
	
	就现在这个状态可以先发一个版本上去吗？
	他们周一要过去，应该是可以发一个版本的。
	发完了以后呢？
	重庆的工作还没有做完。
	但是下个周得处理一下，规划方案的，因为现在温州已经有了比较稳固的一个版本。
	{"resultCode":0,"resultMsg":"api及时短信批量提交成功","resultMap":{"blackSendList":[],"submitWaitSendCount":1,"batchId":"d7028860-35ef-4351-bb5c-3713949095c9","repeatSendList":[]}}
	
	{
    "resultCode": 0,
    "resultMsg": "api及时短信批量提交成功",
    "resultMap": {
        "blackSendList": [],
        "submitWaitSendCount": 1,
        "batchId": "d7028860-35ef-4351-bb5c-3713949095c9",
        "repeatSendList": []
    }
}

	var client = new RestClient("http://api.eyun.openmas.net/yunmas_api/smsApi/batchSendMessage");
var request = new RestRequest(Method.POST);
request.AddHeader("cache-control", "no-cache");
request.AddHeader("Connection", "keep-alive");
request.AddHeader("Content-Length", "204");
request.AddHeader("Accept-Encoding", "gzip, deflate");
request.AddHeader("Host", "api.eyun.openmas.net");
request.AddHeader("Postman-Token", "019731dd-973b-4144-8a68-a79e277f16d6,357110c8-a999-4461-8b28-cca5e1c8265d");
request.AddHeader("Cache-Control", "no-cache");
request.AddHeader("Accept", "*/*");
request.AddHeader("User-Agent", "PostmanRuntime/7.20.1");
request.AddHeader("Content-Type", "application/json; charset=utf-8");
request.AddParameter("undefined", "{\r\n\"applicationId\": \"6Hi4sxt5W9NMH4IHVOxscXul2B6QWvvxZ6Y\",\r\n\"password\": \"GTVOHULuzoRPvA4\",\r\n\"funCode\": \"1002\",\r\n\"sendTime\": \"\",\r\n\"extendCode\": \"33\",\r\n\"mobiles\": [ \"\"],\r\n\"content\": \"温州短信测试\"\r\n} ", ParameterType.RequestBody);
IRestResponse response = client.Execute(request);

重庆的下午发一下文档，然后暂停处理。
clear
clear
clear
clear
-->今天先处理一下：
V-->1.衢州的设计方案更新；
	先更新衢州的。
	需要更些什么东西？ 
	dll
	以及几个页面。
	其实衢州现在挺完备的不是吗？
	是的。
	所以呢？
	更新几个页面就好了
	可能还需要更新一些存储过程。
	温州的存储过程目前来看是好用的。
	但是这玩意我没有记录。
	但是无所谓，直接更新过来就好了。
	
	更新view的时候注意一定应该是可以的。
	先不从温州更，先从本地更。
	
	我也可以通过自己测试来确定更哪。
	存储过程，
	V现在测试一下他们说的cad端的问题。
	暂时不用管把，
	clear


关键有点难搞，这个需要修改上报工具端。
还有cad端
看看他给的文档。
首先调通网页端。

更新一下版本。其实中间没有设计院应该暂时也不影响的。

51222119560412001X
clear

	暂时没有，而且现在是三个地市。
	怎么处理？ 
	暂时没有思路，没有关系。先做吧。
	反正都是先调用的control，所以先通过control来获取配置的地市也是可以的。
	新的需求先不管，现在先完成。
看来这个方案联审的需求还是蛮多的。
看来必须要重构一点代码来适应了。
clea

V-->绍兴也需要验收，需要这个玩意了。
	我是真的头大。
	http://220.191.224.175/plancensor/login/index既然下达了命令，那么今天把绍兴的服务给布置完全，然后将测试用例发给对应的人。
	贵港的稍微延后一点没有关系的，
	
	今天的任务是什么？
	将绍兴的方案联审的系统布置上去。
	首先，现在上面有些表上面的，
	通通不用管了，直接把他替换掉好了，连数据也替换掉!
	有的服务先不用布置，
	文件服务是有的。
	那么不就只剩下网页端了？
	图纸需要拷贝吗？ 
	能拷贝就拷贝吧。不要在乎时间问题。
	
	下面呢？ 修改一下配置 
	
	sxcb
	1
	
	下一步做什么？
	首先登陆账户配置一下，
	
	V然后呢？  然后可以测试一下通不通了。
	V获取到服务器的ip地址。
	  
市资规局
市人防办
园林管理处
市气象局
市发改委
市消防支队
	账号也有了，现在差什么？ 
	上报工具试试；
	然后cad端
	明天编译一个上报工具出来，然后呢？ 还有cad端不知道怎么样，有点烦人。
	
	现在好像都差不多了，试着将测试包打包一下发给相应人员。
	OK，休息一下，明天开始处理一下贵港的。
clear
clear
-->今天衢州出差，暂时不知道具体任务，有可能跟方案审查有关。







clear
-->3.我有什么办法通过配置来修改前端吗？
clear
-->重庆勘察对接的怎么处理？
	下个周处理
	勘察对接
	重庆短信
	重庆提醒工具
clear
-->2.贵港的设计方案，ORALCE版本修改和调试。
	
clear

那么今天做些什么呢？
手头的任务：
1.方案审查贵港 
看看贵港的吧，调试一下。

http://222.218.31.31:18086/plancensor/login/index

先试试vpn，然后登陆上去，如何弄一个贵港的版本出来？
这不跟测试的差不多？
但是测试的是有这个，但是他没有
vpn不好上，
配置地市不好配置，为什么不好配置，需要给孟解释一下，总比自己把锅接下来好。沟通就是好的。

调试我确实调试不了。
问题太多了。如果服务器好上，我肯定就上去了对吧。
如果公司服务器好上，我也上去了，然后还配置了一下上报工具的一些url。

--> 服务器配置
CREATE TABLE [dbo].[tbCensorConfig](
  [RowID] [int] IDENTITY(1,1) NOT NULL,
  [CityCenter] [varchar](50) NULL,
  [CityName] [varchar](50) NULL,
  [CityNum] [varchar](6) NULL,
  [censorurl] [varchar](100) NULL,
  [censorfileurl] [varchar](100) NULL,
  [pltmanageurl] [varchar](100) NULL,
  [signatrueurl] [varchar](100) NULL,
  [pltqrcodeurl] [varchar](100) NULL,
  [row_guid] [varchar](50) NULL,
  [BackUpUploadFileUrl] [varchar](100) NULL,
  [BackUpSignatureFileUrl] [varchar](100) NULL,
  [BackUpCensorUrl] [varchar](100) NULL,
  
  [NormInfoUrl] [varchar](100) NULL,
  [ReportUrl] [varchar](100) NULL,
  [ReportFileUrl] [varchar](100) NULL,
  [EiClientUrl] [varchar](100) NULL,
  
  [PlanUploadUrl] [varchar](100) NULL,
  [PlanCensorUrl] [varchar](100) NULL,
  [PlanFileUrl] [varchar](100) NULL,
  [PlanQualifiedFileUrl] [varchar](100) NULL,
  
  [AffixFileUrlDownload] [varchar](100) NULL,
  [AffixFileUrlUpload] [varchar](100) NULL,
  [CompeteMappingUrl] [varchar](100) NULL,
  [CompeteMappingFileUrl] [varchar](100) NULL,
  [SortNum] [int] NOT NULL,
  [DbTypeNum] [int] NULL
) ON [PRIMARY]

insert into tbCensorConfig (RowID,CityCenter,CityName,CityNum
,censorurl,censorfileurl,pltmanageurl,signatrueurl
,NormInfoUrl,ReportUrl,ReportFileUrl,EiClientUrl
,PlanUploadUrl,PlanCensorUrl,PlanFileUrl,PlanQualifiedFileUrl
,SortNum,DbTypeNum)
values
((select max(RowID)+1 from tbCensorConfig),'广西','贵港', '450800'
,'http://222.218.31.31:18086/CensorServer/CensorService.asmx','http://222.218.31.31:18086/ECACensorFileServer/FileService.asmx','http://222.218.31.31:18086/CensorServer/PltManageService.asmx','http://222.218.31.31:18086/ECASignatrueFileServer/FileServer.asmx'
,'http://222.218.31.31:18086/CensorServer/CensorService.asmx','http://222.218.31.31:18086/ReportServer/ReportService.asmx','http://222.218.31.31:18086/ECAReportFileServer/FileServer.asmx','http://222.218.31.31:18086/EIService/EiClientService.asmx','http://222.218.31.31:18086/PlanCensorWebService/PlanCensorWebService.asmx','http://222.218.31.31:18086/PlanCensorService/ccir/ManageDepart','http://222.218.31.31:18086/PlanCensorFileService/FileService.asmx','http://222.218.31.31:18086/PlanCensorQualifiedFileService/FileService.asmx',458,3)




http://jsgl.zfcxjw.cq.gov.cn:6018/CQSGTWEB/#/a/login
44	重庆	重庆	500000	http://jsgl.zfcxjw.cq.gov.cn:6018/CQCensorServer/CensorService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/ECACensorFileServer/FileService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018 /CQCensorServer/PltManageService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/ECASignatrueFileServer/FileServer.asmx	NULL	NULL	NULL	NULL	NULL	

http://jsgl.zfcxjw.cq.gov.cn:6018/CQCensorServer/CensorService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/CQReportServer/ReportService.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/ECAReportFileServer/FileServer.asmx	http://jsgl.zfcxjw.cq.gov.cn:6018/CQEIService/EiClientService.asmx	NULL	NULL	NULL	NULL	http://jsgl.zfcxjw.cq.gov.cn:6018/ECACensorFileServerAffixDownload/FileService.asmx	NULL	NULL	NULL	401	3

http://220.191.237.175/PlanCensorWebService/PlanCensorWebService.asmx	http://220.191.237.175/PlanCensorService/ccir/ManageDepart	http://220.191.237.175/PlanCensorFileService/FileService.asmx	http://220.191.237.175/PlanCensorQualifiedFileService/FileService.asmx




广西 贵港 450800 然后其他的url地址将头部替换成http://222.218.31.31:18086，其他名称不变
clear

看来问题解决了。
现在看来服务器确实不太稳定，就算稳定了。我还需要什么东西呢？
首先我需要调试一下网页端，
然后上报工具的地址也配上去了。那么下面就需要单独编译一个贵港的版本出来。
有什么特性？ 
1.地址配置
2.模块。
没根据哪的进行配置呢？
首先，需要注册吗？需要那么就需要EIService不是吗？
一步一步来好了。
copy一下其他地市的eiservice。
-->V2.方案审查衢州 

	他需要发送短信，那么其实也很好实现，也就是需要，
	为什么看不到项目呢？
	因为是按人推送的,userid，那么就需要改成 按 部门推送。
	那么只有按照部门推送了。
	
	V那么现在怎么处理？
	V报错？先查看报错什么原因吧。
	
	V2.配置账户 
3.方案审查绍兴
	1.绍兴校验赋码的接口是多少？找谁要？
	 window.location.reload();
	
	绍兴想要单点登陆的？ 给做吗？ 
	当然可以做了，但是，看看吧。
	
建设单位  密码 jsdw  Sysadmin 密码 cmdi

住建局 密码qwe
	把绍兴的更新上去吧
	代码看起来都提交过了
	
	http://220.191.224.208:8088/sxQlcWeb/
	http://220.191.224.208:8088/sxQlcServer/EcaServices/EcaAppServer/LoginToken?token=
	问题找到了，全是大写的原因。
	
	
	{"Success":false,"Msg":"token验证失败，token 无效！"}
	
{"Success":true,"Ticket":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k","UserID":1,"UserName":"管理员","DeptID":519,"DeptName":"管理员","Roles":{"119":"系统管理"},"Depts":{"519":"管理员"}}
	
	{
"Success":true,"Ticket":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k"
,"UserID":1
,"UserName":"管理员"
,"DeptID":519
,"DeptName":"管理员"
,"Roles":{"119":"系统管理"}
,"Depts":{"519":"管理员"}}

{
    "access_token": "eyJUaW1lIjoiMjAxOS0xMi0xMlQxMToxOToxMy4wODUwOTM3KzA4OjAwIiwidHlwIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJVc2VySWQiOjMxNDIsIlVzZXJOYW1lIjoi6KGi5bee5biC5pS_5bqc5oqV6LWE6aG555uu5bu66K6-5Lit5b-DIn0.BayIaXBvuZV1CnL7UcpdQEURQJjp556VEIX1KtIE094",
    "userInfo": {
        "userId": 3142,
        "userName": "衢州市政府投资项目建设中心",
        "loginName": "jszx001",
        "mobileTel": "",
        "idcard": "",
        "orgcode": "",
        "staffType": "",
        "mainDeptID": "",
        "mainDeptName": "",
        "roles": {
            "168": "建设单位"
        },
        "depts": {
            "1": "系统管理员"
        }
    }
}
clear
-->4.上报工具重庆 
	
重庆的这个勘察的怎么处理？

瞅瞅
我直接用java搞些模块出来调用好不好？
看看需求好了。
他们都在忙，没有回复。
等他们在的时候再咨询好了。

http://jsgl.zfcxjw.cq.gov.cn:6018/BigFileService/FileServer.asmx

记得去火车站取票的时候把发票打印一下。最好提前出发。
是弄丢了。
clear
-->这个周：
1.贵港 
	1.报建项目，无法赋码校验，暂无赋码校验接口
	2.暂无勘察设计四库接口。这个可能需要从上报工具端注册的企业中选择，也就是需要做一个接口来查询库里面注册的人员。
	
	V3.上传文本材料后无显示信息，看看日志和逻辑。
	
	4.他现在的逻辑是只要能图审可以审查就行了。所以我设计院端暂时不予配置也是可以的。
	
	我现在卡在哪了？
	卡在获取材料信息的时候，全部显示undefined。吗的什么鬼？
	首先dll复制了，view复制了。
	调试看起来也没有多少问题，为什么会undefined？
	一会再看一下吧，oracle版本的确实很烦人。
	
	池州导出意见是空的，调试一下什么原因，得休息好累。
	
	首先，数据里面看起来好像是对的？
	刚替换了一波好像，又有了新的问题。
	V按理来说，替换了的，都是最好的。
	原来是datatable大小写的问题。
	
	V上传的图纸无法预览，看一下是为什么
	是不是工具没装？ 
	考虑一下如何装工具，
	文件传上去了的
	ggmis5
	下面是需要导表。节点表
	CREATE TABLE [dbo].[tbPlanCensorStateDic](
	[censorstateid] [int] NOT NULL,
	[censorstatecode] [varchar](3) NULL,
	[censorstatename] [varchar](100) NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[tbPlanCensorStateDic] ([censorstateid], [censorstatecode], [censorstatename]) VALUES (1, N'001', N'设计单位完成赋码校验')
	
CREATE TABLE [dbo].[eca_tbcensornoderecordinfo](
	[noderecordid] [int] IDENTITY(1,1) NOT NULL,
	[nodecode] [varchar](50) NULL,
	[prjrowguid] [varchar](50) NULL,
	[prjcensorstagename] [varchar](50) NULL,
	[nodebzinfo] [varchar](500) NULL,
	[username] [varchar](100) NULL,
	[noderecorddate] [datetime] NULL
) ON [PRIMARY]
	
	CREATE TABLE [dbo].[eca_tbcensornodedic](
	[nodeid] [int] IDENTITY(1,1) NOT NULL,
	[nodecode] [varchar](50) NULL,
	[nodename] [varchar](200) NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
SET IDENTITY_INSERT [dbo].[eca_tbcensornodedic] ON
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (1, N'100', N'建设单位完成赋码校验')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (2, N'200', N'设计单位完成图纸材料补充')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (3, N'300', N'主管部门完成受理')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (4, N'301', N'主管部门不予受理')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (5, N'302', N'主管部门出具审查意见')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (6, N'303', N'主管部门完成复审受理')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (7, N'304', N'主管部门出具复审意见')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (8, N'201', N'设计单位完成意见回复')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (9, N'101', N'建设单位完成意见回复')
INSERT [dbo].[eca_tbcensornodedic] ([nodeid], [nodecode], [nodename]) VALUES (10, N'305', N'主管部门审查通过')
SET IDENTITY_INSERT [dbo].[eca_tbcensornodedic] OFF

现在是什么情况？ 
	好像是可以了吧，走走流程？
	还是说给那个测试？
下一步网页端的模块都试试吧。
下一步，配置一下主管部门的账户。
市资规局
	
	tbPlanCensorStaff
	做一下自增列。
	
	现在卡在添加会审部门这。
	我继续走流程那么下面就是，走cad审查端了，我先把cad审查端的配好吧。然后最多的就是调试一下存储过程。整个流程应该就可以了吧。
clear
2.甘肃有些需求 最好在元旦之前。不算很急
V 3.贴发票

······

172.18.4.9:18086
	
	gdyb21LQTcIANtvYMT7QVQ==
	
4.看一下玉林的需要些什么？
只需要些服务文件，我已经有了。

现在有哪些任务？
1.玉林
	需要配置服务器
	然后cad端
2.重庆
	V人防保存不上
	升级不行，暂时不管
	要加的四个字段也加上去了，听他BB了。
	我得改改架构了。
	理想的架构是很方便拓展的。当然像mvc这种就是非常容易拓展的不是吗？ 会数据库语句，会前端控件。
	什么是可变的? 字段是可变的。
	
3.甘肃
	看看甘肃的。
	
V4.贵港
	需要继续调试服务，然后cad端，
5.绍兴
	单点登陆的问题
6.

先从简单的做起，处理一下 上报工具的吧。
然后绍兴
	然后贵港玉林
	
<root><RFSubInfo RFGuid="4b60edb0-77c2-4176-8667-c6bdb0c303e6" RFInfoGuid="6231fb73-326e-47dd-a976-485e5e752336" FHNumber="12123" FloorCountUnderground="" WarAction="-1" FHLevelName="-1" OutNumber="" BuildArea="" SYAra="" YBArea="" YBPerson="" /></root>
	
	http://220.191.224.208:8088/sxQlcServer/EcaServices/EcaSingleSignOnServer/GetAccessToken?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k
	
	{"Success":true,"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k","userInfo":{"userId":1,"userName":"管理员","loginName":"Sysadmin","mobileTel":"18504318302","idcard":"","orgcode":"","staffType":"","mainDeptID":0,"mainDeptName":null,"Roles":{"119":"系统管理"},"Depts":{"519":"管理员"}}}
休息一下，don't mind that stupit who just give pressure, fuck off !dumbass!

人防单体怎么加？
先测试一下其他三个可以了吗
可以的，
现在加一个人防等级：
下面修改一下获取和存储的就可以了。
VECA_Addsubprj
VEca_getbasicinfo
看看甘肃的
哪些可以做，哪些做不了。

市民中心
解释一些问题。

继续处理甘肃的问题，还有一些问题需要查找

	delete from tbprjmaterial where row_guid = '';
	
	http://222.218.31.31:18086/
	
先处理甘肃的需求。

n   RegistCode.Visib
n   WorkTradeRight.V
n   techtitlename.Vi

贵港的暂时放放。

咨询一下能不能直接用平台做出那个url+参数的页面。如果可以，那么事情就很简单了。
首先你完全可以把大部分重复性的工作交给会建模工具的实施工程师去做。
2.我觉得目前我的这种做法是有问题的。有什么问题？对于地市的扩展是不容易的？
首先，地市的个性化需求是一定的。是必需有的。但是在现在来看，目前这些个性化的需求，全部都有我自己编码实现，而且对以前的代码，堆积得越来越厚重。所以这个时候，我得，想一些办法，保持我的部分独立性。然后，

思考一个问题，是做项目呢？还是做产品，如果是做项目，做一个丢一个。但是如果是做产品。那么就需要一些通用的东西，然后通用的简单的方式实现，而花精力去做产品的优化、研发等，让后做产品的话，个性化的需求，就属于服务了。

今天先把绍兴的单点登陆的处理了吧。其实就是通过验证出来的信息，
绍兴的无法赋码校验，也无法单点登陆，为什么？因为服务器和外网没有通。
尴尬。
	http://220.191.224.175/plancensor/home/index?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k
	http://220.191.224.175/plancensor/home/index?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k
	
	220.191.224.175/plancensor/home/index?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k
	http://220.191.224.208:8088/sxQlcServer/EcaServices/EcaSingleSignOnServer/GetAccessToken?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjEsIlVzZXJOYW1lIjoi566h55CG5ZGYIiwiTG9naW5OYW1lIjoiU3lzYWRtaW4iLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.TChUFAmOHpnac-T9ygsgL1B5LUVx3Uce7x1ycmWGi1k

贵港的问题，

考虑一下架构。
我现在都变成工程人员了。

不行，下午要咸鱼一下，顺便考虑一下自己现在的状态。

请问，我现在是不是想要做一个，JAVA的转化？

那么我需要做什么？

http://localhost:4522//login/Index

webBrowser是非常局限的。
只能实现简单的页面，对js/css那些的支持是非常少的。  
原来是内核的问题。
那么换成谷歌浏览器的内核，那不用说，肯定是很
现在是什么情况？
首先，如果我是一个简单的页面，没有过多复杂的js和css肯定是不会出问题的。
第二，如果我兼容性好一些，需要看一下目标页面的内核是IE还是Chrome类型。
一般现在他们搭建出来的网页都是用Chrome比较兼容的。why? 自己做出来的网页有是Chrome比较兼容。
3.建模工具到底能不能实现URL+参数的方式进行访问。 这就关系到能不能让他们使用建模工具来搭建这个网页。
我好像找到了，可以的。
所以使用

而对Chrome的兼容等问题，其实只是希望自己在下一步技术探究的时候可以用一些java技术，然后快速搭建网页（其实说实话，肯定是没有他们的建模工具快？他们有局限性。但是学习成本低。
如果用系统的独立性来说呢？
首先我都是可以搭建系统的，
其次是速率的问题。（我最在意的是速率的问题）
第三是美化的问题。（这个是其次，但是JAVA肯定是完胜的）
第四是成本的问题。（对于公司而言成本是必须得考虑的问题之一）
）

今天做些什么？
1.贵港的
	网页端的大致是可以的了吧
	然后现在呢？
	处理一下cad端的。
	这个周一定给他改造完成。
	现在到哪里？
	cad端，试试看
好像也只有一个，也没有啥东西。
	那么看看网页端有没有什么Bug
	节点的现在也有了。
	下一步呢？ 
	处理一下，
	文档里面的需求，把该屏蔽的字段屏蔽一下。
	现在遇到的问题是什么呢？
	代码重构的问题，我是否需要考虑一下这个问题？
	考虑各地市不同的需求。
	那么页面可能会有很多个，那么如何去应对这种问题呢？
	各地市页面不同，那么最理想的是各地市各自加载自己的页面。
	代码重构暂时不考虑，留到后面看怎么处理好了。问问他们是怎么处理的
	
	接下来看看，优化一下显示的项目信息好吧。
	怎么讲？看看sql语句就好了。
	从页面进入
	
	00700d87-4408-4bfa-bba4-5dfd535d287a
2.a9ec34be-2589-4629-9677-dc25cf0498d3
	先休息一下，然后看看下一步做什么
	nothing gonna happen 

1.先处理甘肃的问题
	甘肃的这个通用的差字段，
	新创建页面的话，如何去兼容老的呢？
	两个存储过程都不太一样。
	字段不一样，所以肯定是不能使用重庆的存储过程，那么重庆的字典表也不管用了。
	但是我方式还是可以这样处理不是吗？
	只是字典表换一个。
	
	看看能走到哪一步吧。
	
	首先我这个版本可以跟老的兼容吗？
	肯定是可以的这是重构，完全是可以兼容的。
	
	那么就做一个老的兼容好了。
	
	保存的字段，初始化的字段，初始化应该不用了吧。
	
	原来是不小心把框拖进来了。现在怎么处理？
	
	仍旧保持这个样子吗？
	还是说重新做一个？
	肯定是保持现在的样子比较方便，为什么呢？
	
	无非多添加几个页面。
	
	不，还是重新做好了。最多兼容原有的。
	
	现在做怎么处理？
	首先
	1.字典表需要改一下。
	2.然后新增字段通过建模工具加一下
	3.然后页面重新画一下。
		简单的页面设计完成，
		下面就是补充字段及页面重命名
		DesignSpeed 			道路设计车速
		GPSDesignAgeLim 		给排水设计年限
		SolvStandard			处理标准
		SolvCraft				处理工艺
		PrjContent				工程内容
		GPSDesignLevelName 		给排水设计规模
		GasSupLevelName				燃气供气规模
		GasSaveLevelName  		燃气储存规模
		GasPipeRadius			燃气管径
		GasPipeLengh			燃气长度
		HeatDesignLevelName 		热力设计规模
		HeatSupArea 			供热面积
		HeatRadiusLim 			口径限制
		LandscpTotalArea 			风景园林基地总面积
		LandscpWaterArea 		水体面积
		LandscpGroundArea 		园路及场地面积
		LandscpBuildArea  		建筑占地面积
		LandscpGreenArea  		绿化种植面积
		LandscpOtherArea		其他使用地面积
		GarbageTreaAYear 		环境卫生年处理量
		EnvirAgeLim				环境卫生设计年限
		DesignStorage 			环境卫生设计库容
		
		只做增加，
		
	4.然后调试一下。
	
	1.甘肃的字段
	
	2.重庆的字段查询和更新存储过程。
	surveygrade			kcdj	            ID  KANCHANAME 
	xzkcname			TBKCJDDIC              NAME
	slopetype			bplxzdb                BPLXNAME
	levelslope           bpjbzdb               BPJBNAME
											   
	WATERCORROSIVE         stfsxzdb            FSXNAME
	SOILEROSION            stfsxzdb            FSXNAME
	yantuxiangmtype  		ytgcxmlx           YTGCTYPENAME
	yantubianpotype         bplb               BPLXNAME
	
		52	江西	南昌	360100	http://59.55.120.139:8081/ECACensorServerOracle/CensorService.asmx	http://59.55.120.139:8081/ECACensorFileServer/FileService.asmx	http://59.55.120.139:8081/ECACensorServerOracle/PltManageService.asmx	http://59.55.120.139:8081/ECASignatrueFileServer/FileServer.asmx						http://59.55.120.139:8081/ECACensorServerOracle/CensorService.asmx	http://59.55.120.139:8081/ECAReportServerOracle/ReportService.asmx	http://59.55.120.139:8081/ECAReportFileServer/FileServer.asmx	http://59.55.120.139:8081/EIServiceOracle/EiClientService.asmx					http://59.55.120.139:8081/ECACensorFileServerAffixDownload/FileService.asmx
		706	3
	
	insert into tbCensorConfig (RowID,CityCenter,CityName,CityNum
,censorurl,censorfileurl,pltmanageurl,signatrueurl
,NormInfoUrl,ReportUrl,ReportFileUrl,EiClientUrl
,PlanUploadUrl,PlanCensorUrl,PlanFileUrl,PlanQualifiedFileUrl
,SortNum,DbTypeNum)
values
((select max(RowID)+1 from tbCensorConfig),'广西','贵港', '450800'
,'http://222.218.31.31:18086/CensorServer/CensorService.asmx','http://222.218.31.31:18086/ECACensorFileServer/FileService.asmx','http://222.218.31.31:18086/CensorServer/PltManageService.asmx','http://222.218.31.31:18086/ECASignatrueFileServer/FileServer.asmx'

,'http://222.218.31.31:18086/CensorServer/CensorService.asmx','http://222.218.31.31:18086/ReportServer/ReportService.asmx','http://222.218.31.31:18086/ECAReportFileServer/FileServer.asmx','http://222.218.31.31:18086/EIService/EiClientService.asmx','

http://222.218.31.31:18086/PlanCensorWebService/PlanCensorWebService.asmx','http://222.218.31.31:18086/PlanCensorService/ccir/ManageDepart','http://222.218.31.31:18086/PlanCensorFileService/FileService.asmx','http://222.218.31.31:18086/PlanCensorQualifiedFileService/FileService.asmx',458,3)
	
	update tbCensorConfig 
	set 
	censorurl= 'http://59.55.120.139:8081/ECACensorServer/CensorService.asmx'
	,	pltmanageurl	 = 'http://59.55.120.139:8081/ECACensorServer/PltManageService.asmx'
	,		NormInfoUrl =  'http://59.55.120.139:8081/ECACensorServer/CensorService.asmx'
	,		ReportUrl =    'http://59.55.120.139:8081/ECAReportServer/ReportService.asmx'
	,	EiClientUrl	 =     'http://59.55.120.139:8081/EIService/EiClientService.asmx'

	where CityName = '南昌';
	
	3.贵港 
	4.
	 
	500
	9500
	
clear
	因为没有对工作及时清零，但是要工作清零是不存在的。
	工作是永远做不完的，直接顺利接手出去以后，才算清除掉了。
	
	3b2f448a-121c-41f8-9f29-4f326fc9bcf0
	
	http://localhost:1261/ReportService.asmx
	
	delete from tbprjmaterial where row_guid = 'fe8d8d99-0204-47ce-82b5-1a4f40a95ded';
	
	delete from tbprjmaterial where row_guid = '84baf4cb-6f9d-4f32-8301-83c535261e85';
	
	-->设计方案联审：
	考虑一下如何架构才能符合各地市的需求，且便于推广。
	首先，各地市肯定有自己不同的字段录入需求？首先这个字段的录入需要
	我想考虑架构是怎么架构呢？ 
	对于地市的扩展，尽量少地对代码进行修改，更多地是通过修改数据库来达到字段新增的目的。
	但是前端又不得不变对吧？ 
	毕竟是需要录入的。
	那怎么搞？通用的，根据数据库的字段录入来映射？
	那么我就需要一个自动生成页面的方法。
	如何根据数据库字段，生成对应的页面？
	这个不但是要求动态，还要求自动。这也太难了吧。但是确实有很多人有这样的想法。
	当然如果你会了自动生成，那么你肯定也可以进行半静态，半自动的方式。来进行处理。
	
	如果需要中文，那么我还需要搞映射文件？
	或者我不需要，像oracle数据库一样，直接根据顺序插入进去就好了。存储过程是关键。
	先把思路走通吧。
	现在不想通，那么后面又得改了。每个地市改一下，如果你乐于这样还好说。但是你的代码要是同一套的呀。
	你也需要根据不通的地市来配置不同的前端的呀。
	而且你得分清，运行时编译和提前编译的不同点。
	
	而且你完全可以用java来实现的呀。
	首先是没有考虑建立，而有了考虑修改拓展兼容。所以公司的建模工具也差不多是这样的逻辑来进行的，那么效果怎么样呢？  表象：招大量的非专业技术人员，来进行大量的重复性工作。 但是确实代码层面的话，专业人士的工作量确实变少了，但是这样说，和非专业的比呢？
	首先来说，确实将一部分的内容进行的封装和解决。 扩展性不强。但是工作效率确实是有的，资本投入的节省也确实是有的不是吗？
	
	解决方案和进步的解决方案。
	：针对用户的问题叫解决方案，针对解决用户的问题的解决方案的问题叫进步的解决方案。
	而我现在就是在寻找这种解决自己问题的方案。
	不管是想用java语言还是寻求更好的框架技术，其实这完全是为了解决我自己问题。
	而我现在的问题是什么，疲于应对重复性的工作。
	
	那么确实是我需要学习的时候，
	我已经找到了，兼容chrome内核的网页端winform页面技术，这意味着我很多东西都可以往网页端进行靠拢。
	当然是在用得很熟悉的情况下。
	那么下一步我需要做的事：
	1.深度使用WEBKIT控件；
	2.学习java，及相关框架技术，了解一下是否更为便利，然后为什么使用java的人那么多？论坛如此活跃？
	3.看一下文档，还有哪些问题待处理的？
	
	周五放一下更新
	把几个简单的需求处理一下
	
V-->测绘成果，我应该怎么去处理这个事？

首先，只是搭建demo，并不作为正式的系统。
所以有些时候如果设计不通的话，完全可以使用写死的页面。
数据写死行不行？

首先，最坏的情况是整个demo都需要我来搭建。
然后如何搭建这个demo，需求什么的都不明确。
那么我应该如何去处理呢？

现在好像是根据现有的 竣测合一的去反推？
好像不需要，调试一下不就知道了

虽然说是现成的，但是我觉得一点都不现成。
然后周五要完成的话，有点困难，除非需要加班。
搭一个demo需要多长时间？一天不够吗？
我就算连不通的，我怎么处理？
我到底需不需要跟数据库连接？
看看图纸？能不能来一个完全不连接数据库的？
niu B!!!
最好试着完全不连接数据库。
不然你还得去调通？

得了吧。别调通了，要什么数据我马上给你造。
开发两个函数，一个是输入字段快速生成dt的
一个是输入dt和字段数据快速加数据行的。

文件不提供上传，直接提供预览。

开始调试
自然资源、建设、人防等主管部门

数据伪造地还行，但是最好 还是不同项目有点区分。

先把这一部分处理掉，然后看资讯一下他是否需要进一步的，制造数据。 调通预览。 不包括上传。

几个模块看起来好像是可以了，下面呢？ 做一下上传和下载的？
放在服务器上面，下载的时候，就下载呗，下载的代码还差一点。

图纸上传需要管吗？
这要是管起来，挺麻烦的不是吗？
上传要让它上传上去吧。
先把技术走通，然后有什么修改意见再提好了。

布置到服务器上面去，
http://220.191.237.175/CMCensor/

plt1.pdf
seems good

现在需要怎么处理这个东西？
首先
1.坚持不用数据库
2.一些前端页面有点难处理。
3.先从简单的做起。
4.
clear
v-->最后一个周，还有一些什么需求？
V1.测绘系统：
	V1.需要画一个项目页面；
		页面画好了，
		然后表打印的，
		在前端加一个按钮，打印出一个word文档，
		
		V在项目
		V明天统一更新一下
		
		
	V2.需要考虑两个模块的实现；
		1.申请表打印；
		2.一键归档。
2.上报工具：
	1.重庆：1.勘察需要添加两个字段；
			V屏蔽掉一个字段；
			添加一个页面来录入字段信息。
			2.和勘察对接。
	2.甘肃：企业基本信息添加主要技术负责人。
	X3.提交意见回复为灰色的提示。
	V4.上报工具更新的问题，生成的快捷方式找不到更新文件，但是如果把更新文件放在桌面快捷方式的相同，所以这个生成快捷方式有点问题。
		
		所以意思的生成的快捷方式有问题。
		
		当然也可能是文件地址有点问题，
		首先我可以怎么解决？ 首先我可以通过安装写注册表，然后登陆获取注册表的方式获取。
		其次呢？
		第二种，单独写一个快捷方式。
		第三种，单独写一个启动方式。
		
		目前看来换一个获取方式比较好，
		怎么说呢？
		首先本地是肯定不行的，唯一一个全局的地方就注册表了。
		注册表好处理吗？
		当然好处理了不是吗？
		那么现在怎么处理呢？
		
		看来更新程序也有点问题，这个怎么处理？
		首先，肯定改改上报工具的更新程序。
		有两种方式：
		1.直接改成只有上报工具可以使用
		2.改成通用的，通过一些配置手段来区分是否为上报工具。
		感觉第二种靠谱一点。
		改成什么配置？
		
		那么现在是成功的了。
		32位的先不处理了
		先把这个更新的问题搞定。
		
		考虑到一个电脑上面有多个版本的上报工具，那么又该怎么去处理呢？
		首先肯定会出现注册值抢夺的情况
		如果做多个
	
3.设计方案系统：
	1.贵港新的需求；
		1.贵港提出9个问题，有些问题确实不支持的；
		2.单点登陆问题。
	2.玉林新的需求；
	3.整体架构；
	4.整体单点登陆对接方案。
	
	需要保存吗？不需要保存。
	怎么处理比较好?
	其实有多个版本的时候，也可以用其他方式？跳过去
	不读注册表的方式进行更新，那么修改将作用于上报和更新工具不是吗？
	那么直接控制好了。
	新的都给他加一个bat文件进行控制。
	而旧的仍旧走老的流程。
	good job.
	
	不用加 直接会判断有没有，等等，这个是兼容老的，所以不能让他们用新的？
	是的，不能让他们用新的安装包。如果安装过一次，那么就会出现争抢。
	那么还是用一个文件来判断吧，也就是 出现了bat，那么就使用本地。的获取方式
	
	所以没有反而成了常态，老版本没有行不行？也是可以的，老版本没有，为空，也是读取的当前的。
	 
	然后出现的情况就变成了：新的有，bat，有注册值，可以使用，没有bat有注册值，可以使用，没有bat 没有注册值可以使用。
	
	就这样实现一下吧。
	如果逻辑没有问题了的话。
	V
	
	现在是什么情况呢？
	基本的代码都修改完成了，测试一下完整的流程。
	 
	好吧，也算完成了，至少可以解决一部分了
	  
			dtCerts.Rows[i]["ZZLB"].ToString()
			dtCerts.Rows[i]["ZSJB"].ToString()
			
			电子审图 ConsoleUpdate.exe EcaDwfCheckSystem10x64.dll EcaDwfDim10x64.dll version.xml 电子审图.exe
			EPDMSGT.exe uploadclient EPDMSGT.exe 
			EPDMSGT.exe uploadclient EPDMSGT.exe  EcaUpSdk.dll EcaUpSdk.dll.config ElecTuShenCilent.dll ElecTuShenCilent.dll.config EnergyConservation.dll EnergyConservation.dll.config Epdm.Controls.dll EPDMSGT.exe EPDMSGT.exe.config PlanUploadSdk.dll QMINewCensorIdea.htm UploadClientUpdateFilePath-20191206.rar UploadOperationLogic.dll UploadOperationLogic.dll.config version.xml 操作手册.pdf 更新内容.txt
	
	现在处理什么？
	1.陇南服务器配置修改
		服务器布置，放到晚上好了
	2.方案审查问题贵港
		
	3.测绘成果系统问题
	
	4.
	
	今天先处理一下 单点登陆后的，静默登陆问题。
	
	上服务器获取一个验证的地方
	
	http://172.18.4.7:18085/GGQLCServer/EcaServices/EcaSingleSignOnServer/GetAccessToken?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjIyNzEsIlVzZXJOYW1lIjoi5LyB5LiaIiwiTG9naW5OYW1lIjoicXkiLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.pojtMYphwvCnOhgE1_cGyxmuCWY64ehSXf6n9mHFEk4
	
	{\"Success\":true,\"access_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjIyNzEsIlVzZXJOYW1lIjoi5LyB5LiaIiwiTG9naW5OYW1lIjoicXkiLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.pojtMYphwvCnOhgE1_cGyxmuCWY64ehSXf6n9mHFEk4\"
	,
	\"userInfo\":
	{
	\"userId\":2271
	,\"userName\":\"企业\"
	,\"loginName\":\"qy\"
	,\"mobileTel\":\"\"
	,\"idcard\":\"\"
	,\"orgcode\":\"\"
	,\"staffType\":\"1\"
	,\"mainDeptID\":0
	,\"mainDeptName\":null
	,\"Roles\":
	{
	\"2979\":\"企业用户\"
	}
	,\"Depts\":
	{
	\"834\":\"企业用户\"
	}}}
	
	
	http://222.218.31.31:18086/plancensor/home/index?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjI0NDEsIlVzZXJOYW1lIjoi5Y-R5pS55aeUX-aigembheiOiSIsIkxvZ2luTmFtZSI6ImZndy1saWFuZ3lhbGkiLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.iqcwQM-F6cEpD1jjEgUiPp22UaaMJbBWkTn8xrnmef0
	
	
	http://172.18.4.7:18085/GGQLCServer/EcaServices/EcaSingleSignOnServer/GetAccessToken?code=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjI0NDEsIlVzZXJOYW1lIjoi5Y-R5pS55aeUX-aigembheiOiSIsIkxvZ2luTmFtZSI6ImZndy1saWFuZ3lhbGkiLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.iqcwQM-F6cEpD1jjEgUiPp22UaaMJbBWkTn8xrnmef0
	
	{"Success":true,"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySUQiOjI0NDEsIlVzZXJOYW1lIjoi5Y-R5pS55aeUX-aigembheiOiSIsIkxvZ2luTmFtZSI6ImZndy1saWFuZ3lhbGkiLCJEZXB0SUQiOjAsIkRlcHROYW1lIjpudWxsfQ.iqcwQM-F6cEpD1jjEgUiPp22UaaMJbBWkTn8xrnmef0","userInfo":
	{"userId":2441,"userName":"发改委_梁雅莉"
	,"loginName":"fgw-liangyali"
	,"mobileTel":""
	,"idcard":"450803199008176666"
	,"orgcode":"450803199008176666"
	,"staffType":"2"
	,"mainDeptID":0
	,"mainDeptName":null
	,"Roles":{"3069":"贵港市"}
	,"Depts":
	{
	"deptID":"1073",
	"deptName":"贵港市发展和改革委员会"
	}}}
	
	如果着急，先把锁号去掉，
	什么原因呢？
	因为以前可能是用云平台上报的。
	所以记录了锁号，
	EI上报到底记不记录锁号？
	应该是不会记录的，
	
	该项目是否使用该锁在云平台进行上报过？
	clear
-->
	设计方案审查，还差些什么？
	1.几个触发器
	哪几个表的字段需要触发器？
	
	3个表：
	表：tbBuildCorpBasicInfo
	列：id(MAX(ID)+1)
	
	表：sys_deptdef
	列：DEPTID ROW_GUID ISPLANDEPT(MAX(DEPTID)+1,NEWID(),1)    
	
	表：sys_staffdef
	列:ST_ID (MAX(ST_ID)+1)
	
	V
clear
-->测绘成果需求 
	简单地把测绘院的登陆模块做一下？
	只完成选择了测绘院，可以看到项目
	1.也就是选择对应的测绘院，在cad端就算是写死也可以看到新报建的项目。
	
	现在呢？ 
	看着需求的文档，一个个处理吧。只要一天处理点东西出来就好了。

	处理一下获取材料目录的
	
	现在的情况是什么？
	是网页端上传的图纸和 cad端上传的材料冲突了。
	
	我修改哪一边比较好？
	
	或者是中间做个存储过程？触发器什么的？
	没有必要吧。
	
	网页端的存储模式是：
	一个材料文件一条数据	然后如果有单体（材料所在父级目录，则新建表存储父级（默认创建三个父级））
	不存在多级
	cad端的存储模式是：
	一个目录一条数据
	存在多级的情况
	一个文件一条数据新建表；然后使用matralguid来对应row_guid来挂在目录下面。
	也就是目录和文件分别存储。
	这不是一样的模式吗？
	只是一个是多级一个是单级的问题，那么下面我如何修改合并呢？
	
	首先修改哪里的比较好？
	最好是cad端，因为bs端是有先前的设计在里面的。
	
	所以修改cad端。
	把哪些改了？
	
	我网页端如果有多个目录，如何处理的？
	。灵活配置是好的，只是网页端无法支持这个灵活配置的
	根本不需要，是直接展示的，所以修改是支持的。
	
	只是无法上传自定类型的
	这也没有关系不是吗，
	所以改造一下 cad端上传逻辑是完全可以的。
	
	添加目录存储过程，添加材料存储过程
	获取目录和材料的存储过程 以及初始化。
	
	我还是根据cad端来调试好了。
	
	V看一下网页端怎么样
	
	1.那么下面：完成cad端对其他类型的材料进行下载的逻辑，而对dwf等，试着直接在cad端打开。
	V2.完成申请表打印的功能。
		暂时忽略一下细节，把大致的完成好了。
	V明天把获取文件名称做了这个功能基本完成。
	
	下面就做cad端的文件加载逻辑。
	this.getResponseHeader('Content-Disposition')
	"%bd%ad%c9%bd%b3%c7%c4%cf%d3%d7%b6%f9%d4%b0%c9%ea%c7%eb%b1%ed"
	"attachment;filename=%bd%ad%c9%bd%b3%c7%c4%cf%d3%d7%b6%f9%d4%b0%c9%ea%c7%eb%b1%ed.doc"
	"%BD%AD%C9%BD%B3%C7%C4%CF%D3%D7%B6%F9%D4%B0%C9%EA%C7%EB%B1%ED"
	"%E4%BD%A0%E5%A5%BD%E5%95%8A"
	"attachment;filename=æ±å±±ååå¹¼å¿å­ç³è¯·è¡¨.doc"
	
	看样子cad端应该是支持dwg文件的直接打开，
	但是不支持dwf和pdf等其他文件。
	那么我现在什么逻辑呢？
	她说的话
	Vdwf可以在cad端直接打开吗？ 应该是可以的
	
	玉林的需要布置这套测绘成果的东西。
	
	V2.陇南的服务器情况看一下。
	
	1.所有列表分页：
	vue
	2.文档模板图片章
	将doc文档打印的功能做成通用的
	
	变量：模板、数据查询语句、图片章以及盖章的位置。
	
	其实有很多服务器资源是可以使用的，
	只要是不影响，
	
	一台电脑多个地市版本，如果处理呢？
	
	首先一台电脑针对一个地市只能安装一个版本
	所以我每次读取的时候，都读取一下，加地市的？
	如果没有，直接读取不带地市的。
	而每次安装的时候
	
	首先，假设我安装的时候就写入了注册表值
	而这个值的加了地市编号
	
	所以我启动的时候，
	我首先运行
	
	休息一下吧 

	220.191.237.175
	http://220.191.237.175/ECASignatrueFileServer/FileServer.asmx
	
	今天还需要处理些什么问题？
	
	fix(ConsoleUpdateForm):取消
	
	clear 
	
	现在测试成果提了一些新的需求，
	
	首先，看看 哪些字段没有存进去
	
	prjbuildcorpcode
	prjbuildlinkmanidnum
	servicestuffs
	
    3个小时：
	3个队 
	每场比赛2个队
	
	
	1v2 
	
	180分钟怎么跑？
	
	3个队，一个队至少2个小时 
	1.5
	
	ABC
	
	A-B B-C C-A 
	
	那么下面是时间的问题
	
	3h total 
	
	1 
	A+1 B+1			1
	B+1 C+1 		1	
	A+1 C+1 		1
	each team 2h B team C team back to back 
	A team 
	
	each 
	刚上传的可以了。
	那么下面就是
	做一个标记的功能了。
	
	应该是只有竣工图有
	方案也有
	那么下面怎么处理呢？
	
	当然是集成进去就好了。
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	